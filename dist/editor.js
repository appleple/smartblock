!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Editor=t():(e.SmartBlock=e.SmartBlock||{},e.SmartBlock.Editor=t())}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="bundle",n(n.s=78)}([function(e,t,n){"use strict";function r(e){this.content=e}n.r(t),n.d(t,"ContentMatch",(function(){return E})),n.d(t,"DOMParser",(function(){return W})),n.d(t,"DOMSerializer",(function(){return te})),n.d(t,"Fragment",(function(){return i})),n.d(t,"Mark",(function(){return c})),n.d(t,"MarkType",(function(){return L})),n.d(t,"Node",(function(){return O})),n.d(t,"NodeRange",(function(){return k})),n.d(t,"NodeType",(function(){return $})),n.d(t,"ReplaceError",(function(){return u})),n.d(t,"ResolvedPos",(function(){return b})),n.d(t,"Schema",(function(){return H})),n.d(t,"Slice",(function(){return h})),r.prototype={constructor:r,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var o=n&&n!=e?this.remove(n):this,i=o.find(e),s=o.content.slice();return-1==i?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new r(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new r(n)},addToStart:function(e,t){return new r([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new r(n)},addBefore:function(e,t,n){var o=this.remove(t),i=o.content.slice(),s=o.find(e);return i.splice(-1==s?i.length:s,0,t,n),new r(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=r.from(e)).size?new r(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=r.from(e)).size?new r(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=r.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach((function(t,n){e[t]=n})),e},get size(){return this.content.length>>1}},r.from=function(e){if(e instanceof r)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new r(t)};var o=r;class i{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,t,n,r=0,o){for(let i=0,s=0;s<t;i++){let l=this.content[i],a=s+l.nodeSize;if(a>e&&!1!==n(l,r+s,o||null,i)&&l.content.size){let o=s+1;l.nodesBetween(Math.max(0,e-o),Math.min(l.content.size,t-o),n,r+o)}s=a}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let o="",i=!0;return this.nodesBetween(e,t,(s,l)=>{s.isText?(o+=s.text.slice(Math.max(e,l)-l,t-l),i=!n):s.isLeaf?(r?o+="function"==typeof r?r(s):r:s.type.spec.leafText&&(o+=s.type.spec.leafText(s)),i=!n):!i&&s.isBlock&&(o+=n,i=!0)},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new i(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let o=0,i=0;i<t;o++){let s=this.content[o],l=i+s.nodeSize;l>e&&((i<e||l>t)&&(s=s.isText?s.cut(Math.max(0,e-i),Math.min(s.text.length,t-i)):s.cut(Math.max(0,e-i-1),Math.min(s.content.size,t-i-1))),n.push(s),r+=s.nodeSize),i=l}return new i(n,r)}cutByIndex(e,t){return e==t?i.empty:0==e&&t==this.content.length?this:new i(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new i(r,o)}addToStart(e){return new i([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new i(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return function e(t,n,r){for(let o=0;;o++){if(o==t.childCount||o==n.childCount)return t.childCount==n.childCount?null:r;let i=t.child(o),s=n.child(o);if(i!=s){if(!i.sameMarkup(s))return r;if(i.isText&&i.text!=s.text){for(let e=0;i.text[e]==s.text[e];e++)r++;return r}if(i.content.size||s.content.size){let t=e(i.content,s.content,r+1);if(null!=t)return t}r+=i.nodeSize}else r+=i.nodeSize}}(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return function e(t,n,r,o){for(let i=t.childCount,s=n.childCount;;){if(0==i||0==s)return i==s?null:{a:r,b:o};let l=t.child(--i),a=n.child(--s),c=l.nodeSize;if(l!=a){if(!l.sameMarkup(a))return{a:r,b:o};if(l.isText&&l.text!=a.text){let e=0,t=Math.min(l.text.length,a.text.length);for(;e<t&&l.text[l.text.length-e-1]==a.text[a.text.length-e-1];)e++,r--,o--;return{a:r,b:o}}if(l.content.size||a.content.size){let t=e(l.content,a.content,r-1,o-1);if(t)return t}r-=c,o-=c}else r-=c,o-=c}}(this,e,t,n)}findIndex(e,t=-1){if(0==e)return l(0,e);if(e==this.size)return l(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=r+this.child(n).nodeSize;if(o>=e)return o==e||t>0?l(n+1,o):l(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return i.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new i(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return i.empty;let t,n=0;for(let r=0;r<e.length;r++){let o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new i(t||e,n)}static from(e){if(!e)return i.empty;if(e instanceof i)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new i([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}i.empty=new i([],0);const s={index:0,offset:0};function l(e,t){return s.index=e,s.offset=t,s}function a(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!a(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!a(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class c{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&a(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);return n.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return c.none;if(e instanceof c)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}}c.none=[];class u extends Error{}class h{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=function e(t,n,r,o){let{index:i,offset:s}=t.findIndex(n),l=t.maybeChild(i);if(s==n||l.isText)return o&&!o.canReplace(i,i,r)?null:t.cut(0,n).append(r).append(t.cut(n));let a=e(l.content,n-s-1,r);return a&&t.replaceChild(i,l.copy(a))}(this.content,e+this.openStart,t);return n&&new h(n,this.openStart,this.openEnd)}removeBetween(e,t){return new h(function e(t,n,r){let{index:o,offset:i}=t.findIndex(n),s=t.maybeChild(o),{index:l,offset:a}=t.findIndex(r);if(i==n||s.isText){if(a!=r&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(r))}if(o!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(e(s.content,n-i-1,r-i-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return h.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new h(i.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)r++;return new h(e,n,r)}}function d(e,t,n){if(n.openStart>e.depth)throw new u("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new u("Inconsistent open depths");return function e(t,n,r,o){let s=t.index(o),l=t.node(o);if(s==n.index(o)&&o<t.depth-r.openStart){let i=e(t,n,r,o+1);return l.copy(l.content.replaceChild(s,i))}if(r.content.size){if(r.openStart||r.openEnd||t.depth!=o||n.depth!=o){let{start:e,end:s}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let e=n-1;e>=0;e--)r=t.node(e).copy(i.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(r,t);return v(l,function e(t,n,r,o,s){let l=t.depth>s&&p(t,n,s+1),a=o.depth>s&&p(r,o,s+1),c=[];g(null,t,s,c),l&&a&&n.index(s)==r.index(s)?(f(l,a),m(v(l,e(t,n,r,o,s+1)),c)):(l&&m(v(l,y(t,n,s+1)),c),g(n,r,s,c),a&&m(v(a,y(r,o,s+1)),c));return g(o,null,s,c),new i(c)}(t,e,s,n,o))}{let e=t.parent,o=e.content;return v(e,o.cut(0,t.parentOffset).append(r.content).append(o.cut(n.parentOffset)))}}return v(l,y(t,n,o))}(e,t,n,0)}function f(e,t){if(!t.type.compatibleContent(e.type))throw new u("Cannot join "+t.type.name+" onto "+e.type.name)}function p(e,t,n){let r=e.node(n);return f(r,t.node(n)),r}function m(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function g(e,t,n,r){let o=(t||e).node(n),i=0,s=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(m(e.nodeAfter,r),i++));for(let e=i;e<s;e++)m(o.child(e),r);t&&t.depth==n&&t.textOffset&&m(t.nodeBefore,r)}function v(e,t){return e.type.checkContent(t),e.copy(t)}function y(e,t,n){let r=[];if(g(null,e,n,r),e.depth>n){m(v(p(e,t,n+1),y(e,t,n+1)),r)}return g(t,null,n,r),new i(r)}h.empty=new h(i.empty,0,0);class b{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)r+=n.child(t).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return c.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let o=n.marks;for(var i=0;i<o.length;i++)!1!==o[i].type.spec.inclusive||r&&o[i].isInSet(r.marks)||(o=o[i--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new k(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,o=t;for(let t=e;;){let{index:e,offset:i}=t.content.findIndex(o),s=o-i;if(n.push(t,e,r+i),!s)break;if(t=t.child(e),t.isText)break;o=s-1,r+=i+1}return new b(t,n,o)}static resolveCached(e,t){for(let n=0;n<w.length;n++){let r=w[n];if(r.pos==t&&r.doc==e)return r}let n=w[_]=b.resolve(e,t);return _=(_+1)%S,n}}let w=[],_=0,S=12;class k{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const x=Object.create(null);class O{constructor(e,t,n,r=c.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||i.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&a(this.attrs,t||e.defaultAttrs||x)&&c.sameSet(this.marks,n||c.none)}copy(e=null){return e==this.content?this:new O(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new O(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return h.empty;let r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),s=r.start(i),l=r.node(i).content.cut(r.pos-s,o.pos-s);return new h(l,r.depth-i,o.depth-i)}replace(e,t,n){return d(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return b.resolveCached(this,e)}resolveNoCache(e){return b.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),M(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=i.empty,r=0,o=n.childCount){let s=this.contentMatchAt(e).matchFragment(n,r,o),l=s&&s.matchFragment(this.content,t);if(!l||!l.validEnd)return!1;for(let e=r;e<o;e++)if(!this.type.allowsMarks(n.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=c.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!c.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=i.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)}}O.prototype.text=void 0;class C extends O{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):M(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new C(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new C(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function M(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class E{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new N(e,t);if(null==n.next)return E.empty;let r=T(n);n.next&&n.err("Unexpected trailing text");let o=function(e){let t=Object.create(null);return function n(r){let o=[];r.forEach(t=>{e[t].forEach(({term:t,to:n})=>{if(!t)return;let r;for(let e=0;e<o.length;e++)o[e][0]==t&&(r=o[e][1]);z(e,n).forEach(e=>{r||o.push([t,r=[]]),-1==r.indexOf(e)&&r.push(e)})})});let i=t[r.join(",")]=new E(r.indexOf(e.length-1)>-1);for(let e=0;e<o.length;e++){let r=o[e][1].sort(I);i.next.push({type:o[e][0],next:t[r.join(",")]||n(r)})}return i}(z(e,0))}(function(e){let t=[[]];return o(function e(t,i){if("choice"==t.type)return t.exprs.reduce((t,n)=>t.concat(e(n,i)),[]);if("seq"!=t.type){if("star"==t.type){let s=n();return r(i,s),o(e(t.expr,s),s),[r(s)]}if("plus"==t.type){let s=n();return o(e(t.expr,i),s),o(e(t.expr,s),s),[r(s)]}if("opt"==t.type)return[r(i)].concat(e(t.expr,i));if("range"==t.type){let s=i;for(let r=0;r<t.min;r++){let r=n();o(e(t.expr,s),r),s=r}if(-1==t.max)o(e(t.expr,s),s);else for(let i=t.min;i<t.max;i++){let i=n();r(s,i),o(e(t.expr,s),i),s=i}return[r(s)]}if("name"==t.type)return[r(i,void 0,t.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=e(t.exprs[r],i);if(r==t.exprs.length-1)return s;o(s,i=n())}}(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach(e=>e.to=t)}}(r));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],o=!e.validEnd,i=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];i.push(n.name),!o||n.isText||n.hasRequiredAttrs()||(o=!1),-1==r.indexOf(s)&&r.push(s)}o&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function o(s,l){let a=s.matchFragment(e,n);if(a&&(!t||a.validEnd))return i.from(l.map(e=>e.createAndFill()));for(let e=0;e<s.next.length;e++){let{type:t,next:n}=s.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=o(n,l.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),o=r.match;if(o.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<o.next.length;e++){let{type:i,next:s}=o.next[e];i.isLeaf||i.hasRequiredAttrs()||i.name in t||r.type&&!s.validEnd||(n.push({match:i.contentMatch,type:i,via:r}),t[i.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)r+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return r}).join("\n")}}E.empty=new E(!0);class N{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function T(e){let t=[];do{t.push(A(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function A(e){let t=[];do{t.push(D(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function D(e){let t=function(e){if(e.eat("(")){let t=T(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let o=[];for(let e in n){let r=n[e];r.groups.indexOf(t)>-1&&o.push(r)}0==o.length&&e.err("No node type or group '"+t+"' found");return o}(e,e.next).map(t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=R(e,t)}return t}function P(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function R(e,t){let n=P(e),r=n;return e.eat(",")&&(r="}"!=e.next?P(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function I(e,t){return t-e}function z(e,t){let n=[];return function t(r){let o=e[r];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(r);for(let e=0;e<o.length;e++){let{term:r,to:i}=o[e];r||-1!=n.indexOf(i)||t(i)}}(t),n.sort(I)}function j(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function B(e,t){let n=Object.create(null);for(let r in e){let o=t&&t[r];if(void 0===o){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=t.default}n[r]=o}return n}function F(e){let t=Object.create(null);if(e)for(let n in e)t[n]=new V(e[n]);return t}class ${constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=F(n.attrs),this.defaultAttrs=j(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==E.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:B(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new O(this,this.computeAttrs(e),i.from(t),c.setFrom(n))}createChecked(e=null,t,n){return t=i.from(t),this.checkContent(t),new O(this,this.computeAttrs(e),t,c.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=i.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),o=r&&r.fillBefore(i.empty,!0);return o?new O(this,e,t.append(o),c.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:c.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,r)=>n[e]=new $(e,t,r));let r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class V{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class L{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=F(r.attrs),this.excluded=null;let o=j(this.attrs);this.instance=o?new c(this,o):null}create(e=null){return!e&&this.instance?this.instance:new c(this,B(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((e,o)=>n[e]=new L(e,r++,t,o)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class H{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let n in e)t[n]=e[n];t.nodes=o.from(e.nodes),t.marks=o.from(e.marks||{}),this.nodes=$.compile(this.spec.nodes,this),this.marks=L.compile(this.spec.marks,this);let n=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw new RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],r=t.spec.content||"",o=t.spec.marks;t.contentMatch=n[r]||(n[r]=E.parse(r,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.markSet="_"==o?null:o?q(this,o.split(" ")):""!=o&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],n=t.spec.excludes;t.excluded=null==n?[t]:""==n?[]:q(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof $))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new C(n,n.defaultAttrs,e,c.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return O.fromJSON(this,e)}markFromJSON(e){return c.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function q(e,t){let n=[];for(let r=0;r<t.length;r++){let o=t[r],i=e.marks[o],s=i;if(i)n.push(i);else for(let t in e.marks){let r=e.marks[t];("_"==o||r.spec.group&&r.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class W{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(e=>{e.tag?this.tags.push(e):e.style&&this.styles.push(e)}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}parse(e,t={}){let n=new Y(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new Y(this,t,!0);return n.addAll(e,t.from,t.to),h.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(Z(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let r=this.styles[o],i=r.style;if(!(0!=i.indexOf(e)||r.context&&!n.matchesContext(r.context)||i.length>e.length&&(61!=i.charCodeAt(e.length)||i.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let t in e.marks){let r=e.marks[t].spec.parseDOM;r&&r.forEach(e=>{n(e=X(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let r=e.nodes[t].spec.parseDOM;r&&r.forEach(e=>{n(e=X(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new W(e,W.schemaRules(e)))}}const J={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},K={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},U={ol:!0,ul:!0};function G(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class Q{constructor(e,t,n,r,o,i,s){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=c.none,this.stashMarks=[],this.match=i||(4&s?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(i.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=i.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(i.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){let r=n[t];(this.type?this.type.allowsMarkType(r.type):ee(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!J.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Y{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let r,o=t.topNode,i=G(null,t.preserveWhitespace,0)|(n?4:0);r=o?new Q(o.type,o.attrs,c.none,c.none,!0,t.topMatch||o.type.contentMatch,i):new Q(n?null:e.schema.topNodeType,null,c.none,c.none,!0,null,i),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){let t=e.getAttribute("style");if(t){let n=this.readStyles(function(e){let t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t));if(!n)return;let[r,o]=n,i=this.top;for(let e=0;e<o.length;e++)this.removePendingMark(o[e],i);for(let e=0;e<r.length;e++)this.addPendingMark(r[e]);this.addElement(e);for(let e=0;e<r.length;e++)this.removePendingMark(r[e],i);for(let e=0;e<o.length;e++)this.addPendingMark(o[e])}else this.addElement(e)}}addTextNode(e){let t=e.nodeValue,n=this.top;if(2&n.options||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(1&n.options)t=2&n.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let n,r=e.nodeName.toLowerCase();U.hasOwnProperty(r)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&U.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(o?o.ignore:K.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let t,n=this.top,i=this.needsBlock;if(J.hasOwnProperty(r))n.content.length&&n.content[0].isInline&&this.open&&(this.open--,n=this.top),t=!0,n.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),t&&this.sync(n),this.needsBlock=i}else this.addElementByRule(e,o,!1===o.consuming?n:void 0)}leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}ignoreFallback(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=c.none,n=c.none;for(let r=0;r<e.length;r+=2)for(let o=void 0;;){let i=this.parser.matchStyle(e[r],e[r+1],this,o);if(!i)break;if(i.ignore)return null;if(i.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(e=>{i.clearMark(e)&&(n=e.addToSet(n))}):t=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(t),!1!==i.consuming)break;o=i}return[t,n]}addElementByRule(e,t,n){let r,o,i;if(t.node)o=this.parser.schema.nodes[t.node],o.isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):r=this.enter(o,t.attrs||null,t.preserveWhitespace);else{i=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(i)}let s=this.top;if(o&&o.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n)}r&&this.sync(s)&&this.open--,i&&this.removePendingMark(i,s)}addAll(e,t,n){let r=t||0;for(let o=t?e.childNodes[t]:e.firstChild,i=null==n?null:e.childNodes[n];o!=i;o=o.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(o);this.findAtPoint(e,r)}findPlace(e){let t,n;for(let r=this.open;r>=0;r--){let o=this.nodes[r],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,n=o,!i.length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(let e=0;e<t.length;e++)this.enterInner(t[e],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let r=0;r<e.marks.length;r++)t.type&&!t.type.allowsMarkType(e.marks[r].type)||(n=e.marks[r].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){let r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r}enterInner(e,t=null,n=!1,r){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let i=G(e,r,o.options);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new Q(e,t,o.activeMarks,o.pendingMarks,n,null,i)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),o=-(n?n.depth+1:0)+(r?0:1),i=(e,s)=>{for(;e>=0;e--){let l=t[e];if(""==l){if(e==t.length-1||0==e)continue;for(;s>=o;s--)if(i(e-1,s))return!0;return!1}{let e=s>0||0==s&&r?this.nodes[s].type:n&&s>=o?n.node(s-o).type:null;if(!e||e.name!=l&&-1==e.groups.indexOf(l))return!1;s--}}return!0};return i(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}addPendingMark(e){let t=function(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;n>=0;n--){let r=this.nodes[n];if(r.pendingMarks.lastIndexOf(e)>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);let t=r.popFromStashMark(e);t&&r.type&&r.type.allowsMarkType(t.type)&&(r.activeMarks=t.addToSet(r.activeMarks))}if(r==t)break}}}function Z(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function X(e){let t={};for(let n in e)t[n]=e[n];return t}function ee(e,t){let n=t.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(e))continue;let i=[],s=e=>{i.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:o}=e.edge(n);if(r==t)return!0;if(i.indexOf(o)<0&&s(o))return!0}};if(s(o.contentMatch))return!0}}class te{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=re(t).createDocumentFragment());let r=n,o=[];return e.forEach(e=>{if(o.length||e.marks.length){let n=0,i=0;for(;n<o.length&&i<e.marks.length;){let t=e.marks[i];if(this.marks[t.type.name]){if(!t.eq(o[n][0])||!1===t.type.spec.spanning)break;n++,i++}else i++}for(;n<o.length;)r=o.pop()[1];for(;i<e.marks.length;){let n=e.marks[i++],s=this.serializeMark(n,e.isInline,t);s&&(o.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=te.renderSpec(re(t),this.nodes[e.type.name](e));if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&te.renderSpec(re(n),r(e,t))}static renderSpec(e,t,n=null){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let r,o=t[0],i=o.indexOf(" ");i>0&&(n=o.slice(0,i),o=o.slice(i+1));let s=n?e.createElementNS(n,o):e.createElement(o),l=t[1],a=1;if(l&&"object"==typeof l&&null==l.nodeType&&!Array.isArray(l)){a=2;for(let e in l)if(null!=l[e]){let t=e.indexOf(" ");t>0?s.setAttributeNS(e.slice(0,t),e.slice(t+1),l[e]):s.setAttribute(e,l[e])}}for(let o=a;o<t.length;o++){let i=t[o];if(0===i){if(o<t.length-1||o>a)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}{let{dom:t,contentDOM:o}=te.renderSpec(e,i,n);if(s.appendChild(t),o){if(r)throw new RangeError("Multiple content holes");r=o}}}return{dom:s,contentDOM:r}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new te(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=ne(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return ne(e.marks)}}function ne(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function re(e){return e.document||window.document}},function(e,t,n){"use strict";n.r(t),n.d(t,"AllSelection",(function(){return p})),n.d(t,"EditorState",(function(){return k})),n.d(t,"NodeSelection",(function(){return d})),n.d(t,"Plugin",(function(){return x})),n.d(t,"PluginKey",(function(){return M})),n.d(t,"Selection",(function(){return s})),n.d(t,"SelectionRange",(function(){return l})),n.d(t,"TextSelection",(function(){return u})),n.d(t,"Transaction",(function(){return y}));var r=n(0),o=n(2);const i=Object.create(null);class s{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new l(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=r.Slice.empty){let n=t.content.lastChild,o=null;for(let e=0;e<t.openEnd;e++)o=n,n=n.lastChild;let i=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:c}=s[l],u=e.mapping.slice(i);e.replaceRange(u.map(a.pos),u.map(c.pos),l?r.Slice.empty:t),0==l&&v(e,i,(n?n.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:i,$to:s}=r[o],l=e.mapping.slice(n),a=l.map(i.pos),c=l.map(s.pos);o?e.deleteRange(a,c):(e.replaceRangeWith(a,c,t),v(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new u(e):g(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let r=e.depth-1;r>=0;r--){let o=t<0?g(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):g(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new p(e.node(0))}static atStart(e){return g(e,e,0,0,1)||new p(e)}static atEnd(e){return g(e,e,e.content.size,e.childCount,-1)||new p(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=i[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in i)throw new RangeError("Duplicate use of selection JSON ID "+e);return i[e]=t,t.prototype.jsonID=e,t}getBookmark(){return u.between(this.$anchor,this.$head).getBookmark()}}s.prototype.visible=!0;class l{constructor(e,t){this.$from=e,this.$to=t}}let a=!1;function c(e){a||e.parent.inlineContent||(a=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class u extends s{constructor(e,t=e){c(e),c(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return s.near(n);let r=e.resolve(t.map(this.anchor));return new u(r.parent.inlineContent?r:n,n)}replace(e,t=r.Slice.empty){if(super.replace(e,t),t==r.Slice.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof u&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new h(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new u(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let e=s.findFrom(t,n,!0)||s.findFrom(t,-n,!0);if(!e)return s.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r||(e=(s.findFrom(e,-n,!0)||s.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0)&&(e=t),new u(e,t)}}s.jsonID("text",u);class h{constructor(e,t){this.anchor=e,this.head=t}map(e){return new h(e.map(this.anchor),e.map(this.head))}resolve(e){return u.between(e.resolve(this.anchor),e.resolve(this.head))}}class d extends s{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),o=e.resolve(r);return n?s.near(o):new d(o)}content(){return new r.Slice(r.Fragment.from(this.node),0,0)}eq(e){return e instanceof d&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new f(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new d(e.resolve(t.anchor))}static create(e,t){return new d(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}d.prototype.visible=!1,s.jsonID("node",d);class f{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new h(n,n):new f(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&d.isSelectable(n)?new d(t):s.near(t)}}class p extends s{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=r.Slice.empty){if(t==r.Slice.empty){e.delete(0,e.doc.content.size);let t=s.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new p(e)}map(e){return new p(e)}eq(e){return e instanceof p}getBookmark(){return m}}s.jsonID("all",p);const m={map(){return this},resolve:e=>new p(e)};function g(e,t,n,r,o,i=!1){if(t.inlineContent)return u.create(e,n);for(let s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){let r=t.child(s);if(r.isAtom){if(!i&&d.isSelectable(r))return d.create(e,n-(o<0?r.nodeSize:0))}else{let t=g(e,r,n+o,o<0?r.childCount:0,o,i);if(t)return t}n+=r.nodeSize*o}return null}function v(e,t,n){let r=e.steps.length-1;if(r<t)return;let i,l=e.steps[r];(l instanceof o.ReplaceStep||l instanceof o.ReplaceAroundStep)&&(e.mapping.maps[r].forEach((e,t,n,r)=>{null==i&&(i=r)}),e.setSelection(s.near(e.doc.resolve(i),n)))}class y extends o.Transform{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return r.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.Mark.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let o=this.storedMarks;if(!o){let e=this.doc.resolve(t);o=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function b(e,t){return t&&e?e.bind(t):e}class w{constructor(e,t,n){this.name=e,this.init=b(t.init,n),this.apply=b(t.apply,n)}}const _=[new w("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new w("selection",{init:(e,t)=>e.selection||s.atStart(t.doc),apply:e=>e.selection}),new w("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new w("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class S{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=_.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new w(e.key,e.spec.state,e))})}}class k{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let o=!1;for(let i=0;i<this.config.plugins.length;i++){let s=this.config.plugins[i];if(s.spec.appendTransaction){let l=r?r[i].n:0,a=r?r[i].state:this,c=l<t.length&&s.spec.appendTransaction.call(s,l?t.slice(l):t,a,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new k(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new y(this)}static create(e){let t=new S(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new k(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new S(this.schema,e.plugins),n=t.fields,r=new k(t);for(let t=0;t<n.length;t++){let o=n[t].name;r[o]=this.hasOwnProperty(o)?this[o]:n[t].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new S(e.schema,e.plugins),i=new k(o);return o.fields.forEach(o=>{if("doc"==o.name)i.doc=r.Node.fromJSON(e.schema,t.doc);else if("selection"==o.name)i.selection=s.fromJSON(i.doc,t.selection);else if("storedMarks"==o.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let r in n){let s=n[r],l=s.spec.state;if(s.key==o.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(t,r))return void(i[o.name]=l.fromJSON.call(s,e,t[r],i))}i[o.name]=o.init(e,i)}}),i}}class x{constructor(e){this.spec=e,this.props={},e.props&&function e(t,n,r){for(let o in t){let i=t[o];i instanceof Function?i=i.bind(n):"handleDOMEvents"==o&&(i=e(i,n,{})),r[o]=i}return r}(e.props,this,this.props),this.key=e.key?e.key.key:C("plugin")}getState(e){return e[this.key]}}const O=Object.create(null);function C(e){return e in O?e+"$"+ ++O[e]:(O[e]=0,e+"$")}class M{constructor(e="key"){this.key=C(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}},function(e,t,n){"use strict";n.r(t),n.d(t,"AddMarkStep",(function(){return f})),n.d(t,"AddNodeMarkStep",(function(){return m})),n.d(t,"AttrStep",(function(){return V})),n.d(t,"MapResult",(function(){return s})),n.d(t,"Mapping",(function(){return a})),n.d(t,"RemoveMarkStep",(function(){return p})),n.d(t,"RemoveNodeMarkStep",(function(){return g})),n.d(t,"ReplaceAroundStep",(function(){return y})),n.d(t,"ReplaceStep",(function(){return v})),n.d(t,"Step",(function(){return u})),n.d(t,"StepMap",(function(){return l})),n.d(t,"StepResult",(function(){return h})),n.d(t,"Transform",(function(){return H})),n.d(t,"TransformError",(function(){return L})),n.d(t,"canJoin",(function(){return O})),n.d(t,"canSplit",(function(){return x})),n.d(t,"dropPoint",(function(){return N})),n.d(t,"findWrapping",(function(){return S})),n.d(t,"insertPoint",(function(){return E})),n.d(t,"joinPoint",(function(){return M})),n.d(t,"liftTarget",(function(){return _})),n.d(t,"replaceStep",(function(){return T}));var r=n(0);const o=Math.pow(2,16);function i(e){return 65535&e}class s{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class l{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&l.empty)return l.empty}recover(e){let t=0,n=i(e);if(!this.inverted)for(let e=0;e<n;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/o}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,i=this.inverted?2:1,l=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let c=this.ranges[a]-(this.inverted?r:0);if(c>e)break;let u=this.ranges[a+i],h=this.ranges[a+l],d=c+u;if(e<=d){let i=c+r+((u?e==c?-1:e==d?1:t:t)<0?0:h);if(n)return i;let l=e==(t<0?c:d)?null:a/3+(e-c)*o,f=e==c?2:e==d?1:4;return(t<0?e!=c:e!=d)&&(f|=8),new s(i,f,l)}r+=h-u}return n?e+r:new s(e+r,0,null)}touches(e,t){let n=0,r=i(t),o=this.inverted?2:1,s=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let i=this.ranges[t]-(this.inverted?n:0);if(i>e)break;let l=this.ranges[t+o];if(e<=i+l&&t==3*r)return!0;n+=this.ranges[t+s]-l}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let i=this.ranges[r],s=i-(this.inverted?o:0),l=i+(this.inverted?0:o),a=this.ranges[r+t],c=this.ranges[r+n];e(s,s+a,l,l+c),o+=c-a}}invert(){return new l(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?l.empty:new l(e<0?[0,-e,0]:[0,0,e])}}l.empty=new l([]);class a{constructor(e=[],t,n=0,r=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(e=0,t=this.maps.length){return new a(this.maps,this.mirror,e,t)}copy(){return new a(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new a;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let n=this.from;n<this.to;n++){let o=this.maps[n].mapResult(e,t);if(null!=o.recover){let t=this.getMirror(n);if(null!=t&&t>n&&t<this.to){n=t,e=this.maps[t].recover(o.recover);continue}}r|=o.delInfo,e=o.pos}return n?e:new s(e,r,null)}}const c=Object.create(null);class u{getMap(){return l.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=c[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in c)throw new RangeError("Duplicate use of step JSON ID "+e);return c[e]=t,t.prototype.jsonID=e,t}}class h{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new h(e,null)}static fail(e){return new h(null,e)}static fromReplace(e,t,n,o){try{return h.ok(e.replace(t,n,o))}catch(e){if(e instanceof r.ReplaceError)return h.fail(e.message);throw e}}}function d(e,t,n){let o=[];for(let r=0;r<e.childCount;r++){let i=e.child(r);i.content.size&&(i=i.copy(d(i.content,t,i))),i.isInline&&(i=t(i,n,r)),o.push(i)}return r.Fragment.fromArray(o)}class f extends u{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),o=n.node(n.sharedDepth(this.to)),i=new r.Slice(d(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,o),t.openStart,t.openEnd);return h.fromReplace(e,this.from,this.to,i)}invert(){return new p(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new f(t.pos,n.pos,this.mark)}merge(e){return e instanceof f&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new f(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new f(t.from,t.to,e.markFromJSON(t.mark))}}u.jsonID("addMark",f);class p extends u{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new r.Slice(d(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return h.fromReplace(e,this.from,this.to,n)}invert(){return new f(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new p(t.pos,n.pos,this.mark)}merge(e){return e instanceof p&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new p(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new p(t.from,t.to,e.markFromJSON(t.mark))}}u.jsonID("removeMark",p);class m extends u{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return h.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return h.fromReplace(e,this.pos,this.pos+1,new r.Slice(r.Fragment.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new m(this.pos,t.marks[n]);return new m(this.pos,this.mark)}}return new g(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new m(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new m(t.pos,e.markFromJSON(t.mark))}}u.jsonID("addNodeMark",m);class g extends u{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return h.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return h.fromReplace(e,this.pos,this.pos+1,new r.Slice(r.Fragment.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new m(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new g(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new g(t.pos,e.markFromJSON(t.mark))}}u.jsonID("removeNodeMark",g);class v extends u{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&b(e,this.from,this.to)?h.fail("Structure replace would overwrite content"):h.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new l([this.from,this.to-this.from,this.slice.size])}invert(e){return new v(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new v(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof v)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?r.Slice.empty:new r.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new v(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?r.Slice.empty:new r.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new v(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new v(t.from,t.to,r.Slice.fromJSON(e,t.slice),!!t.structure)}}u.jsonID("replace",v);class y extends u{constructor(e,t,n,r,o,i,s=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=i,this.structure=s}apply(e){if(this.structure&&(b(e,this.from,this.gapFrom)||b(e,this.gapTo,this.to)))return h.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return h.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?h.fromReplace(e,this.from,this.to,n):h.fail("Content does not fit in gap")}getMap(){return new l([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new y(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||o>n.pos?null:new y(t.pos,n.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new y(t.from,t.to,t.gapFrom,t.gapTo,r.Slice.fromJSON(e,t.slice),t.insert,!!t.structure)}}function b(e,t,n){let r=e.resolve(t),o=n-t,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let e=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,o--}}return!1}function w(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function _(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!w(r,o,i))break}return null}function S(e,t,n=null,r=e){let o=function(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;let s=i.length?i[0]:t;return n.canReplaceWith(r,o,s)?i:null}(e,t),i=o&&function(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.child(r),s=t.contentMatch.findWrapping(i.type);if(!s)return null;let l=(s.length?s[s.length-1]:t).contentMatch;for(let e=r;l&&e<o;e++)l=l.matchType(n.child(e).type);return l&&l.validEnd?s:null}(r,t);return i?o.map(k).concat({type:t,attrs:n}).concat(i.map(k)):null}function k(e){return{type:e,attrs:null}}function x(e,t,n=1,r){let o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let e=o.depth-1,t=n-2;e>i;e--,t--){let n=o.node(e),i=o.index(e);if(n.type.spec.isolating)return!1;let s=n.content.cutByIndex(i,n.childCount),l=r&&r[t+1];l&&(s=s.replaceChild(0,l.type.create(l.attrs)));let a=r&&r[t]||n;if(!n.canReplace(i+1,n.childCount)||!a.type.validContent(s))return!1}let l=o.indexAfter(i),a=r&&r[0];return o.node(i).canReplaceWith(l,l,a?a.type:o.node(i+1).type)}function O(e,t){let n=e.resolve(t),r=n.index();return C(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function C(e,t){return!(!e||!t||e.isLeaf||!e.canAppend(t))}function M(e,t,n=-1){let r=e.resolve(t);for(let e=r.depth;;e--){let o,i,s=r.index(e);if(e==r.depth?(o=r.nodeBefore,i=r.nodeAfter):n>0?(o=r.node(e+1),s++,i=r.node(e).maybeChild(s)):(o=r.node(e).maybeChild(s-1),i=r.node(e+1)),o&&!o.isTextblock&&C(o,i)&&r.node(e).canReplace(s,s+1))return t;if(0==e)break;t=n<0?r.before(e):r.after(e)}}function E(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let e=r.depth-1;e>=0;e--){let t=r.index(e);if(r.node(e).canReplaceWith(t,t,n))return r.before(e+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let e=r.depth-1;e>=0;e--){let t=r.indexAfter(e);if(r.node(e).canReplaceWith(t,t,n))return r.after(e+1);if(t<r.node(e).childCount)return null}return null}function N(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let o=n.content;for(let e=0;e<n.openStart;e++)o=o.firstChild.content;for(let e=1;e<=(0==n.openStart&&n.size?2:1);e++)for(let t=r.depth;t>=0;t--){let n=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,i=r.index(t)+(n>0?1:0),s=r.node(t),l=!1;if(1==e)l=s.canReplace(i,i,o);else{let e=s.contentMatchAt(i).findWrapping(o.firstChild.type);l=e&&s.canReplaceWith(i,i,e[0])}if(l)return 0==n?r.pos:n<0?r.before(t+1):r.after(t+1)}return null}function T(e,t,n=t,o=r.Slice.empty){if(t==n&&!o.size)return null;let i=e.resolve(t),s=e.resolve(n);return A(i,s,o)?new v(t,n,o):new D(i,s,o).fit()}function A(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}u.jsonID("replaceAround",y);class D{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=r.Fragment.empty;for(let t=0;t<=e.depth;t++){let n=e.node(t);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=r.Fragment.from(e.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,o=this.close(e<0?this.$to:n.doc.resolve(e));if(!o)return null;let i=this.placed,s=n.depth,l=o.depth;for(;s&&l&&1==i.childCount;)i=i.firstChild.content,s--,l--;let a=new r.Slice(i,s,l);return e>-1?new y(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new v(n.pos,o.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){e=n;break}t=o.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,o=null;n?(o=I(this.unplaced.content,n-1).firstChild,e=o.content):e=this.unplaced.content;let i=e.firstChild;for(let e=this.depth;e>=0;e--){let s,{type:l,match:a}=this.frontier[e],c=null;if(1==t&&(i?a.matchType(i.type)||(c=a.fillBefore(r.Fragment.from(i),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:n,frontierDepth:e,parent:o,inject:c};if(2==t&&i&&(s=a.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:e,parent:o,wrap:s};if(o&&a.matchType(o.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,o=I(e,t);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new r.Slice(e,t+1,Math.max(n,o.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,o=I(e,t);if(o.childCount<=1&&t>0){let i=e.size-t<=t+o.size;this.unplaced=new r.Slice(P(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new r.Slice(P(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:o,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let e=0;e<i.length;e++)this.openFrontierNode(i[e]);let s=this.unplaced,l=n?n.content:s.content,a=s.openStart-e,c=0,u=[],{match:h,type:d}=this.frontier[t];if(o){for(let e=0;e<o.childCount;e++)u.push(o.child(e));h=h.matchFragment(o)}let f=l.size+e-(s.content.size-s.openEnd);for(;c<l.childCount;){let e=l.child(c),t=h.matchType(e.type);if(!t)break;c++,(c>1||0==a||e.content.size)&&(h=t,u.push(z(e.mark(d.allowedMarks(e.marks)),1==c?a:0,c==l.childCount?f:-1)))}let p=c==l.childCount;p||(f=-1),this.placed=R(this.placed,t,r.Fragment.from(u)),this.frontier[t].match=h,p&&f<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=l;e<f;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=p?0==e?r.Slice.empty:new r.Slice(P(s.content,e-1,1),e-1,f<0?s.openEnd:e-1):new r.Slice(P(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!j(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),i=j(e,t,r,n,o);if(i){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],o=j(e,n,r,t,!0);if(!o||o.childCount)continue e}return{depth:t,fit:i,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=R(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=R(this.placed,this.depth,r.Fragment.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(r.Fragment.empty,!0);e.childCount&&(this.placed=R(this.placed,this.frontier.length,e))}}function P(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(P(e.firstChild.content,t-1,n)))}function R(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(R(e.lastChild.content,t-1,n)))}function I(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function z(e,t,n){if(t<=0)return e;let o=e.content;return t>1&&(o=o.replaceChild(0,z(o.firstChild,t-1,1==o.childCount?n-1:0))),t>0&&(o=e.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(e.type.contentMatch.matchFragment(o).fillBefore(r.Fragment.empty,!0)))),e.copy(o)}function j(e,t,n,r,o){let i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let l=r.fillBefore(i.content,!0,s);return l&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,s)?l:null}function B(e){return e.spec.defining||e.spec.definingForContent}function F(e,t,n,o,i){if(t<n){let r=e.firstChild;e=e.replaceChild(0,r.copy(F(r.content,t+1,n,o,r)))}if(t>o){let t=i.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(r.Fragment.empty,!0))}return e}function $(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(o==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==o-1)&&n.push(r)}return n}class V extends u{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return h.fail("No node at attribute step's position");let n=Object.create(null);for(let e in t.attrs)n[e]=t.attrs[e];n[this.attr]=this.value;let o=t.type.create(n,null,t.marks);return h.fromReplace(e,this.pos,this.pos+1,new r.Slice(r.Fragment.from(o),0,t.isLeaf?0:1))}getMap(){return l.empty}invert(e){return new V(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new V(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new V(t.pos,t.attr,t.value)}}u.jsonID("attr",V);let L=class extends Error{};L=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},L.prototype=Object.create(Error.prototype),L.prototype.constructor=L,L.prototype.name="TransformError";class H{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new a}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new L(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=r.Slice.empty){let o=T(this.doc,e,t,n);return o&&this.step(o),this}replaceWith(e,t,n){return this.replace(e,t,new r.Slice(r.Fragment.from(n),0,0))}delete(e,t){return this.replace(e,t,r.Slice.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,o){if(!o.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(A(i,s,o))return e.step(new v(t,n,o));let l=$(i,e.doc.resolve(n));0==l[l.length-1]&&l.pop();let a=-(i.depth+1);l.unshift(a);for(let e=i.depth,t=i.pos-1;e>0;e--,t--){let n=i.node(e).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;l.indexOf(e)>-1?a=e:i.before(e)==t&&l.splice(1,0,-e)}let c=l.indexOf(a),u=[],h=o.openStart;for(let e=o.content,t=0;;t++){let n=e.firstChild;if(u.push(n),t==o.openStart)break;e=n.content}for(let e=h-1;e>=0;e--){let t=u[e].type,n=B(t);if(n&&i.node(c).type!=t)h=e;else if(n||!t.isTextblock)break}for(let t=o.openStart;t>=0;t--){let a=(t+h+1)%(o.openStart+1),d=u[a];if(d)for(let t=0;t<l.length;t++){let u=l[(t+c)%l.length],h=!0;u<0&&(h=!1,u=-u);let f=i.node(u-1),p=i.index(u-1);if(f.canReplaceWith(p,p,d.type,d.marks))return e.replace(i.before(u),h?s.after(u):n,new r.Slice(F(o.content,0,o.openStart,a),a,o.openEnd))}}let d=e.steps.length;for(let r=l.length-1;r>=0&&(e.replace(t,n,o),!(e.steps.length>d));r--){let e=l[r];e<0||(t=i.before(e),n=s.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,o){if(!o.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let r=E(e.doc,t,o.type);null!=r&&(t=n=r)}e.replaceRange(t,n,new r.Slice(r.Fragment.from(o),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),o=e.doc.resolve(n),i=$(r,o);for(let t=0;t<i.length;t++){let n=i[t],s=t==i.length-1;if(s&&0==n||r.node(n).type.contentMatch.validEnd)return e.delete(r.start(n),o.end(n));if(n>0&&(s||r.node(n-1).canReplace(r.index(n-1),o.indexAfter(n-1))))return e.delete(r.before(n),o.after(n))}for(let i=1;i<=r.depth&&i<=o.depth;i++)if(t-r.start(i)==r.depth-i&&n>r.end(i)&&o.end(i)-n!=o.depth-i)return e.delete(r.before(i),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:o,$to:i,depth:s}=t,l=o.before(s+1),a=i.after(s+1),c=l,u=a,h=r.Fragment.empty,d=0;for(let e=s,t=!1;e>n;e--)t||o.index(e)>0?(t=!0,h=r.Fragment.from(o.node(e).copy(h)),d++):c--;let f=r.Fragment.empty,p=0;for(let e=s,t=!1;e>n;e--)t||i.after(e+1)<i.end(e)?(t=!0,f=r.Fragment.from(i.node(e).copy(f)),p++):u++;e.step(new y(c,u,l,a,new r.Slice(h.append(f),d,p),h.size-d,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){let o=new v(t-n,t+n,r.Slice.empty,!0);e.step(o)}(this,e,t),this}wrap(e,t){return function(e,t,n){let o=r.Fragment.empty;for(let e=n.length-1;e>=0;e--){if(o.size){let t=n[e].type.contentMatch.matchFragment(o);if(!t||!t.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}o=r.Fragment.from(n[e].type.create(n[e].attrs,o))}let i=t.start,s=t.end;e.step(new y(i,s,i,s,new r.Slice(o,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,o=null){return function(e,t,n,o,i){if(!o.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{if(t.isTextblock&&!t.hasMarkup(o,i)&&function(e,t,n){let r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(e.doc,e.mapping.slice(s).map(n),o)){e.clearIncompatible(e.mapping.slice(s).map(n,1),o);let l=e.mapping.slice(s),a=l.map(n,1),c=l.map(n+t.nodeSize,1);return e.step(new y(a,c,a+1,c-1,new r.Slice(r.Fragment.from(o.create(i,null,t.marks)),0,0),1,!0)),!1}})}(this,e,t,n,o),this}setNodeMarkup(e,t,n=null,o){return function(e,t,n,o,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let l=n.create(o,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,l);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new y(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new r.Slice(r.Fragment.from(l),0,0),1,!0))}(this,e,t,n,o),this}setNodeAttribute(e,t,n){return this.step(new V(e,t,n)),this}addNodeMark(e,t){return this.step(new m(e,t)),this}removeNodeMark(e,t){if(!(t instanceof r.Mark)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new g(e,t)),this}split(e,t=1,n){return function(e,t,n=1,o){let i=e.doc.resolve(t),s=r.Fragment.empty,l=r.Fragment.empty;for(let e=i.depth,t=i.depth-n,a=n-1;e>t;e--,a--){s=r.Fragment.from(i.node(e).copy(s));let t=o&&o[a];l=r.Fragment.from(t?t.type.create(t.attrs,l):i.node(e).copy(l))}e.step(new v(t,t,new r.Slice(s.append(l),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){return function(e,t,n,r){let o,i,s=[],l=[];e.doc.nodesBetween(t,n,(e,a,c)=>{if(!e.isInline)return;let u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(a,t),h=Math.min(a+e.nodeSize,n),d=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(d)||(o&&o.to==c&&o.mark.eq(u[e])?o.to=h:s.push(o=new p(c,h,u[e])));i&&i.to==c?i.to=h:l.push(i=new f(c,h,r))}}),s.forEach(t=>e.step(t)),l.forEach(t=>e.step(t))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,o){let i=[],s=0;e.doc.nodesBetween(t,n,(e,l)=>{if(!e.isInline)return;s++;let a=null;if(o instanceof r.MarkType){let t,n=e.marks;for(;t=o.isInSet(n);)(a||(a=[])).push(t),n=t.removeFromSet(n)}else o?o.isInSet(e.marks)&&(a=[o]):a=e.marks;if(a&&a.length){let r=Math.min(l+e.nodeSize,n);for(let e=0;e<a.length;e++){let n,o=a[e];for(let e=0;e<i.length;e++){let t=i[e];t.step==s-1&&o.eq(i[e].style)&&(n=t)}n?(n.to=r,n.step=s):i.push({style:o,from:Math.max(l,t),to:r,step:s})}}}),i.forEach(t=>e.step(new p(t.from,t.to,t.style)))}(this,e,t,n),this}clearIncompatible(e,t,n){return function(e,t,n,o=n.contentMatch){let i=e.doc.nodeAt(t),s=[],l=t+1;for(let t=0;t<i.childCount;t++){let a=i.child(t),c=l+a.nodeSize,u=o.matchType(a.type);if(u){o=u;for(let t=0;t<a.marks.length;t++)n.allowsMarkType(a.marks[t].type)||e.step(new p(l,c,a.marks[t]))}else s.push(new v(l,c,r.Slice.empty));l=c}if(!o.validEnd){let t=o.fillBefore(r.Fragment.empty,!0);e.replace(l,l,new r.Slice(t,0,0))}for(let t=s.length-1;t>=0;t--)e.step(s[t])}(this,e,t,n),this}}},function(e,t,n){"use strict";n.r(t),n.d(t,"Component",(function(){return _})),n.d(t,"Fragment",(function(){return w})),n.d(t,"createContext",(function(){return q})),n.d(t,"createElement",(function(){return v})),n.d(t,"createRef",(function(){return b})),n.d(t,"useCallback",(function(){return he})),n.d(t,"useContext",(function(){return de})),n.d(t,"useDebugValue",(function(){return fe})),n.d(t,"useEffect",(function(){return se})),n.d(t,"useErrorBoundary",(function(){return pe})),n.d(t,"useId",(function(){return me})),n.d(t,"useImperativeHandle",(function(){return ce})),n.d(t,"useLayoutEffect",(function(){return le})),n.d(t,"useMemo",(function(){return ue})),n.d(t,"useReducer",(function(){return ie})),n.d(t,"useRef",(function(){return ae})),n.d(t,"useState",(function(){return oe})),n.d(t,"Children",(function(){return De})),n.d(t,"PureComponent",(function(){return Ce})),n.d(t,"StrictMode",(function(){return mt})),n.d(t,"Suspense",(function(){return Ie})),n.d(t,"SuspenseList",(function(){return Be})),n.d(t,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",(function(){return st})),n.d(t,"cloneElement",(function(){return ut})),n.d(t,"createFactory",(function(){return at})),n.d(t,"createPortal",(function(){return Le})),n.d(t,"default",(function(){return _t})),n.d(t,"findDOMNode",(function(){return dt})),n.d(t,"flushSync",(function(){return pt})),n.d(t,"forwardRef",(function(){return Te})),n.d(t,"hydrate",(function(){return Qe})),n.d(t,"isValidElement",(function(){return ct})),n.d(t,"lazy",(function(){return je})),n.d(t,"memo",(function(){return Me})),n.d(t,"render",(function(){return Ge})),n.d(t,"startTransition",(function(){return gt})),n.d(t,"unmountComponentAtNode",(function(){return ht})),n.d(t,"unstable_batchedUpdates",(function(){return ft})),n.d(t,"useDeferredValue",(function(){return vt})),n.d(t,"useInsertionEffect",(function(){return bt})),n.d(t,"useSyncExternalStore",(function(){return wt})),n.d(t,"useTransition",(function(){return yt})),n.d(t,"version",(function(){return lt}));var r,o,i,s,l,a,c,u,h={},d=[],f=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,p=Array.isArray;function m(e,t){for(var n in t)e[n]=t[n];return e}function g(e){var t=e.parentNode;t&&t.removeChild(e)}function v(e,t,n){var o,i,s,l={};for(s in t)"key"==s?o=t[s]:"ref"==s?i=t[s]:l[s]=t[s];if(arguments.length>2&&(l.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===l[s]&&(l[s]=e.defaultProps[s]);return y(e,l,o,i,null)}function y(e,t,n,r,s){var l={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==s?++i:s};return null==s&&null!=o.vnode&&o.vnode(l),l}function b(){return{current:null}}function w(e){return e.children}function _(e,t){this.props=e,this.context=t}function S(e,t){if(null==t)return e.__?S(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?S(e):null}function k(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return k(e)}}function x(e){(!e.__d&&(e.__d=!0)&&s.push(e)&&!O.__r++||l!==o.debounceRendering)&&((l=o.debounceRendering)||a)(O)}function O(){var e,t,n,r,o,i,l,a,u;for(s.sort(c);e=s.shift();)e.__d&&(t=s.length,r=void 0,o=void 0,i=void 0,a=(l=(n=e).__v).__e,(u=n.__P)&&(r=[],o=[],(i=m({},l)).__v=l.__v+1,I(u,l,i,n.__n,void 0!==u.ownerSVGElement,null!=l.__h?[a]:null,r,null==a?S(l):a,l.__h,o),z(r,l,o),l.__e!=a&&k(l)),s.length>t&&s.sort(c));O.__r=0}function C(e,t,n,r,o,i,s,l,a,c,u){var f,m,g,v,b,_,S,k,x,O,C=0,E=r&&r.__k||d,A=E.length,D=A,P=t.length;for(n.__k=[],f=0;f<P;f++)null!=(v=n.__k[f]=null==(v=t[f])||"boolean"==typeof v||"function"==typeof v?null:"string"==typeof v||"number"==typeof v||"bigint"==typeof v?y(null,v,null,null,v):p(v)?y(w,{children:v},null,null,null):v.__b>0?y(v.type,v.props,v.key,v.ref?v.ref:null,v.__v):v)&&(v.__=n,v.__b=n.__b+1,-1===(k=T(v,E,S=f+C,D))?g=h:(g=E[k]||h,E[k]=void 0,D--),I(e,v,g,o,i,s,l,a,c,u),b=v.__e,(m=v.ref)&&g.ref!=m&&(g.ref&&B(g.ref,null,v),u.push(m,v.__c||b,v)),null!=b&&(null==_&&(_=b),O=!(x=g===h||null===g.__v)&&k===S,x?-1==k&&C--:k!==S&&(k===S+1?(C++,O=!0):k>S?D>P-S?(C+=k-S,O=!0):C--:C=k<S&&k==S-1?k-S:0),S=f+C,O=O||k==f&&!x,"function"!=typeof v.type||k===S&&g.__k!==v.__k?"function"==typeof v.type||O?void 0!==v.__d?(a=v.__d,v.__d=void 0):a=b.nextSibling:a=N(e,b,a):a=M(v,a,e),"function"==typeof n.type&&(n.__d=a)));for(n.__e=_,f=A;f--;)null!=E[f]&&("function"==typeof n.type&&null!=E[f].__e&&E[f].__e==n.__d&&(n.__d=E[f].__e.nextSibling),F(E[f],E[f]))}function M(e,t,n){for(var r,o=e.__k,i=0;o&&i<o.length;i++)(r=o[i])&&(r.__=e,t="function"==typeof r.type?M(r,t,n):N(n,r.__e,t));return t}function E(e,t){return t=t||[],null==e||"boolean"==typeof e||(p(e)?e.some((function(e){E(e,t)})):t.push(e)),t}function N(e,t,n){return null==n||n.parentNode!==e?e.insertBefore(t,null):t==n&&null!=t.parentNode||e.insertBefore(t,n),t.nextSibling}function T(e,t,n,r){var o=e.key,i=e.type,s=n-1,l=n+1,a=t[n];if(null===a||a&&o==a.key&&i===a.type)return n;if(r>(null!=a?1:0))for(;s>=0||l<t.length;){if(s>=0){if((a=t[s])&&o==a.key&&i===a.type)return s;s--}if(l<t.length){if((a=t[l])&&o==a.key&&i===a.type)return l;l++}}return-1}function A(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||f.test(t)?n:n+"px"}function D(e,t,n,r,o){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||A(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||A(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r||e.addEventListener(t,i?R:P,i):e.removeEventListener(t,i?R:P,i);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function P(e){return this.l[e.type+!1](o.event?o.event(e):e)}function R(e){return this.l[e.type+!0](o.event?o.event(e):e)}function I(e,t,n,r,i,s,l,a,c,u){var h,d,f,g,v,y,b,S,k,x,O,M,E,N,T,A=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(c=n.__h,a=t.__e=n.__e,t.__h=null,s=[a]),(h=o.__b)&&h(t);try{e:if("function"==typeof A){if(S=t.props,k=(h=A.contextType)&&r[h.__c],x=h?k?k.props.value:h.__:r,n.__c?b=(d=t.__c=n.__c).__=d.__E:("prototype"in A&&A.prototype.render?t.__c=d=new A(S,x):(t.__c=d=new _(S,x),d.constructor=A,d.render=$),k&&k.sub(d),d.props=S,d.state||(d.state={}),d.context=x,d.__n=r,f=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=A.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=m({},d.__s)),m(d.__s,A.getDerivedStateFromProps(S,d.__s))),g=d.props,v=d.state,d.__v=t,f)null==A.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==A.getDerivedStateFromProps&&S!==g&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(S,x),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(S,d.__s,x)||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=S,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),O=0;O<d._sb.length;O++)d.__h.push(d._sb[O]);d._sb=[],d.__h.length&&l.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(S,d.__s,x),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(g,v,y)}))}if(d.context=x,d.props=S,d.__P=e,d.__e=!1,M=o.__r,E=0,"prototype"in A&&A.prototype.render){for(d.state=d.__s,d.__d=!1,M&&M(t),h=d.render(d.props,d.state,d.context),N=0;N<d._sb.length;N++)d.__h.push(d._sb[N]);d._sb=[]}else do{d.__d=!1,M&&M(t),h=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++E<25);d.state=d.__s,null!=d.getChildContext&&(r=m(m({},r),d.getChildContext())),f||null==d.getSnapshotBeforeUpdate||(y=d.getSnapshotBeforeUpdate(g,v)),C(e,p(T=null!=h&&h.type===w&&null==h.key?h.props.children:h)?T:[T],t,n,r,i,s,l,a,c,u),d.base=t.__e,t.__h=null,d.__h.length&&l.push(d),b&&(d.__E=d.__=null)}else null==s&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=j(n.__e,t,n,r,i,s,l,c,u);(h=o.diffed)&&h(t)}catch(e){t.__v=null,(c||null!=s)&&(t.__e=a,t.__h=!!c,s[s.indexOf(a)]=null),o.__e(e,t,n)}}function z(e,t,n){for(var r=0;r<n.length;r++)B(n[r],n[++r],n[++r]);o.__c&&o.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){o.__e(e,t.__v)}}))}function j(e,t,n,o,i,s,l,a,c){var u,d,f,m=n.props,v=t.props,y=t.type,b=0;if("svg"===y&&(i=!0),null!=s)for(;b<s.length;b++)if((u=s[b])&&"setAttribute"in u==!!y&&(y?u.localName===y:3===u.nodeType)){e=u,s[b]=null;break}if(null==e){if(null===y)return document.createTextNode(v);e=i?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,v.is&&v),s=null,a=!1}if(null===y)m===v||a&&e.data===v||(e.data=v);else{if(s=s&&r.call(e.childNodes),d=(m=n.props||h).dangerouslySetInnerHTML,f=v.dangerouslySetInnerHTML,!a){if(null!=s)for(m={},b=0;b<e.attributes.length;b++)m[e.attributes[b].name]=e.attributes[b].value;(f||d)&&(f&&(d&&f.__html==d.__html||f.__html===e.innerHTML)||(e.innerHTML=f&&f.__html||""))}if(function(e,t,n,r,o){var i;for(i in n)"children"===i||"key"===i||i in t||D(e,i,null,n[i],r);for(i in t)o&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||D(e,i,t[i],n[i],r)}(e,v,m,i,a),f)t.__k=[];else if(C(e,p(b=t.props.children)?b:[b],t,n,o,i&&"foreignObject"!==y,s,l,s?s[0]:n.__k&&S(n,0),a,c),null!=s)for(b=s.length;b--;)null!=s[b]&&g(s[b]);a||("value"in v&&void 0!==(b=v.value)&&(b!==e.value||"progress"===y&&!b||"option"===y&&b!==m.value)&&D(e,"value",b,m.value,!1),"checked"in v&&void 0!==(b=v.checked)&&b!==e.checked&&D(e,"checked",b,m.checked,!1))}return e}function B(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){o.__e(e,n)}}function F(e,t,n){var r,i;if(o.unmount&&o.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||B(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){o.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&F(r[i],t,n||"function"!=typeof e.type);n||null==e.__e||g(e.__e),e.__=e.__e=e.__d=void 0}function $(e,t,n){return this.constructor(e,n)}function V(e,t,n){var i,s,l,a;o.__&&o.__(e,t),s=(i="function"==typeof n)?null:n&&n.__k||t.__k,l=[],a=[],I(t,e=(!i&&n||t).__k=v(w,null,[e]),s||h,h,void 0!==t.ownerSVGElement,!i&&n?[n]:s?null:t.firstChild?r.call(t.childNodes):null,l,!i&&n?n:s?s.__e:t.firstChild,i,a),z(l,e,a)}function L(e,t){V(e,t,L)}function H(e,t,n){var o,i,s,l,a=m({},e.props);for(s in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)"key"==s?o=t[s]:"ref"==s?i=t[s]:a[s]=void 0===t[s]&&void 0!==l?l[s]:t[s];return arguments.length>2&&(a.children=arguments.length>3?r.call(arguments,2):n),y(e.type,a,o||e.key,i||e.ref,null)}function q(e,t){var n={__c:t="__cC"+u++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some((function(e){e.__e=!0,x(e)}))},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}r=d.slice,o={__e:function(e,t,n,r){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(t){e=t}throw e}},i=0,_.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=m({},this.state),"function"==typeof e&&(e=e(m({},n),this.props)),e&&m(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),x(this))},_.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),x(this))},_.prototype.render=w,s=[],a="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,c=function(e,t){return e.__v.__b-t.__v.__b},O.__r=0,u=0;var W,J,K,U,G=0,Q=[],Y=[],Z=o.__b,X=o.__r,ee=o.diffed,te=o.__c,ne=o.unmount;function re(e,t){o.__h&&o.__h(J,e,G||t),G=0;var n=J.__H||(J.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Y}),n.__[e]}function oe(e){return G=1,ie(Se,e)}function ie(e,t,n){var r=re(W++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Se(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=J,!J.u)){var o=function(e,t,n){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter((function(e){return e.__c}));if(o.every((function(e){return!e.__N})))return!i||i.call(this,e,t,n);var s=!1;return o.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}})),!(!s&&r.__c.props===e)&&(!i||i.call(this,e,t,n))};J.u=!0;var i=J.shouldComponentUpdate,s=J.componentWillUpdate;J.componentWillUpdate=function(e,t,n){if(this.__e){var r=i;i=void 0,o(e,t,n),i=r}s&&s.call(this,e,t,n)},J.shouldComponentUpdate=o}return r.__N||r.__}function se(e,t){var n=re(W++,3);!o.__s&&_e(n.__H,t)&&(n.__=e,n.i=t,J.__H.__h.push(n))}function le(e,t){var n=re(W++,4);!o.__s&&_e(n.__H,t)&&(n.__=e,n.i=t,J.__h.push(n))}function ae(e){return G=5,ue((function(){return{current:e}}),[])}function ce(e,t,n){G=6,le((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))}function ue(e,t){var n=re(W++,7);return _e(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function he(e,t){return G=8,ue((function(){return e}),t)}function de(e){var t=J.context[e.__c],n=re(W++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(J)),t.props.value):e.__}function fe(e,t){o.useDebugValue&&o.useDebugValue(t?t(e):e)}function pe(e){var t=re(W++,10),n=oe();return t.__=e,J.componentDidCatch||(J.componentDidCatch=function(e,r){t.__&&t.__(e,r),n[1](e)}),[n[0],function(){n[1](void 0)}]}function me(){var e=re(W++,11);if(!e.__){for(var t=J.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function ge(){for(var e;e=Q.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(be),e.__H.__h.forEach(we),e.__H.__h=[]}catch(t){e.__H.__h=[],o.__e(t,e.__v)}}o.__b=function(e){J=null,Z&&Z(e)},o.__r=function(e){X&&X(e),W=0;var t=(J=e.__c).__H;t&&(K===J?(t.__h=[],J.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=Y,e.__N=e.i=void 0}))):(t.__h.forEach(be),t.__h.forEach(we),t.__h=[],W=0)),K=J},o.diffed=function(e){ee&&ee(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==Q.push(t)&&U===o.requestAnimationFrame||((U=o.requestAnimationFrame)||ye)(ge)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==Y&&(e.__=e.__V),e.i=void 0,e.__V=Y}))),K=J=null},o.__c=function(e,t){t.some((function(e){try{e.__h.forEach(be),e.__h=e.__h.filter((function(e){return!e.__||we(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],o.__e(n,e.__v)}})),te&&te(e,t)},o.unmount=function(e){ne&&ne(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{be(e)}catch(e){t=e}})),n.__H=void 0,t&&o.__e(t,n.__v))};var ve="function"==typeof requestAnimationFrame;function ye(e){var t,n=function(){clearTimeout(r),ve&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);ve&&(t=requestAnimationFrame(n))}function be(e){var t=J,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),J=t}function we(e){var t=J;e.__c=e.__(),J=t}function _e(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function Se(e,t){return"function"==typeof t?t(e):t}function ke(e,t){for(var n in t)e[n]=t[n];return e}function xe(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function Oe(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}function Ce(e){this.props=e}function Me(e,t){function n(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:xe(this.props,e)}function r(t){return this.shouldComponentUpdate=n,v(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(Ce.prototype=new _).isPureReactComponent=!0,Ce.prototype.shouldComponentUpdate=function(e,t){return xe(this.props,e)||xe(this.state,t)};var Ee=o.__b;o.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Ee&&Ee(e)};var Ne="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Te(e){function t(t){var n=ke({},t);return delete n.ref,e(n,t.ref||null)}return t.$$typeof=Ne,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Ae=function(e,t){return null==e?null:E(E(e).map(t))},De={map:Ae,forEach:Ae,count:function(e){return e?E(e).length:0},only:function(e){var t=E(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:E},Pe=o.__e;o.__e=function(e,t,n,r){if(e.then)for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),o.__c(e,t);Pe(e,t,n,r)};var Re=o.unmount;function Ie(){this.__u=0,this.t=null,this.__b=null}function ze(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function je(e){var t,n,r;function o(o){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){r=e})),r)throw r;if(!n)throw t;return v(n,o)}return o.displayName="Lazy",o.__f=!0,o}function Be(){this.u=null,this.o=null}o.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),Re&&Re(e)},(Ie.prototype=new _).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var o=ze(r.__v),i=!1,s=function(){i||(i=!0,n.__R=null,o?o(l):l())};n.__R=s;var l=function(){if(!--r.__u){if(r.state.__a){var e=r.state.__a;r.__v.__k[0]=function e(t,n,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)})),t.__c&&t.__c.__P===n&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.t.pop();)t.forceUpdate()}},a=!0===t.__h;r.__u++||a||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(s,s)},Ie.prototype.componentWillUnmount=function(){this.t=[]},Ie.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,n,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),t.__c.__H=null),null!=(t=ke({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=n),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return e(t,n,r)}))),t}(this.__b,n,r.__O=r.__P)}this.__b=null}var o=t.__a&&v(w,null,e.fallback);return o&&(o.__h=null),[v(w,null,t.__a?null:e.children),o]};var Fe=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function $e(e){return this.getChildContext=function(){return e.context},e.children}function Ve(e){var t=this,n=e.i;t.componentWillUnmount=function(){V(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),e.__v?(t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),V(v($e,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function Le(e,t){var n=v(Ve,{__v:e,i:t});return n.containerInfo=t,n}(Be.prototype=new _).__a=function(e){var t=this,n=ze(t.__v),r=t.o.get(e);return r[0]++,function(o){var i=function(){t.props.revealOrder?(r.push(o),Fe(t,e,r)):o()};n?n(i):i()}},Be.prototype.render=function(e){this.u=null,this.o=new Map;var t=E(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Be.prototype.componentDidUpdate=Be.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){Fe(e,n,t)}))};var He="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,qe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,We=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Je=/[A-Z0-9]/g,Ke="undefined"!=typeof document,Ue=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(e)};function Ge(e,t,n){return null==t.__k&&(t.textContent=""),V(e,t),"function"==typeof n&&n(),e?e.__c:null}function Qe(e,t,n){return L(e,t),"function"==typeof n&&n(),e?e.__c:null}_.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(_.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Ye=o.event;function Ze(){}function Xe(){return this.cancelBubble}function et(){return this.defaultPrevented}o.event=function(e){return Ye&&(e=Ye(e)),e.persist=Ze,e.isPropagationStopped=Xe,e.isDefaultPrevented=et,e.nativeEvent=e};var tt,nt={enumerable:!1,configurable:!0,get:function(){return this.class}},rt=o.vnode;o.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,n=e.type,r={};for(var o in t){var i=t[o];if(!("value"===o&&"defaultValue"in t&&null==i||Ke&&"children"===o&&"noscript"===n||"class"===o||"className"===o)){var s=o.toLowerCase();"defaultValue"===o&&"value"in t&&null==t.value?o="value":"download"===o&&!0===i?i="":"ondoubleclick"===s?o="ondblclick":"onchange"!==s||"input"!==n&&"textarea"!==n||Ue(t.type)?"onfocus"===s?o="onfocusin":"onblur"===s?o="onfocusout":We.test(o)?o=s:-1===n.indexOf("-")&&qe.test(o)?o=o.replace(Je,"-$&").toLowerCase():null===i&&(i=void 0):s=o="oninput","oninput"===s&&r[o=s]&&(o="oninputCapture"),r[o]=i}}"select"==n&&r.multiple&&Array.isArray(r.value)&&(r.value=E(t.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==n&&null!=r.defaultValue&&(r.value=E(t.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,"className",nt)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),e.props=r}(e),e.$$typeof=He,rt&&rt(e)};var ot=o.__r;o.__r=function(e){ot&&ot(e),tt=e.__c};var it=o.diffed;o.diffed=function(e){it&&it(e);var t=e.props,n=e.__e;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value),tt=null};var st={ReactCurrentDispatcher:{current:{readContext:function(e){return tt.__n[e.__c].props.value}}}},lt="17.0.2";function at(e){return v.bind(null,e)}function ct(e){return!!e&&e.$$typeof===He}function ut(e){return ct(e)?H.apply(null,arguments):e}function ht(e){return!!e.__k&&(V(null,e),!0)}function dt(e){return e&&(e.base||1===e.nodeType&&e)||null}var ft=function(e,t){return e(t)},pt=function(e,t){return e(t)},mt=w;function gt(e){e()}function vt(e){return e}function yt(){return[!1,gt]}var bt=le;function wt(e,t){var n=t(),r=oe({h:{__:n,v:t}}),o=r[0].h,i=r[1];return le((function(){o.__=n,o.v=t,Oe(o.__,t())||i({h:o})}),[e,n,t]),se((function(){return Oe(o.__,o.v())||i({h:o}),e((function(){Oe(o.__,o.v())||i({h:o})}))}),[e]),n}var _t={useState:oe,useId:me,useReducer:ie,useEffect:se,useLayoutEffect:le,useInsertionEffect:le,useTransition:yt,useDeferredValue:vt,useSyncExternalStore:wt,startTransition:gt,useRef:ae,useImperativeHandle:ce,useMemo:ue,useCallback:he,useContext:de,useDebugValue:fe,version:"17.0.2",Children:De,render:Ge,hydrate:Qe,unmountComponentAtNode:ht,createPortal:Le,createElement:v,createContext:q,createFactory:at,cloneElement:ut,createRef:b,Fragment:w,isValidElement:ct,findDOMNode:dt,Component:_,PureComponent:Ce,memo:Me,forwardRef:Te,flushSync:pt,unstable_batchedUpdates:ft,StrictMode:w,Suspense:Ie,SuspenseList:Be,lazy:je,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:st}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqId=t.getBrowser=t.getHtmlFromNode=t.stripPtag=t.isDescendant=t.calculateStyle=t.createTable=t.liftListItem=t.findSelectedNodeWithType=t.getParentNodePosFromState=t.getParentNodeFromState=t.getParentNodeIndexFromState=t.getParentNodeWithPosFromState=t.getRootNodeCountFromState=t.getRootNodeWithPosByIndex=t.findNodePosition=t.canInsert=t.blockActive=t.getMarkInSelection=t.markActive=t.getViewport=t.isInput=t.getOffset=t.getScrollLeft=t.getScrollTop=void 0;var r=n(8),o=n(0),i=n(2);t.getScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},t.getScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},t.getOffset=function(e){var n=e.getBoundingClientRect();return{top:n.top+t.getScrollTop(),left:n.left+t.getScrollLeft()}},t.isInput=function(e){return e.isContentEditable},t.getViewport=function(){if(window.visualViewport&&/Android/.test(navigator.userAgent))return{left:window.visualViewport.pageLeft,top:window.visualViewport.pageTop,width:window.visualViewport.width,height:window.visualViewport.height};var e={left:window.pageXOffset,top:window.pageYOffset,width:window.innerWidth||window.documentElement.clientWidth,height:window.innerHeight||window.documentElement.clientHeight};return/iPod|iPhone|iPad/.test(navigator.platform)&&t.isInput(document.activeElement)?{left:e.left,top:e.top,width:e.width,height:e.height*(e.height>e.width?.66:.45),keyboardHeight:e.height*(e.height>e.width?.34:.55)}:e},t.markActive=function(e){return function(t){var n=t.selection,r=n.from,o=n.$from,i=n.to;return n.empty?e.isInSet(t.storedMarks||o.marks()):t.doc.rangeHasMark(r,i,e)}},t.getMarkInSelection=function(e,t){var n=t.selection.$anchor.nodeAfter;return n?n.marks.find((function(t){if(t.type.name===e)return!0})):null},t.blockActive=function(e){return function(t){var n=t.selection,o=t.selection,i=o.$from,s=o.to,l=n.$anchor,a=t.doc.resolve(l.pos).path[1],c=0,u=r.findChildren(t.doc,(function(){return a===c||(c++,!1)}),!1)[0];return!!u&&(s<=i.end()&&u.node.type.name===e.name)}},t.canInsert=function(e){return function(t){for(var n=t.selection.$from,r=n.depth;r>=0;r--){var o=n.index(r);if(n.node(r).canReplaceWith(o,o,e))return!0}return!1}},t.findNodePosition=function(e,t){var n=-1;return e.descendants((function(e,r){e.eq(t)&&(n=r)})),n},t.getRootNodeWithPosByIndex=function(e,t){var n=0;return r.findChildren(e.doc,(function(){return n===t?(n++,!0):(n++,!1)}),!1)[0]},t.getRootNodeCountFromState=function(e){return e.doc.content.childCount},t.getParentNodeWithPosFromState=function(e){var t=e.selection.$anchor,n=e.doc.resolve(t.pos).path[1],o=0;return r.findChildren(e.doc,(function(){return n===o?(o++,!0):(o++,!1)}),!1)[0]},t.getParentNodeIndexFromState=function(e){var t=e.selection.$anchor;return e.doc.resolve(t.pos).path[1]},t.getParentNodeFromState=function(e){return t.getParentNodeWithPosFromState(e).node},t.getParentNodePosFromState=function(e){var n=t.getParentNodeFromState(e);return t.findNodePosition(e.doc,n)+n.nodeSize},t.findSelectedNodeWithType=function(e,t){var n=t.selection,r=n.from,o=n.to,i=null;return t.doc.nodesBetween(r,o,(function(t){t.type===e&&(i=t)})),i},t.liftListItem=function(e){return function(t,n){var r=t.selection,s=r.$from,l=r.$to,a=s.blockRange(l,(function(t){return t.childCount&&t.firstChild.type===e}));return!!a&&(!n||(s.node(a.depth-1).type===e?function(e,t,n,r){var s=e.tr,l=r.end,a=r.$to.end(r.depth);return l<a&&(s.step(new i.ReplaceAroundStep(l-1,a,l,a,new o.Slice(o.Fragment.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new o.NodeRange(s.doc.resolve(r.$from.pos),s.doc.resolve(a),r.depth)),t(s.lift(r,i.liftTarget(r)-1).scrollIntoView()),!0}(t,n,e,a):function(e,t,n){for(var r=e.tr,s=n.parent,l=n.end,a=n.endIndex-1,c=n.startIndex;a>c;a--)l-=s.child(a).nodeSize,r.delete(l-1,l+1);var u=r.doc.resolve(n.start),h=u.nodeAfter,d=0===n.startIndex,f=n.endIndex===s.childCount,p=u.node(-1),m=u.index(-1);if(!p.canReplace(m+(d?0:1),m+1,h.content.append(f?o.Fragment.empty:o.Fragment.from(s))))return!1;var g=u.pos,v=g+h.nodeSize;return r.step(new i.ReplaceAroundStep(g-(d?1:0),v+(f?1:0),g+1,v-1,new o.Slice((d?o.Fragment.empty:o.Fragment.from(s.copy(o.Fragment.empty))).append(f?o.Fragment.empty:o.Fragment.from(s.copy(o.Fragment.empty))),d?0:1,f?0:1),d?0:1)),t(r.scrollIntoView()),!0}(t,n,a)))}};var s=function(e,t){return void 0===t&&(t=null),t?e.createChecked(null,t):e.createAndFill()};t.createTable=function(e,t,n,r,o,i){void 0===n&&(n=3),void 0===r&&(r=3),void 0===o&&(o=!0),void 0===i&&(i=null);for(var l=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;var t={};return Object.keys(e.nodes).forEach((function(n){var r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)})),e.cached.tableNodeTypes=t,t}(e),a=l.cell,c=l.header_cell,u=l.row,h=l.table,d=[],f=[],p=0;p<r;p++)d.push(s(a,i)),o&&f.push(s(c,i));var m=[];for(p=0;p<n;p++)m.push(u.createChecked(null,o&&0===p?f:d));return h.createChecked(t,m)},t.calculateStyle=function(e,n){void 0===n&&(n={top:0,left:0});var r=e.state.selection,o=e.domAtPos(r.$anchor.pos),i=o.node instanceof Element?o.node:o.node.parentElement,s=t.getOffset(i).top,l=e.coordsAtPos(r.$anchor.pos),a=t.getOffset(e.dom).top;return window.innerWidth<=767?{left:n.left,top:s-a+n.top}:{left:l.left+n.left,top:s-a+n.top}},t.isDescendant=function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1};t.stripPtag=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.querySelectorAll("li > p");return[].forEach.call(n,(function(e){!function(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}(e)})),t.innerHTML},t.getHtmlFromNode=function(e,n){var r=o.DOMSerializer.fromSchema(n).serializeFragment(e.content),i=document.createElement("div");return i.appendChild(r),t.stripPtag(i.innerHTML)},t.getBrowser=function(){var e=window.navigator.userAgent.toLowerCase(),t=window.navigator.appVersion.toLowerCase(),n="unknown";return-1!==e.indexOf("msie")?n=-1!==t.indexOf("msie 6.")?"ie6":-1!==t.indexOf("msie 7.")?"ie7":-1!==t.indexOf("msie 8.")?"ie8":-1!==t.indexOf("msie 9.")?"ie9":-1!==t.indexOf("msie 10.")?"ie10":"ie":-1!==e.indexOf("trident/7")?n="ie11":-1!==e.indexOf("edge")?n="edge":-1!==e.indexOf("chrome")?n="chrome":-1!==e.indexOf("safari")?n="safari":-1!==e.indexOf("opera")?n="opera":-1!==e.indexOf("firefox")&&(n="firefox"),n},t.getUniqId=function(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()}},function(e,t,n){"use strict";n.r(t),n.d(t,"autoJoin",(function(){return F})),n.d(t,"baseKeymap",(function(){return W})),n.d(t,"chainCommands",(function(){return $})),n.d(t,"createParagraphNear",(function(){return O})),n.d(t,"deleteSelection",(function(){return s})),n.d(t,"exitCode",(function(){return x})),n.d(t,"joinBackward",(function(){return a})),n.d(t,"joinDown",(function(){return w})),n.d(t,"joinForward",(function(){return g})),n.d(t,"joinTextblockBackward",(function(){return c})),n.d(t,"joinTextblockForward",(function(){return u})),n.d(t,"joinUp",(function(){return b})),n.d(t,"lift",(function(){return _})),n.d(t,"liftEmptyBlock",(function(){return C})),n.d(t,"macBaseKeymap",(function(){return q})),n.d(t,"newlineInCode",(function(){return S})),n.d(t,"pcBaseKeymap",(function(){return H})),n.d(t,"selectAll",(function(){return A})),n.d(t,"selectNodeBackward",(function(){return f})),n.d(t,"selectNodeForward",(function(){return v})),n.d(t,"selectParentNode",(function(){return T})),n.d(t,"selectTextblockEnd",(function(){return I})),n.d(t,"selectTextblockStart",(function(){return R})),n.d(t,"setBlockType",(function(){return j})),n.d(t,"splitBlock",(function(){return E})),n.d(t,"splitBlockAs",(function(){return M})),n.d(t,"splitBlockKeepMarks",(function(){return N})),n.d(t,"toggleMark",(function(){return B})),n.d(t,"wrapIn",(function(){return z}));var r=n(2),o=n(0),i=n(1);const s=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function l(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const a=(e,t,n)=>{let s=l(e,n);if(!s)return!1;let a=p(s);if(!a){let n=s.blockRange(),o=n&&Object(r.liftTarget)(n);return null!=o&&(t&&t(e.tr.lift(n,o).scrollIntoView()),!0)}let c=a.nodeBefore;if(!c.type.spec.isolating&&D(e,a,t))return!0;if(0==s.parent.content.size&&(d(c,"end")||i.NodeSelection.isSelectable(c))){let n=Object(r.replaceStep)(e.doc,s.before(),s.after(),o.Slice.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(d(c,"end")?i.Selection.findFrom(r.doc.resolve(r.mapping.map(a.pos,-1)),-1):i.NodeSelection.create(r.doc,a.pos-c.nodeSize)),t(r.scrollIntoView())}return!0}}return!(!c.isAtom||a.depth!=s.depth-1)&&(t&&t(e.tr.delete(a.pos-c.nodeSize,a.pos).scrollIntoView()),!0)},c=(e,t,n)=>{let r=l(e,n);if(!r)return!1;let o=p(r);return!!o&&h(e,o,t)},u=(e,t,n)=>{let r=m(e,n);if(!r)return!1;let o=y(r);return!!o&&h(e,o,t)};function h(e,t,n){let s=t.nodeBefore,l=t.pos-1;for(;!s.isTextblock;l--){if(s.type.spec.isolating)return!1;let e=s.lastChild;if(!e)return!1;s=e}let a=t.nodeAfter,c=t.pos+1;for(;!a.isTextblock;c++){if(a.type.spec.isolating)return!1;let e=a.firstChild;if(!e)return!1;a=e}let u=Object(r.replaceStep)(e.doc,l,c,o.Slice.empty);if(!u||u.from!=l||u instanceof r.ReplaceStep&&u.slice.size>=c-l)return!1;if(n){let t=e.tr.step(u);t.setSelection(i.TextSelection.create(t.doc,l)),n(t.scrollIntoView())}return!0}function d(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const f=(e,t,n)=>{let{$head:r,empty:o}=e.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=p(r)}let l=s&&s.nodeBefore;return!(!l||!i.NodeSelection.isSelectable(l))&&(t&&t(e.tr.setSelection(i.NodeSelection.create(e.doc,s.pos-l.nodeSize)).scrollIntoView()),!0)};function p(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function m(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const g=(e,t,n)=>{let s=m(e,n);if(!s)return!1;let l=y(s);if(!l)return!1;let a=l.nodeAfter;if(D(e,l,t))return!0;if(0==s.parent.content.size&&(d(a,"start")||i.NodeSelection.isSelectable(a))){let n=Object(r.replaceStep)(e.doc,s.before(),s.after(),o.Slice.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(d(a,"start")?i.Selection.findFrom(r.doc.resolve(r.mapping.map(l.pos)),1):i.NodeSelection.create(r.doc,r.mapping.map(l.pos))),t(r.scrollIntoView())}return!0}}return!(!a.isAtom||l.depth!=s.depth-1)&&(t&&t(e.tr.delete(l.pos,l.pos+a.nodeSize).scrollIntoView()),!0)},v=(e,t,n)=>{let{$head:r,empty:o}=e.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=y(r)}let l=s&&s.nodeAfter;return!(!l||!i.NodeSelection.isSelectable(l))&&(t&&t(e.tr.setSelection(i.NodeSelection.create(e.doc,s.pos)).scrollIntoView()),!0)};function y(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const b=(e,t)=>{let n,o=e.selection,s=o instanceof i.NodeSelection;if(s){if(o.node.isTextblock||!Object(r.canJoin)(e.doc,o.from))return!1;n=o.from}else if(n=Object(r.joinPoint)(e.doc,o.from,-1),null==n)return!1;if(t){let r=e.tr.join(n);s&&r.setSelection(i.NodeSelection.create(r.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(r.scrollIntoView())}return!0},w=(e,t)=>{let n,o=e.selection;if(o instanceof i.NodeSelection){if(o.node.isTextblock||!Object(r.canJoin)(e.doc,o.to))return!1;n=o.to}else if(n=Object(r.joinPoint)(e.doc,o.to,1),null==n)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0},_=(e,t)=>{let{$from:n,$to:o}=e.selection,i=n.blockRange(o),s=i&&Object(r.liftTarget)(i);return null!=s&&(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},S=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function k(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const x=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),l=k(o.contentMatchAt(s));if(!l||!o.canReplaceWith(s,s,l))return!1;if(t){let r=n.after(),o=e.tr.replaceWith(r,r,l.createAndFill());o.setSelection(i.Selection.near(o.doc.resolve(r),1)),t(o.scrollIntoView())}return!0},O=(e,t)=>{let n=e.selection,{$from:r,$to:o}=n;if(n instanceof i.AllSelection||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=k(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let n=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,l=e.tr.insert(n,s.createAndFill());l.setSelection(i.TextSelection.create(l.doc,n+1)),t(l.scrollIntoView())}return!0},C=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Object(r.canSplit)(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let o=n.blockRange(),i=o&&Object(r.liftTarget)(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)};function M(e){return(t,n)=>{let{$from:o,$to:s}=t.selection;if(t.selection instanceof i.NodeSelection&&t.selection.node.isBlock)return!(!o.parentOffset||!Object(r.canSplit)(t.doc,o.pos))&&(n&&n(t.tr.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;if(n){let l=s.parentOffset==s.parent.content.size,a=t.tr;(t.selection instanceof i.TextSelection||t.selection instanceof i.AllSelection)&&a.deleteSelection();let c=0==o.depth?null:k(o.node(-1).contentMatchAt(o.indexAfter(-1))),u=e&&e(s.parent,l),h=u?[u]:l&&c?[{type:c}]:void 0,d=Object(r.canSplit)(a.doc,a.mapping.map(o.pos),1,h);if(h||d||!Object(r.canSplit)(a.doc,a.mapping.map(o.pos),1,c?[{type:c}]:void 0)||(c&&(h=[{type:c}]),d=!0),d&&(a.split(a.mapping.map(o.pos),1,h),!l&&!o.parentOffset&&o.parent.type!=c)){let e=a.mapping.map(o.before()),t=a.doc.resolve(e);c&&o.node(-1).canReplaceWith(t.index(),t.index()+1,c)&&a.setNodeMarkup(a.mapping.map(o.before()),c)}n(a.scrollIntoView())}return!0}}const E=M(),N=(e,t)=>E(e,t&&(n=>{let r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();r&&n.ensureMarks(r),t(n)})),T=(e,t)=>{let n,{$from:r,to:o}=e.selection,s=r.sharedDepth(o);return 0!=s&&(n=r.before(s),t&&t(e.tr.setSelection(i.NodeSelection.create(e.doc,n))),!0)},A=(e,t)=>(t&&t(e.tr.setSelection(new i.AllSelection(e.doc))),!0);function D(e,t,n){let s,l,a=t.nodeBefore,c=t.nodeAfter;if(a.type.spec.isolating||c.type.spec.isolating)return!1;if(function(e,t,n){let o=t.nodeBefore,i=t.nodeAfter,s=t.index();return!!(o&&i&&o.type.compatibleContent(i.type))&&(!o.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-o.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(s,s+1)||!i.isTextblock&&!Object(r.canJoin)(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,o.type,o.contentMatchAt(o.childCount)).join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;let u=t.parent.canReplace(t.index(),t.index()+1);if(u&&(s=(l=a.contentMatchAt(a.childCount)).findWrapping(c.type))&&l.matchType(s[0]||c.type).validEnd){if(n){let i=t.pos+c.nodeSize,l=o.Fragment.empty;for(let e=s.length-1;e>=0;e--)l=o.Fragment.from(s[e].create(null,l));l=o.Fragment.from(a.copy(l));let u=e.tr.step(new r.ReplaceAroundStep(t.pos-1,i,t.pos,i,new o.Slice(l,1,0),s.length,!0)),h=i+2*s.length;Object(r.canJoin)(u.doc,h)&&u.join(h),n(u.scrollIntoView())}return!0}let h=i.Selection.findFrom(t,1),f=h&&h.$from.blockRange(h.$to),p=f&&Object(r.liftTarget)(f);if(null!=p&&p>=t.depth)return n&&n(e.tr.lift(f,p).scrollIntoView()),!0;if(u&&d(c,"start",!0)&&d(a,"end")){let i=a,s=[];for(;s.push(i),!i.isTextblock;)i=i.lastChild;let l=c,u=1;for(;!l.isTextblock;l=l.firstChild)u++;if(i.canReplace(i.childCount,i.childCount,l.content)){if(n){let i=o.Fragment.empty;for(let e=s.length-1;e>=0;e--)i=o.Fragment.from(s[e].copy(i));n(e.tr.step(new r.ReplaceAroundStep(t.pos-s.length,t.pos+c.nodeSize,t.pos+u,t.pos+c.nodeSize-u,new o.Slice(i,s.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function P(e){return function(t,n){let r=t.selection,o=e<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return!!o.node(s).isTextblock&&(n&&n(t.tr.setSelection(i.TextSelection.create(t.doc,e<0?o.start(s):o.end(s)))),!0)}}const R=P(-1),I=P(1);function z(e,t=null){return function(n,o){let{$from:i,$to:s}=n.selection,l=i.blockRange(s),a=l&&Object(r.findWrapping)(l,e,t);return!!a&&(o&&o(n.tr.wrap(l,a).scrollIntoView()),!0)}}function j(e,t=null){return function(n,r){let o=!1;for(let r=0;r<n.selection.ranges.length&&!o;r++){let{$from:{pos:i},$to:{pos:s}}=n.selection.ranges[r];n.doc.nodesBetween(i,s,(r,i)=>{if(o)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)o=!0;else{let t=n.doc.resolve(i),r=t.index();o=t.parent.canReplaceWith(r,r+1,e)}})}if(!o)return!1;if(r){let o=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:i},$to:{pos:s}}=n.selection.ranges[r];o.setBlockType(i,s,e,t)}r(o.scrollIntoView())}return!0}}function B(e,t=null){return function(n,r){let{empty:o,$cursor:i,ranges:s}=n.selection;if(o&&!i||!function(e,t,n){for(let r=0;r<t.length;r++){let{$from:o,$to:i}=t[r],s=0==o.depth&&(e.inlineContent&&e.type.allowsMarkType(n));if(e.nodesBetween(o.pos,i.pos,e=>{if(s)return!1;s=e.inlineContent&&e.type.allowsMarkType(n)}),s)return!0}return!1}(n.doc,s,e))return!1;if(r)if(i)e.isInSet(n.storedMarks||i.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{let o=!1,i=n.tr;for(let t=0;!o&&t<s.length;t++){let{$from:r,$to:i}=s[t];o=n.doc.rangeHasMark(r.pos,i.pos,e)}for(let n=0;n<s.length;n++){let{$from:r,$to:l}=s[n];if(o)i.removeMark(r.pos,l.pos,e);else{let n=r.pos,o=l.pos,s=r.nodeAfter,a=l.nodeBefore,c=s&&s.isText?/^\s*/.exec(s.text)[0].length:0,u=a&&a.isText?/\s*$/.exec(a.text)[0].length:0;n+c<o&&(n+=c,o-=u),i.addMark(n,o,e.create(t))}}r(i.scrollIntoView())}return!0}}function F(e,t){let n=Array.isArray(t)?e=>t.indexOf(e.type.name)>-1:t;return(t,o,i)=>e(t,o&&function(e,t){return n=>{if(!n.isGeneric)return e(n);let o=[];for(let e=0;e<n.mapping.maps.length;e++){let t=n.mapping.maps[e];for(let e=0;e<o.length;e++)o[e]=t.map(o[e]);t.forEach((e,t,n,r)=>o.push(n,r))}let i=[];for(let e=0;e<o.length;e+=2){let r=o[e],s=o[e+1],l=n.doc.resolve(r),a=l.sharedDepth(s),c=l.node(a);for(let e=l.indexAfter(a),n=l.after(a+1);n<=s;++e){let r=c.maybeChild(e);if(!r)break;if(e&&-1==i.indexOf(n)){let o=c.child(e-1);o.type==r.type&&t(o,r)&&i.push(n)}n+=r.nodeSize}}i.sort((e,t)=>e-t);for(let e=i.length-1;e>=0;e--)Object(r.canJoin)(n.doc,i[e])&&n.join(i[e]);e(n)}}(o,n),i)}function $(...e){return function(t,n,r){for(let o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}let V=$(s,a,f),L=$(s,g,v);const H={Enter:$(S,O,C,E),"Mod-Enter":x,Backspace:V,"Mod-Backspace":V,"Shift-Backspace":V,Delete:L,"Mod-Delete":L,"Mod-a":A},q={"Ctrl-h":H.Backspace,"Alt-Backspace":H["Mod-Backspace"],"Ctrl-d":H.Delete,"Ctrl-Alt-Backspace":H["Mod-Delete"],"Alt-Delete":H["Mod-Delete"],"Alt-d":H["Mod-Delete"],"Ctrl-a":R,"Ctrl-e":I};for(let e in H)q[e]=H[e];const W=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&"darwin"==os.platform())?q:H},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Extension=void 0;var r=function(e){e&&(this.className=e.className,this.customSchema=e.schema,this.tagName=e.tagName,this.customIcon=e.icon,this.customName=e.customName)};t.Extension=r},function(e,t,n){"use strict";n.r(t),n.d(t,"Decoration",(function(){return jt})),n.d(t,"DecorationSet",(function(){return $t})),n.d(t,"EditorView",(function(){return dn})),n.d(t,"__endComposition",(function(){return hn})),n.d(t,"__parseFromClipboard",(function(){return un})),n.d(t,"__serializeForClipboard",(function(){return cn}));var r=n(1),o=n(0),i=n(2);const s=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},l=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let a=null;const c=function(e,t,n){let r=a||(a=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},u=function(e,t,n,r){return n&&(d(e,t,n,r,-1)||d(e,t,n,r,1))},h=/^(img|br|input|textarea|hr)$/i;function d(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:f(e))){let n=e.parentNode;if(!n||1!=n.nodeType||p(e)||h.test(e.nodeName)||"false"==e.contentEditable)return!1;t=s(e)+(o<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?f(e):0}}}function f(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function p(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const m=function(e){return e.focusNode&&u(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function g(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const v="undefined"!=typeof navigator?navigator:null,y="undefined"!=typeof document?document:null,b=v&&v.userAgent||"",w=/Edge\/(\d+)/.exec(b),_=/MSIE \d/.exec(b),S=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(b),k=!!(_||S||w),x=_?document.documentMode:S?+S[1]:w?+w[1]:0,O=!k&&/gecko\/(\d+)/i.test(b);O&&(/Firefox\/(\d+)/.exec(b)||[0,0])[1];const C=!k&&/Chrome\/(\d+)/.exec(b),M=!!C,E=C?+C[1]:0,N=!k&&!!v&&/Apple Computer/.test(v.vendor),T=N&&(/Mobile\/\w+/.test(b)||!!v&&v.maxTouchPoints>2),A=T||!!v&&/Mac/.test(v.platform),D=!!v&&/Win/.test(v.platform),P=/Android \d/.test(b),R=!!y&&"webkitFontSmoothing"in y.documentElement.style,I=R?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function z(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function j(e,t){return"number"==typeof e?e:e[t]}function B(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function F(e,t,n){let r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument;for(let s=n||e.dom;s;s=l(s)){if(1!=s.nodeType)continue;let e=s,n=e==i.body,l=n?z(i):B(e),a=0,c=0;if(t.top<l.top+j(r,"top")?c=-(l.top-t.top+j(o,"top")):t.bottom>l.bottom-j(r,"bottom")&&(c=t.bottom-l.bottom+j(o,"bottom")),t.left<l.left+j(r,"left")?a=-(l.left-t.left+j(o,"left")):t.right>l.right-j(r,"right")&&(a=t.right-l.right+j(o,"right")),a||c)if(n)i.defaultView.scrollBy(a,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),a&&(e.scrollLeft+=a);let o=e.scrollLeft-n,i=e.scrollTop-r;t={left:t.left-o,top:t.top-i,right:t.right-o,bottom:t.bottom-i}}if(n)break}}function $(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=l(r));return t}function V(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:o,left:i}=e[n];r.scrollTop!=o+t&&(r.scrollTop=o+t),r.scrollLeft!=i&&(r.scrollLeft=i)}}let L=null;function H(e,t){let n,r,o,i,s=2e8,l=0,a=t.top,u=t.top;for(let h=e.firstChild,d=0;h;h=h.nextSibling,d++){let e;if(1==h.nodeType)e=h.getClientRects();else{if(3!=h.nodeType)continue;e=c(h).getClientRects()}for(let c=0;c<e.length;c++){let f=e[c];if(f.top<=a&&f.bottom>=u){a=Math.max(f.bottom,a),u=Math.min(f.top,u);let e=f.left>t.left?f.left-t.left:f.right<t.left?t.left-f.right:0;if(e<s){n=h,s=e,r=e&&3==n.nodeType?{left:f.right<t.left?f.right:f.left,top:t.top}:t,1==h.nodeType&&e&&(l=d+(t.left>=(f.left+f.right)/2?1:0));continue}}else f.top>t.top&&!o&&f.left<=t.left&&f.right>=t.left&&(o=h,i={left:Math.max(f.left,Math.min(f.right,t.left)),top:f.top});!n&&(t.left>=f.right&&t.top>=f.top||t.left>=f.left&&t.top>=f.bottom)&&(l=d+1)}}return!n&&o&&(n=o,r=i,s=0),n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);let n=K(r,1);if(n.top!=n.bottom&&q(t,n))return{node:e,offset:o+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||s&&1==n.nodeType?{node:e,offset:l}:H(n,r)}function q(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function W(e,t){let n,r=e.dom.ownerDocument,o=0,i=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch(e){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}(r,t.left,t.top);i&&({node:n,offset:o}=i);let s,a=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!a||!e.dom.contains(1!=a.nodeType?a.parentNode:a)){let n=e.dom.getBoundingClientRect();if(!q(t,n))return null;if(a=function e(t,n,r){let o=t.childNodes.length;if(o&&r.top<r.bottom)for(let i=Math.max(0,Math.min(o-1,Math.floor(o*(n.top-r.top)/(r.bottom-r.top))-2)),s=i;;){let r=t.childNodes[s];if(1==r.nodeType){let t=r.getClientRects();for(let o=0;o<t.length;o++){let i=t[o];if(q(n,i))return e(r,n,i)}}if((s=(s+1)%o)==i)break}return t}(e.dom,t,n),!a)return null}if(N)for(let e=a;n&&e;e=l(e))e.draggable&&(n=void 0);if(a=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(a,t),n){if(O&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length),o<n.childNodes.length)){let e,r=n.childNodes[o];"IMG"==r.nodeName&&(e=r.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&o++}n==e.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(s=function(e,t,n,r){let o=-1;for(let n=t,i=!1;n!=e.dom;){let t=e.docView.nearestDesc(n,!0);if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent&&!i||!t.contentDOM)){let e=t.dom.getBoundingClientRect();if(t.node.isBlock&&t.parent&&!i&&(i=!0,e.left>r.left||e.top>r.top?o=t.posBefore:(e.right<r.left||e.bottom<r.top)&&(o=t.posAfter)),!t.contentDOM&&o<0){return(t.node.isBlock?r.top<(e.top+e.bottom)/2:r.left<(e.left+e.right)/2)?t.posBefore:t.posAfter}}n=t.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}(e,n,o,t))}null==s&&(s=function(e,t,n){let{node:r,offset:o}=H(t,n),i=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();i=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,o,i)}(e,a,t));let c=e.docView.nearestDesc(a,!0);return{pos:s,inside:c?c.posAtStart-c.border:-1}}function J(e){return e.top<e.bottom||e.left<e.right}function K(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(J(e))return e}return Array.prototype.find.call(n,J)||e.getBoundingClientRect()}const U=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function G(e,t,n){let{node:r,offset:o,atom:i}=e.docView.domFromPos(t,n<0?-1:1),s=R||O;if(3==r.nodeType){if(!s||!U.test(r.nodeValue)&&(n<0?o:o!=r.nodeValue.length)){let e=o,t=o,i=n<0?1:-1;return n<0&&!o?(t++,i=-1):n>=0&&o==r.nodeValue.length?(e--,i=1):n<0?e--:t++,Q(K(c(r,e,t),i),i<0)}{let e=K(c(r,o,o),n);if(O&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let t=K(c(r,o-1,o-1),-1);if(t.top==e.top){let n=K(c(r,o,o+1),-1);if(n.top!=e.top)return Q(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(i||0)).parent.inlineContent){if(null==i&&o&&(n<0||o==f(r))){let e=r.childNodes[o-1];if(1==e.nodeType)return Y(e.getBoundingClientRect(),!1)}if(null==i&&o<f(r)){let e=r.childNodes[o];if(1==e.nodeType)return Y(e.getBoundingClientRect(),!0)}return Y(r.getBoundingClientRect(),n>=0)}if(null==i&&o&&(n<0||o==f(r))){let e=r.childNodes[o-1],t=3==e.nodeType?c(e,f(e)-(s?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return Q(K(t,1),!1)}if(null==i&&o<f(r)){let e=r.childNodes[o];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?c(e,0,s?0:1):1==e.nodeType?e:null:null;if(t)return Q(K(t,-1),!0)}return Q(K(3==r.nodeType?c(r):r,-n),n>=0)}function Q(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Y(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Z(e,t,n){let r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}const X=/[\u0590-\u08ac]/;let ee=null,te=null,ne=!1;function re(e,t,n){return ee==t&&te==n?ne:(ee=t,te=n,ne="up"==n||"down"==n?function(e,t,n){let r=t.selection,o="up"==n?r.$from:r.$to;return Z(e,t,()=>{let{node:t}=e.docView.domFromPos(o.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=G(e,o.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=c(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let o=t[e];if(o.bottom>o.top+1&&("up"==n?r.top-o.top>2*(o.bottom-r.top):o.bottom-r.bottom>2*(r.bottom-o.top)))return!1}}return!0})}(e,t,n):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,l=e.domSelection();return X.test(r.parent.textContent)&&l.modify?Z(e,t,()=>{let{focusNode:t,focusOffset:o,anchorNode:i,anchorOffset:s}=e.domSelectionRange(),a=l.caretBidiLevel;l.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:u,focusOffset:h}=e.domSelectionRange(),d=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&o==h;try{l.collapse(i,s),t&&(t!=i||o!=s)&&l.extend&&l.extend(t,o)}catch(e){}return null!=a&&(l.caretBidiLevel=a),d}):"left"==n||"backward"==n?i:s}(e,t,n))}class oe{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=t>s(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,r=e;r;r=r.parentNode){let o,i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!(o=i.nodeDOM)||(1==o.nodeType?o.contains(1==e.nodeType?e:e.parentNode):o==e))return i;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],o=n+r.size;if(n==e&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n,r=0,o=0;for(let t=0;r<this.children.length;r++){let n=this.children[r],i=t+n.size;if(i>e||n instanceof he){o=e-t;break}t=i}if(o)return this.children[r].domFromPos(o-this.children[r].border,t);for(;r&&!(n=this.children[r-1]).size&&n instanceof ie&&n.side>=0;r--);if(t<=0){let e,n=!0;for(;e=r?this.children[r-1]:null,e&&e.dom.parentNode!=this.contentDOM;r--,n=!1);return e&&t&&n&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?s(e.dom)+1:0}}{let e,n=!0;for(;e=r<this.children.length?this.children[r]:null,e&&e.dom.parentNode!=this.contentDOM;r++,n=!1);return e&&n&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?s(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,o=-1;for(let i=n,l=0;;l++){let n=this.children[l],a=i+n.size;if(-1==r&&e<=a){let o=i+n.border;if(e>=o&&t<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,o);e=i;for(let t=l;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=s(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(a>t||l==this.children.length-1)){t=a;for(let e=l+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){o=s(n.dom);break}t+=n.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=a}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,r=!1){let o=Math.min(e,t),i=Math.max(e,t);for(let s=0,l=0;s<this.children.length;s++){let a=this.children[s],c=l+a.size;if(o>l&&i<c)return a.setSelection(e-l-a.border,t-l-a.border,n,r);l=c}let l=this.domFromPos(e,e?-1:1),a=t==e?l:this.domFromPos(t,t?-1:1),c=n.getSelection(),h=!1;if((O||N)&&e==t){let{node:e,offset:t}=l;if(3==e.nodeType){if(h=!(!t||"\n"!=e.nodeValue[t-1]),h&&t==e.nodeValue.length)for(let t,n=e;n;n=n.parentNode){if(t=n.nextSibling){"BR"==t.nodeName&&(l=a={node:t.parentNode,offset:s(t)+1});break}let e=n.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];h=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(O&&c.focusNode&&c.focusNode!=a.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||h&&N)&&u(l.node,l.offset,c.anchorNode,c.anchorOffset)&&u(a.node,a.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==t)&&!h){c.collapse(l.node,l.offset);try{e!=t&&c.extend(a.node,a.offset),d=!0}catch(e){}}if(!d){if(e>t){let e=l;l=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){let r=n+o.border,s=i-o.border;if(e>=r&&t<=s)return this.dirty=e==n||t==i?2:1,void(e!=r||t!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-r,t-r):o.dirty=3);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}n=i}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class ie extends oe{constructor(e,t,n,r){let o,i=t.type.toDOM;if("function"==typeof i&&(i=i(n,()=>o?o.parent?o.parent.posBeforeChild(o):void 0:r)),!t.type.spec.raw){if(1!=i.nodeType){let e=document.createElement("span");e.appendChild(i),i=e}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class se extends oe{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class le extends oe{constructor(e,t,n,r){super(e,[],n,r),this.mark=t}static create(e,t,n,r){let i=r.nodeViews[t.type.name],s=i&&i(t,r,n);return s&&s.dom||(s=o.DOMSerializer.renderSpec(document,t.type.spec.toDOM(t,n))),new le(e,t,s.dom,s.contentDOM||s.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=le.create(this.parent,this.mark,!0,n),o=this.children,i=this.size;t<i&&(o=ke(o,t,i,n)),e>0&&(o=ke(o,0,e,n));for(let e=0;e<o.length;e++)o[e].parent=r;return r.children=o,r}}class ae extends oe{constructor(e,t,n,r,o,i,s,l,a){super(e,[],o,i),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=s}static create(e,t,n,r,i,s){let l,a=i.nodeViews[t.type.name],c=a&&a(t,i,()=>l?l.parent?l.parent.posBeforeChild(l):void 0:s,n,r),u=c&&c.dom,h=c&&c.contentDOM;if(t.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(t.text);else u||({dom:u,contentDOM:h}=o.DOMSerializer.renderSpec(document,t.type.spec.toDOM(t)));h||t.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let d=u;return u=ye(u,n,t),c?l=new de(e,t,n,r,u,h||null,d,c,i,s+1):t.isText?new ue(e,t,n,r,u,d,i):new ae(e,t,n,r,u,h||null,d,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>o.Fragment.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&be(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,i=e.composing?this.localCompositionInfo(e,t):null,s=i&&i.pos>-1?i:null,l=i&&i.pos<0,a=new _e(this,s&&s.node,e);!function(e,t,n,r){let o=t.locals(e),i=0;if(0==o.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);r(s,o,t.forChild(i,s),n),i+=s.nodeSize}return}let s=0,l=[],a=null;for(let c=0;;){if(s<o.length&&o[s].to==i){let e,t=o[s++];for(;s<o.length&&o[s].to==i;)(e||(e=[t])).push(o[s++]);if(e){e.sort(Se);for(let t=0;t<e.length;t++)n(e[t],c,!!a)}else n(t,c,!!a)}let u,h;if(a)h=-1,u=a,a=null;else{if(!(c<e.childCount))break;h=c,u=e.child(c++)}for(let e=0;e<l.length;e++)l[e].to<=i&&l.splice(e--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)l.push(o[s++]);let d=i+u.nodeSize;if(u.isText){let e=d;s<o.length&&o[s].from<e&&(e=o[s].from);for(let t=0;t<l.length;t++)l[t].to<e&&(e=l[t].to);e<d&&(a=u.cut(e-i),u=u.cut(0,e-i),d=e,h=-1)}let f=u.isInline&&!u.isLeaf?l.filter(e=>!e.inline):l.slice();r(u,f,t.forChild(i,u),h),i=d}}(this.node,this.innerDeco,(t,i,s)=>{t.spec.marks?a.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!s&&a.syncToMarks(i==this.node.childCount?o.Mark.none:this.node.child(i).marks,n,e),a.placeWidget(t,e,r)},(t,o,s,c)=>{let u;a.syncToMarks(t.marks,n,e),a.findNodeMatch(t,o,s,c)||l&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(u=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(t,o,s,u,e)||a.updateNextNode(t,o,s,e,c,r)||a.addNode(t,o,s,e,r),r+=t.nodeSize}),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(s&&this.protectLocalComposition(e,s),function e(t,n,r){let o=t.firstChild,i=!1;for(let s=0;s<n.length;s++){let l=n[s],a=l.dom;if(a.parentNode==t){for(;a!=o;)o=we(o),i=!0;o=o.nextSibling}else i=!0,t.insertBefore(a,o);if(l instanceof le){let n=o?o.previousSibling:t.lastChild;e(l.contentDOM,l.children,r),o=n?n.nextSibling:t.firstChild}}for(;o;)o=we(o),i=!0;i&&r.trackWrites==t&&(r.trackWrites=null)}(this.contentDOM,this.children,e),T&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:o}=e.state.selection;if(!(e.state.selection instanceof r.TextSelection)||n<t||o>t+this.node.content.size)return null;let i=e.domSelectionRange(),s=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=f(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(i.focusNode,i.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let e=s.nodeValue,r=function(e,t,n,r){for(let o=0,i=0;o<e.childCount&&i<=r;){let s=e.child(o++),l=i;if(i+=s.nodeSize,!s.isText)continue;let a=s.text;for(;o<e.childCount;){let t=e.child(o++);if(i+=t.nodeSize,!t.isText)break;a+=t.text}if(i>=n){let e=l<r?a.lastIndexOf(t,r-l-1):-1;if(e>=0&&e+t.length+l>=n)return l+e;if(n==r&&a.length>=r+t.length-l&&a.slice(r-l,r-l+t.length)==t)return r}}return-1}(this.node.content,e,n-t,o-t);return r<0?null:{node:s,pos:r,text:e}}return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:r}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let i=new se(this,o,t,r);e.input.compositionNodes.push(i),this.children=ke(this.children,n,n+r.length,e,i)}update(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(be(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=ge(this.dom,this.nodeDOM,me(this.outerDeco,this.node,t),me(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function ce(e,t,n,r,o){ye(r,t,e);let i=new ae(void 0,e,t,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class ue extends ae{constructor(e,t,n,r,o,i,s){super(e,t,n,r,o,null,i,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),o=document.createTextNode(r.text);return new ue(this.parent,r,this.outerDeco,this.innerDeco,o,o,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}}class he extends oe{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class de extends ae{constructor(e,t,n,r,o,i,s,l,a,c){super(e,t,n,r,o,i,s,a,c),this.spec=l}update(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update){let o=this.spec.update(e,t,n);return o&&this.updateInner(e,t,n,r),o}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}const fe=function(e){e&&(this.nodeName=e)};fe.prototype=Object.create(null);const pe=[new fe];function me(e,t,n){if(0==e.length)return pe;let r=n?pe[0]:new fe,o=[r];for(let i=0;i<e.length;i++){let s=e[i].type.attrs;if(s){s.nodeName&&o.push(r=new fe(s.nodeName));for(let e in s){let i=s[e];null!=i&&(n&&1==o.length&&o.push(r=new fe(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+i:"style"==e?r.style=(r.style?r.style+";":"")+i:"nodeName"!=e&&(r[e]=i))}}}return o}function ge(e,t,n,r){if(n==pe&&r==pe)return t;let o=t;for(let t=0;t<r.length;t++){let i=r[t],s=n[t];if(t){let t;s&&s.nodeName==i.nodeName&&o!=e&&(t=o.parentNode)&&t.nodeName.toLowerCase()==i.nodeName||(t=document.createElement(i.nodeName),t.pmIsDeco=!0,t.appendChild(o),s=pe[0]),o=t}ve(o,s||pe[0],i)}return o}function ve(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==o.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<o.length;t++)-1==r.indexOf(o[t])&&e.classList.add(o[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=r.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function ye(e,t,n){return ge(e,e,pe,me(t,n,1!=e.nodeType))}function be(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function we(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class _e{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,o=e.childCount,i=new Map,s=[];e:for(;o>0;){let l;for(;;)if(r){let e=n.children[r-1];if(!(e instanceof le)){l=e,r--;break}n=e,r=e.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=e.child(o-1))break;--o,i.set(l,o),s.push(l)}}return{index:o,matched:i,matches:s.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,o=this.stack.length>>1,i=Math.min(o,e.length);for(;r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[o])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=le.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,n,r){let o,i=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(let r=this.index,o=Math.min(this.top.children.length,r+5);r<o;r++){let o=this.top.children[r];if(o.matchesNode(e,t,n)&&!this.preMatch.matched.has(o)){i=r;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,r,o){let i=this.top.children[r];return 3==i.dirty&&i.dom==i.contentDOM&&(i.dirty=2),!!i.update(e,t,n,o)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,r,o,i){for(let s=this.index;s<this.top.children.length;s++){let l=this.top.children[s];if(l instanceof ae){let a=this.preMatch.matched.get(l);if(null!=a&&a!=o)return!1;let c,u=l.dom,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&3!=l.dirty&&be(t,l.outerDeco));if(!h&&l.update(e,t,n,r))return this.destroyBetween(this.index,s),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(c=this.recreateWrapper(l,e,t,n,r,i)))return this.top.children[this.index]=c,c.dirty=2,c.updateChildren(r,i+1),c.dirty=0,this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,o,i){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let s=ae.create(this.top,t,n,r,o,i);if(!s.contentDOM)return null;s.children=e.children,e.children=[],e.destroy();for(let e of s.children)e.parent=s;return s}addNode(e,t,n,r,o){let i=ae.create(this.top,e,t,n,r,o);i.contentDOM&&i.updateChildren(r,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let r=new ie(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof le;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof ue)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((N||M)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new he(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function Se(e,t){return e.type.side-t.type.side}function ke(e,t,n,r,o){let i=[];for(let s=0,l=0;s<e.length;s++){let a=e[s],c=l,u=l+=a.size;c>=n||u<=t?i.push(a):(c<t&&i.push(a.slice(0,t-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(a.slice(n-c,a.size,r)))}return i}function xe(e,t=null){let n=e.domSelectionRange(),o=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),l=i&&0==i.size,a=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let c,u,h=o.resolve(a);if(m(n)){for(c=h;i&&!i.node;)i=i.parent;let e=i.node;if(i&&e.isAtom&&r.NodeSelection.isSelectable(e)&&i.parent&&(!e.isInline||!function(e,t,n){for(let r=0==t,o=t==f(e);r||o;){if(e==n)return!0;let t=s(e);if(!(e=e.parentNode))return!1;r=r&&0==t,o=o&&t==f(e)}}(n.focusNode,n.focusOffset,i.dom))){let e=i.posBefore;u=new r.NodeSelection(a==e?h:o.resolve(e))}}else{let t=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(t<0)return null;c=o.resolve(t)}if(!u){u=Pe(e,c,h,"pointer"==t||e.state.selection.head<h.pos&&!l?1:-1)}return u}function Oe(e){return e.editable?e.hasFocus():Ie(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Ce(e,t=!1){let n=e.state.selection;if(Ae(e,n),Oe(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&M){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&u(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,s(r)+1):n.setEnd(r,0);n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&k&&x<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{let o,i,{anchor:s,head:l}=n;!Me||n instanceof r.TextSelection||(n.$from.parent.inlineContent||(o=Ee(e,n.from)),n.empty||n.$from.parent.inlineContent||(i=Ee(e,n.to))),e.docView.setSelection(s,l,e.root,t),Me&&(o&&Te(o),i&&Te(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{Oe(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")},20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const Me=N||M&&E<63;function Ee(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(N&&o&&"false"==o.contentEditable)return Ne(o);if(!(o&&"false"!=o.contentEditable||i&&"false"!=i.contentEditable)){if(o)return Ne(o);if(i)return Ne(i)}}function Ne(e){return e.contentEditable="true",N&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Te(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Ae(e,t){if(t instanceof r.NodeSelection){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(De(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else De(e)}function De(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function Pe(e,t,n,o){return e.someProp("createSelectionBetween",r=>r(e,t,n))||r.TextSelection.between(t,n,o)}function Re(e){return!(e.editable&&!e.hasFocus())&&Ie(e)}function Ie(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function ze(e,t){let{$anchor:n,$head:o}=e.selection,i=t>0?n.max(o):n.min(o),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&r.Selection.findFrom(s,t)}function je(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Be(e,t,n){let o=e.state.selection;if(!(o instanceof r.TextSelection)){if(o instanceof r.NodeSelection&&o.node.isInline)return je(e,new r.TextSelection(t>0?o.$to:o.$from));{let n=ze(e.state,t);return!!n&&je(e,n)}}if(!o.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=ze(e.state,t);return!!(n&&n instanceof r.NodeSelection)&&je(e,n)}if(!(A&&n.indexOf("m")>-1)){let n,i=o.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText)return!1;let l=t<0?i.pos-s.nodeSize:i.pos;return!!(s.isAtom||(n=e.docView.descAt(l))&&!n.contentDOM)&&(r.NodeSelection.isSelectable(s)?je(e,new r.NodeSelection(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):!!R&&je(e,new r.TextSelection(e.state.doc.resolve(t<0?l:l+s.nodeSize))))}}function Fe(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function $e(e){let t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Ve(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,l=!1;O&&1==n.nodeType&&r<Fe(n)&&$e(n.childNodes[r])&&(l=!0);for(;;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if($e(e))o=n,i=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(He(n))break;{let t=n.previousSibling;for(;t&&$e(t);)o=n.parentNode,i=s(t),t=t.previousSibling;if(t)n=t,r=Fe(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}l?qe(e,n,r):o&&qe(e,o,i)}(e):Le(e)}function Le(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,l=Fe(n);for(;;)if(r<l){if(1!=n.nodeType)break;if(!$e(n.childNodes[r]))break;o=n,i=++r}else{if(He(n))break;{let t=n.nextSibling;for(;t&&$e(t);)o=t.parentNode,i=s(t)+1,t=t.nextSibling;if(t)n=t,r=0,l=Fe(n);else{if(n=n.parentNode,n==e.dom)break;r=l=0}}}o&&qe(e,o,i)}function He(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function qe(e,t,n){let r=e.domSelection();if(m(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:o}=e;setTimeout(()=>{e.state==o&&Ce(e)},50)}function We(e,t){let n=e.state.doc.resolve(t);if(!M&&!D&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),o=(n.top+n.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),o=(n.top+n.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function Je(e,t,n){let o=e.state.selection;if(o instanceof r.TextSelection&&!o.empty||n.indexOf("s")>-1)return!1;if(A&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=o;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=ze(e.state,t);if(n&&n instanceof r.NodeSelection)return je(e,n)}if(!i.parent.inlineContent){let n=t<0?i:s,l=o instanceof r.AllSelection?r.Selection.near(n,t):r.Selection.findFrom(n,t);return!!l&&je(e,l)}return!1}function Ke(e,t){if(!(e.state.selection instanceof r.TextSelection))return!0;let{$head:n,$anchor:o,empty:i}=e.state.selection;if(!n.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let r=e.state.tr;return t<0?r.delete(n.pos-s.nodeSize,n.pos):r.delete(n.pos,n.pos+s.nodeSize),e.dispatch(r),!0}return!1}function Ue(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Ge(e,t){let n=t.keyCode,r=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||A&&72==n&&"c"==r)return Ke(e,-1)||Ve(e,-1);if(46==n&&!t.shiftKey||A&&68==n&&"c"==r)return Ke(e,1)||Ve(e,1);if(13==n||27==n)return!0;if(37==n||A&&66==n&&"c"==r){let t=37==n?"ltr"==We(e,e.state.selection.from)?-1:1:-1;return Be(e,t,r)||Ve(e,t)}if(39==n||A&&70==n&&"c"==r){let t=39==n?"ltr"==We(e,e.state.selection.from)?1:-1:1;return Be(e,t,r)||Ve(e,t)}return 38==n||A&&80==n&&"c"==r?Je(e,-1,r)||Ve(e,-1):40==n||A&&78==n&&"c"==r?function(e){if(!N||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;Ue(e,n,"true"),setTimeout(()=>Ue(e,n,"false"),20)}return!1}(e)||Je(e,1,r)||Le(e):r==(A?"m":"c")&&(66==n||73==n||89==n||90==n)}function Qe(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,s--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let l=e.someProp("clipboardSerializer")||o.DOMSerializer.fromSchema(e.state.schema),a=st(),c=a.createElement("div");c.appendChild(l.serializeFragment(r,{document:a}));let u,h=c.firstChild,d=0;for(;h&&1==h.nodeType&&(u=ot[h.nodeName.toLowerCase()]);){for(let e=u.length-1;e>=0;e--){let t=a.createElement(u[e]);for(;c.firstChild;)t.appendChild(c.firstChild);c.appendChild(t),d++}h=c.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${i} ${s}${d?" -"+d:""} ${JSON.stringify(n)}`),{dom:c,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,"\n\n")}}function Ye(e,t,n,r,i){let s,l,a=i.parent.type.spec.code;if(!n&&!t)return null;let c=t&&(r||a||!n);if(c){if(e.someProp("transformPastedText",n=>{t=n(t,a||r,e)}),a)return t?new o.Slice(o.Fragment.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):o.Slice.empty;let n=e.someProp("clipboardTextParser",n=>n(t,i,r,e));if(n)l=n;else{let n=i.marks(),{schema:r}=e.state,l=o.DOMSerializer.fromSchema(r);s=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=s.appendChild(document.createElement("p"));e&&t.appendChild(l.serializeNode(r.text(e,n)))})}}else e.someProp("transformPastedHTML",t=>{n=t(n,e)}),s=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=st().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);(n=o&&ot[o[1].toLowerCase()])&&(e=n.map(e=>"<"+e+">").join("")+e+n.map(e=>"</"+e+">").reverse().join(""));if(r.innerHTML=e,n)for(let e=0;e<n.length;e++)r=r.querySelector(n[e])||r;return r}(n),R&&function(e){let t=e.querySelectorAll(M?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&""==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(s);let u=s&&s.querySelector("[data-pm-slice]"),h=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let e=+h[3];e>0;e--){let e=s.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;s=e}if(!l){let t=e.someProp("clipboardParser")||e.someProp("domParser")||o.DOMParser.fromSchema(e.state.schema);l=t.parseSlice(s,{preserveWhitespace:!(!c&&!h),context:i,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Ze.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(h)l=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}let{content:i,openStart:s,openEnd:l}=e;for(let e=n.length-2;e>=0;e-=2){let t=r.nodes[n[e]];if(!t||t.hasRequiredAttrs())break;i=o.Fragment.from(t.create(n[e+1],i)),s++,l++}return new o.Slice(i,s,l)}(rt(l,+h[1],+h[2]),h[4]);else if(l=o.Slice.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,i=t.node(n).contentMatchAt(t.index(n)),s=[];if(e.forEach(e=>{if(!s)return;let t,n=i.findWrapping(e.type);if(!n)return s=null;if(t=s.length&&r.length&&et(n,r,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=tt(s[s.length-1],r.length));let t=Xe(e,n);s.push(t),i=i.matchType(t.type),r=n}}),s)return o.Fragment.from(s)}return e}(l.content,i),!0),l.openStart||l.openEnd){let e=0,t=0;for(let t=l.content.firstChild;e<l.openStart&&!t.type.spec.isolating;e++,t=t.firstChild);for(let e=l.content.lastChild;t<l.openEnd&&!e.type.spec.isolating;t++,e=e.lastChild);l=rt(l,e,t)}return e.someProp("transformPasted",t=>{l=t(l,e)}),l}const Ze=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Xe(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,o.Fragment.from(e));return e}function et(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=et(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(o.Fragment.from(Xe(n,e,i+1))))}}function tt(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,tt(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(o.Fragment.empty,!0);return e.copy(n.append(r))}function nt(e,t,n,r,i,s){let l=t<0?e.firstChild:e.lastChild,a=l.content;return e.childCount>1&&(s=0),i<r-1&&(a=nt(a,t,n,r,i+1,s)),i>=n&&(a=t<0?l.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(l.contentMatchAt(l.childCount).fillBefore(o.Fragment.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,l.copy(a))}function rt(e,t,n){return t<e.openStart&&(e=new o.Slice(nt(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new o.Slice(nt(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const ot={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let it=null;function st(){return it||(it=document.implementation.createHTMLDocument("title"))}const lt={},at={},ct={touchstart:!0,touchmove:!0};class ut{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function ht(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function dt(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>ft(e,t))})}function ft(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)})}function pt(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function mt(e){return{left:e.clientX,top:e.clientY}}function gt(e,t,n,r,o){if(-1==r)return!1;let i=e.state.doc.resolve(r);for(let r=i.depth+1;r>0;r--)if(e.someProp(t,t=>r>i.depth?t(e,n,i.nodeAfter,i.before(r),o,!0):t(e,n,i.node(r),i.before(r),o,!1)))return!0;return!1}function vt(e,t,n){e.focused||e.focus();let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function yt(e,t,n,o,i){return gt(e,"handleClickOn",t,n,o)||e.someProp("handleClick",n=>n(e,t,o))||(i?function(e,t){if(-1==t)return!1;let n,o,i=e.state.selection;i instanceof r.NodeSelection&&(n=i.node);let s=e.state.doc.resolve(t);for(let e=s.depth+1;e>0;e--){let t=e>s.depth?s.nodeAfter:s.node(e);if(r.NodeSelection.isSelectable(t)){o=n&&i.$from.depth>0&&e>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(e);break}}return null!=o&&(vt(e,r.NodeSelection.create(e.state.doc,o),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),o=n.nodeAfter;return!!(o&&o.isAtom&&r.NodeSelection.isSelectable(o))&&(vt(e,new r.NodeSelection(n),"pointer"),!0)}(e,n))}function bt(e,t,n,r){return gt(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",n=>n(e,t,r))}function wt(e,t,n,o){return gt(e,"handleTripleClickOn",t,n,o)||e.someProp("handleTripleClick",n=>n(e,t,o))||function(e,t,n){if(0!=n.button)return!1;let o=e.state.doc;if(-1==t)return!!o.inlineContent&&(vt(e,r.TextSelection.create(o,0,o.content.size),"pointer"),!0);let i=o.resolve(t);for(let t=i.depth+1;t>0;t--){let n=t>i.depth?i.nodeAfter:i.node(t),s=i.before(t);if(n.inlineContent)vt(e,r.TextSelection.create(o,s+1,s+1+n.content.size),"pointer");else{if(!r.NodeSelection.isSelectable(n))continue;vt(e,r.NodeSelection.create(o,s),"pointer")}return!0}}(e,n,o)}function _t(e){return Et(e)}at.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!xt(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!P||!M||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!T||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",t=>t(e,n))||Ge(e,n)?n.preventDefault():ht(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,g(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},at.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},at.keypress=(e,t)=>{let n=t;if(xt(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||A&&n.metaKey)return;if(e.someProp("handleKeyPress",t=>t(e,n)))return void n.preventDefault();let o=e.state.selection;if(!(o instanceof r.TextSelection&&o.$from.sameParent(o.$to))){let t=String.fromCharCode(n.charCode);/[\r\n]/.test(t)||e.someProp("handleTextInput",n=>n(e,o.$from.pos,o.$to.pos,t))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};const St=A?"metaKey":"ctrlKey";lt.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=_t(e),o=Date.now(),i="singleClick";o-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[St]&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};let s=e.posAtCoords(mt(n));s&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new kt(e,s,n,!!r)):("doubleClick"==i?bt:wt)(e,s.pos,s.inside,n)?n.preventDefault():ht(e,"pointer"))};class kt{constructor(e,t,n,o){let i,s;if(this.view=e,this.pos=t,this.event=n,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[St],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),s=t.inside;else{let n=e.state.doc.resolve(t.pos);i=n.parent,s=n.depth?n.before():0}const l=o?null:n.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a?a.dom:null;let{selection:c}=e.state;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||c instanceof r.NodeSelection&&c.from<=s&&c.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!O||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ht(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ce(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(mt(e))),this.updateAllowDefault(e),this.allowDefault||!t?ht(this.view,"pointer"):yt(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||N&&this.mightDrag&&!this.mightDrag.node.isAtom||M&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(vt(this.view,r.Selection.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):ht(this.view,"pointer")}move(e){this.updateAllowDefault(e),ht(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function xt(e,t){return!!e.composing||!!(N&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}lt.touchstart=e=>{e.input.lastTouch=Date.now(),_t(e),ht(e,"pointer")},lt.touchmove=e=>{e.input.lastTouch=Date.now(),ht(e,"pointer")},lt.contextmenu=e=>_t(e);const Ot=P?5e3:-1;function Ct(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Et(e),t))}function Mt(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Et(e,t=!1){if(!(P&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Mt(e),t||e.docView&&e.docView.dirty){let t=xe(e);return t&&!t.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(t)):e.updateState(e.state),!0}return!1}}at.compositionstart=at.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||n.marks(),Et(e,!0),e.markCursor=null;else if(Et(e),O&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){e.domSelection().collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}Ct(e,Ot)},at.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionID++,Ct(e,20))};const Nt=k&&x<15||T&&I<604;function Tt(e,t,n,r,i){let s=Ye(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,i,s||o.Slice.empty)))return!0;if(!s)return!1;let l=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(s),a=l?e.state.tr.replaceSelectionWith(l,r):e.state.tr.replaceSelection(s);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}lt.copy=at.cut=(e,t)=>{let n=t,r=e.state.selection,o="cut"==n.type;if(r.empty)return;let i=Nt?null:n.clipboardData,s=r.content(),{dom:l,text:a}=Qe(e,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",a)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}(e,l),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},at.paste=(e,t)=>{let n=t;if(e.composing&&!P)return;let r=Nt?null:n.clipboardData,o=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&Tt(e,r.getData("text/plain"),r.getData("text/html"),o,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Tt(e,r.value,null,o,t):Tt(e,r.textContent,r.innerHTML,o,t)},50)}(e,n)};class At{constructor(e,t){this.slice=e,this.move=t}}const Dt=A?"altKey":"ctrlKey";lt.dragstart=(e,t)=>{let n=t,o=e.input.mouseDown;if(o&&o.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(mt(n));if(s&&s.pos>=i.from&&s.pos<=(i instanceof r.NodeSelection?i.to-1:i.to));else if(o&&o.mightDrag)e.dispatch(e.state.tr.setSelection(r.NodeSelection.create(e.state.doc,o.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&e.dispatch(e.state.tr.setSelection(r.NodeSelection.create(e.state.doc,t.posBefore)))}let l=e.state.selection.content(),{dom:a,text:c}=Qe(e,l);n.dataTransfer.clearData(),n.dataTransfer.setData(Nt?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Nt||n.dataTransfer.setData("text/plain",c),e.dragging=new At(l,!n[Dt])},lt.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},at.dragover=at.dragenter=(e,t)=>t.preventDefault(),at.drop=(e,t)=>{let n=t,s=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let l=e.posAtCoords(mt(n));if(!l)return;let a=e.state.doc.resolve(l.pos),c=s&&s.slice;c?e.someProp("transformPasted",t=>{c=t(c,e)}):c=Ye(e,n.dataTransfer.getData(Nt?"Text":"text/plain"),Nt?null:n.dataTransfer.getData("text/html"),!1,a);let u=!(!s||n[Dt]);if(e.someProp("handleDrop",t=>t(e,n,c||o.Slice.empty,u)))return void n.preventDefault();if(!c)return;n.preventDefault();let h=c?Object(i.dropPoint)(e.state.doc,a.pos,c):a.pos;null==h&&(h=a.pos);let d=e.state.tr;u&&d.deleteSelection();let f=d.mapping.map(h),p=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,m=d.doc;if(p?d.replaceRangeWith(f,f,c.content.firstChild):d.replaceRange(f,f,c),d.doc.eq(m))return;let g=d.doc.resolve(f);if(p&&r.NodeSelection.isSelectable(c.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(c.content.firstChild))d.setSelection(new r.NodeSelection(g));else{let t=d.mapping.map(h);d.mapping.maps[d.mapping.maps.length-1].forEach((e,n,r,o)=>t=o),d.setSelection(Pe(e,g,d.doc.resolve(t)))}e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))},lt.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Ce(e)},20))},lt.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},lt.beforeinput=(e,t)=>{if(M&&P&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,g(8,"Backspace"))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}};for(let e in at)lt[e]=at[e];function Pt(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Rt{constructor(e,t){this.toDOM=e,this.spec=t||Ft,this.side=this.spec.side||0}map(e,t,n,r){let{pos:o,deleted:i}=e.mapResult(t.from+r,this.side<0?-1:1);return i?null:new jt(o-n,o-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Rt&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Pt(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class It{constructor(e,t){this.attrs=e,this.spec=t||Ft}map(e,t,n,r){let o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new jt(o,i,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof It&&Pt(this.attrs,e.attrs)&&Pt(this.spec,e.spec)}static is(e){return e.type instanceof It}destroy(){}}class zt{constructor(e,t){this.attrs=e,this.spec=t||Ft}map(e,t,n,r){let o=e.mapResult(t.from+r,1);if(o.deleted)return null;let i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new jt(o.pos-n,i.pos-n,this)}valid(e,t){let n,{index:r,offset:o}=e.content.findIndex(t.from);return o==t.from&&!(n=e.child(r)).isText&&o+n.nodeSize==t.to}eq(e){return this==e||e instanceof zt&&Pt(this.attrs,e.attrs)&&Pt(this.spec,e.spec)}destroy(){}}class jt{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new jt(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new jt(e,e,new Rt(t,n))}static inline(e,t,n,r){return new jt(e,t,new It(n,r))}static node(e,t,n,r){return new jt(e,t,new zt(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof It}}const Bt=[],Ft={};class $t{constructor(e,t){this.local=e.length?e:Bt,this.children=t.length?t:Bt}static create(e,t){return t.length?Jt(t,e,0,Ft):Vt}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,o){for(let i=0;i<this.local.length;i++){let s=this.local[i];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<t&&this.children[i+1]>e){let s=this.children[i]+1;this.children[i+2].findInner(e-s,t-s,n,r+s,o)}}map(e,t,n){return this==Vt||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Ft)}mapInner(e,t,n,r,o){let i;for(let s=0;s<this.local.length;s++){let l=this.local[s].map(e,n,r);l&&l.type.valid(t,l)?(i||(i=[])).push(l):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,o,i,s){let l=e.slice();for(let e=0,t=i;e<n.maps.length;e++){let r=0;n.maps[e].forEach((e,n,i,s)=>{let a=s-i-(n-e);for(let s=0;s<l.length;s+=3){let c=l[s+1];if(c<0||e>c+t-r)continue;let u=l[s]+t-r;n>=u?l[s+1]=e<=u?-2:-1:i>=o&&a&&(l[s]+=a,l[s+1]+=a)}r+=a}),t=n.maps[e].map(t,-1)}let a=!1;for(let t=0;t<l.length;t+=3)if(l[t+1]<0){if(-2==l[t+1]){a=!0,l[t+1]=-1;continue}let c=n.map(e[t]+i),u=c-o;if(u<0||u>=r.content.size){a=!0;continue}let h=n.map(e[t+1]+i,-1)-o,{index:d,offset:f}=r.content.findIndex(u),p=r.maybeChild(d);if(p&&f==u&&f+p.nodeSize==h){let r=l[t+2].mapInner(n,p,c+1,e[t]+i+1,s);r!=Vt?(l[t]=u,l[t+1]=h,l[t+2]=r):(l[t+1]=-2,a=!0)}else a=!0}if(a){let a=Jt(function(e,t,n,r,o,i,s){function l(e,t){for(let i=0;i<e.local.length;i++){let l=e.local[i].map(r,o,t);l?n.push(l):s.onRemove&&s.onRemove(e.local[i].spec)}for(let n=0;n<e.children.length;n+=3)l(e.children[n+2],e.children[n]+t+1)}for(let n=0;n<e.length;n+=3)-1==e[n+1]&&l(e[n+2],t[n]+i+1);return n}(l,e,t,n,o,i,s),r,0,s);t=a.local;for(let e=0;e<l.length;e+=3)l[e+1]<0&&(l.splice(e,3),e-=3);for(let e=0,t=0;e<a.children.length;e+=3){let n=a.children[e];for(;t<l.length&&l[t]<n;)t+=3;l.splice(t,0,a.children[e],a.children[e+1],a.children[e+2])}}return new $t(t.sort(Kt),l)}(this.children,i||[],e,t,n,r,o):i?new $t(i.sort(Kt),Bt):Vt}add(e,t){return t.length?this==Vt?$t.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,o=0;e.forEach((e,i)=>{let s,l=i+n;if(s=qt(t,e,l)){for(r||(r=this.children.slice());o<r.length&&r[o]<i;)o+=3;r[o]==i?r[o+2]=r[o+2].addInner(e,s,l+1):r.splice(o,0,i,i+e.nodeSize,Jt(s,e,l+1,Ft)),o+=3}});let i=Ht(o?Wt(t):t,-n);for(let t=0;t<i.length;t++)i[t].type.valid(e,i[t])||i.splice(t--,1);return new $t(i.length?this.local.concat(i).sort(Kt):this.local,r||this.children)}remove(e){return 0==e.length||this==Vt?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let r=0;r<n.length;r+=3){let o,i=n[r]+t,s=n[r+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>i&&t.to<s&&(e[n]=null,(o||(o=[])).push(t));if(!o)continue;n==this.children&&(n=this.children.slice());let l=n[r+2].removeInner(o,i+1);l!=Vt?n[r+2]=l:(n.splice(r,3),r-=3)}if(r.length)for(let n,o=0;o<e.length;o++)if(n=e[o])for(let e=0;e<r.length;e++)r[e].eq(n,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new $t(r,n):Vt}forChild(e,t){if(this==Vt)return this;if(t.isLeaf)return $t.empty;let n,r;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(n=this.children[t+2]);break}let o=e+1,i=o+t.content.size;for(let e=0;e<this.local.length;e++){let t=this.local[e];if(t.from<i&&t.to>o&&t.type instanceof It){let e=Math.max(o,t.from)-o,n=Math.min(i,t.to)-o;e<n&&(r||(r=[])).push(t.copy(e,n))}}if(r){let e=new $t(r.sort(Kt),Bt);return n?new Lt([e,n]):e}return n||Vt}eq(e){if(this==e)return!0;if(!(e instanceof $t)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Ut(this.localsInner(e))}localsInner(e){if(this==Vt)return Bt;if(e.inlineContent||!this.local.some(It.is))return this.local;let t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof It||t.push(this.local[e]);return t}}$t.empty=new $t([],[]),$t.removeOverlap=Ut;const Vt=$t.empty;class Lt{constructor(e){this.members=e}map(e,t){const n=this.members.map(n=>n.map(e,t,Ft));return Lt.from(n)}forChild(e,t){if(t.isLeaf)return $t.empty;let n=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(e,t);o!=Vt&&(o instanceof Lt?n=n.concat(o.members):n.push(o))}return Lt.from(n)}eq(e){if(!(e instanceof Lt)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<o.length;e++)t.push(o[e])}else t=o}return t?Ut(n?t:t.sort(Kt)):Bt}static from(e){switch(e.length){case 0:return Vt;case 1:return e[0];default:return new Lt(e.every(e=>e instanceof $t)?e:e.reduce((e,t)=>e.concat(t instanceof $t?t:t.members),[]))}}}function Ht(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let o=e[r];n.push(new jt(o.from+t,o.to+t,o.type))}return n}function qt(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,o=null;for(let t,i=0;i<e.length;i++)(t=e[i])&&t.from>n&&t.to<r&&((o||(o=[])).push(t),e[i]=null);return o}function Wt(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Jt(e,t,n,r){let o=[],i=!1;t.forEach((t,s)=>{let l=qt(e,t,s+n);if(l){i=!0;let e=Jt(l,t,n+s+1,r);e!=Vt&&o.push(s,s+t.nodeSize,e)}});let s=Ht(i?Wt(e):e,-n).sort(Kt);for(let e=0;e<s.length;e++)s[e].type.valid(t,s[e])||(r.onRemove&&r.onRemove(s[e].spec),s.splice(e--,1));return s.length||o.length?new $t(s,o):Vt}function Kt(e,t){return e.from-t.from||e.to-t.to}function Ut(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let o=n+1;o<t.length;o++){let i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),Gt(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),Gt(t,o+1,i.copy(r.to,i.to)))}}return t}function Gt(e,t,n){for(;t<e.length&&Kt(n,e[t])>0;)t++;e.splice(t,0,n)}function Qt(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=Vt&&t.push(r)}),e.cursorWrapper&&t.push($t.create(e.state.doc,[e.cursorWrapper.deco])),Lt.from(t)}const Yt={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Zt=k&&x<=11;class Xt{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class en{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Xt,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);k&&x<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),Zt&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Yt)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Re(this.view)){if(this.suppressingSelectionUpdates)return Ce(this.view);if(k&&x<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&u(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let t=e.focusNode;t;t=l(t))n.add(t);for(let r=e.anchorNode;r;r=l(r))if(n.has(r)){t=r;break}let r=t&&this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);let n=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Re(e)&&!this.ignoreSelectionChange(n),i=-1,s=-1,l=!1,a=[];if(e.editable)for(let e=0;e<t.length;e++){let n=this.registerMutation(t[e],a);n&&(i=i<0?n.from:Math.min(n.from,i),s=s<0?n.to:Math.max(n.to,s),n.typeOver&&(l=!0))}if(O&&a.length>1){let e=a.filter(e=>"BR"==e.nodeName);if(2==e.length){let t=e[0],n=e[1];t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}}let c=null;i<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&m(n)&&(c=xe(e))&&c.eq(r.Selection.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ce(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||o)&&(i>-1&&(e.docView.markDirty(i,s),function(e){if(tn.has(e))return;if(tn.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)){if(e.requiresGeckoHackNode=O,nn)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),nn=!0}}(e)),this.handleDOMChange(i,s,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Ce(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++)t.push(e.addedNodes[n]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,o=e.nextSibling;if(k&&x<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:i}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(r=n),(!i||Array.prototype.indexOf.call(e.addedNodes,i)<0)&&(o=i)}let i=r&&r.parentNode==e.target?s(r)+1:0,l=n.localPosFromDOM(e.target,i,-1),a=o&&o.parentNode==e.target?s(o):e.target.childNodes.length;return{from:l,to:n.localPosFromDOM(e.target,a,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let tn=new WeakMap,nn=!1;function rn(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(N&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||N&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const on=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function sn(e,t,n,i,s){if(t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=xe(e,t);if(n&&!e.state.selection.eq(n)){if(M&&P&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,g(13,"Enter"))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),e.composing&&r.setMeta("composition",e.input.compositionID),e.dispatch(r)}return}let l=e.state.doc.resolve(t),a=l.sharedDepth(n);t=l.before(a+1),n=e.state.doc.resolve(n).after(a+1);let c,u,h=e.state.selection,d=function(e,t,n){let r,{node:i,fromOffset:s,toOffset:l,from:a,to:c}=e.docView.parseRange(t,n),u=e.domSelectionRange(),h=u.anchorNode;if(h&&e.dom.contains(1==h.nodeType?h:h.parentNode)&&(r=[{node:h,offset:u.anchorOffset}],m(u)||r.push({node:u.focusNode,offset:u.focusOffset})),M&&8===e.input.lastKeyCode)for(let e=l;e>s;e--){let t=i.childNodes[e-1],n=t.pmViewDesc;if("BR"==t.nodeName&&!n){l=e;break}if(!n||n.size)break}let d=e.state.doc,f=e.someProp("domParser")||o.DOMParser.fromSchema(e.state.schema),p=d.resolve(a),g=null,v=f.parse(i,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:l,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:rn,context:p});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),g={anchor:e+a,head:t+a}}return{doc:v,sel:g,from:a,to:c}}(e,t,n),f=e.state.doc,p=f.slice(d.from,d.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(c=e.state.selection.to,u="end"):(c=e.state.selection.from,u="start"),e.input.lastKeyCode=null;let v=function(e,t,n,r,o){let i=e.findDiffStart(t,n);if(null==i)return null;let{a:s,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==o){let e=Math.max(0,i-Math.min(s,l));r-=s+e-i}if(s<i&&e.size<t.size){i-=r<=i&&r>=s?i-r:0,l=i+(l-s),s=i}else if(l<i){i-=r<=i&&r>=l?i-r:0,s=i+(s-l),l=i}return{start:i,endA:s,endB:l}}(p.content,d.doc.content,d.from,c,u);if((T&&e.input.lastIOSEnter>Date.now()-225||P)&&s.some(e=>1==e.nodeType&&!on.test(e.nodeName))&&(!v||v.endA>=v.endB)&&e.someProp("handleKeyDown",t=>t(e,g(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(!v){if(!(i&&h instanceof r.TextSelection&&!h.empty&&h.$head.sameParent(h.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let t=ln(e,e.state.doc,d.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);e.composing&&n.setMeta("composition",e.input.compositionID),e.dispatch(n)}}return}v={start:h.from,endA:h.to,endB:h.to}}if(M&&e.cursorWrapper&&d.sel&&d.sel.anchor==e.cursorWrapper.deco.from&&d.sel.head==d.sel.anchor){let e=v.endB-v.start;d.sel={anchor:d.sel.anchor+e,head:d.sel.anchor+e}}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&v.start==v.endB&&e.state.selection instanceof r.TextSelection&&(v.start>e.state.selection.from&&v.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?v.start=e.state.selection.from:v.endA<e.state.selection.to&&v.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(v.endB+=e.state.selection.to-v.endA,v.endA=e.state.selection.to)),k&&x<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>d.from&&" "==d.doc.textBetween(v.start-d.from-1,v.start-d.from+1)&&(v.start--,v.endA--,v.endB--);let y,b=d.doc.resolveNoCache(v.start-d.from),w=d.doc.resolveNoCache(v.endB-d.from),_=f.resolve(v.start),S=b.sameParent(w)&&b.parent.inlineContent&&_.end()>=v.endA;if((T&&e.input.lastIOSEnter>Date.now()-225&&(!S||s.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!S&&b.pos<d.doc.content.size&&!b.sameParent(w)&&(y=r.Selection.findFrom(d.doc.resolve(b.pos+1),1,!0))&&y.head==w.pos)&&e.someProp("handleKeyDown",t=>t(e,g(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>v.start&&function(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||an(r,!0,!1)<o.pos)return!1;let i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=e.resolve(an(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||an(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(f,v.start,v.endA,b,w)&&e.someProp("handleKeyDown",t=>t(e,g(8,"Backspace"))))return void(P&&M&&e.domObserver.suppressSelectionUpdates());M&&P&&v.endB==v.start&&(e.input.lastAndroidDelete=Date.now()),P&&!S&&b.start()!=w.start()&&0==w.parentOffset&&b.depth==w.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==v.endA&&(v.endB-=2,w=d.doc.resolveNoCache(v.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",(function(t){return t(e,g(13,"Enter"))}))},20));let O,C,E,N=v.start,A=v.endA;if(S)if(b.pos==w.pos)k&&x<=11&&0==b.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ce(e),20)),O=e.state.tr.delete(N,A),C=f.resolve(v.start).marksAcross(f.resolve(v.endA));else if(v.endA==v.endB&&(E=function(e,t){let n,r,i,s=e.firstChild.marks,l=t.firstChild.marks,a=s,c=l;for(let e=0;e<l.length;e++)a=l[e].removeFromSet(a);for(let e=0;e<s.length;e++)c=s[e].removeFromSet(c);if(1==a.length&&0==c.length)r=a[0],n="add",i=e=>e.mark(r.addToSet(e.marks));else{if(0!=a.length||1!=c.length)return null;r=c[0],n="remove",i=e=>e.mark(r.removeFromSet(e.marks))}let u=[];for(let e=0;e<t.childCount;e++)u.push(i(t.child(e)));if(o.Fragment.from(u).eq(e))return{mark:r,type:n}}(b.parent.content.cut(b.parentOffset,w.parentOffset),_.parent.content.cut(_.parentOffset,v.endA-_.start()))))O=e.state.tr,"add"==E.type?O.addMark(N,A,E.mark):O.removeMark(N,A,E.mark);else if(b.parent.child(b.index()).isText&&b.index()==w.index()-(w.textOffset?0:1)){let t=b.parent.textBetween(b.parentOffset,w.parentOffset);if(e.someProp("handleTextInput",n=>n(e,N,A,t)))return;O=e.state.tr.insertText(t,N,A)}if(O||(O=e.state.tr.replace(N,A,d.doc.slice(v.start-d.from,v.endB-d.from))),d.sel){let t=ln(e,O.doc,d.sel);t&&!(M&&P&&e.composing&&t.empty&&(v.start!=v.endB||e.input.lastAndroidDelete<Date.now()-100)&&(t.head==N||t.head==O.mapping.map(A)-1)||k&&t.empty&&t.head==N)&&O.setSelection(t)}C&&O.ensureMarks(C),e.composing&&O.setMeta("composition",e.input.compositionID),e.dispatch(O.scrollIntoView())}function ln(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Pe(e,t.resolve(n.anchor),t.resolve(n.head))}function an(e,t,n){let r=e.depth,o=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,o++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,o++}return o}const cn=Qe,un=Ye,hn=Et;class dn{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new ut,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(vn),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=mn(this),pn(this),this.nodeViews=gn(this),this.docView=ce(this.state.doc,fn(this),Qt(this),this.dom,this),this.domObserver=new en(this,(e,t,n,r)=>sn(this,e,t,n,r)),this.domObserver.start(),function(e){for(let t in lt){let n=lt[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!pt(e,t)||ft(e,t)||!e.editable&&t.type in at||n(e,t)},ct[t]?{passive:!0}:void 0)}N&&e.dom.addEventListener("input",()=>null),dt(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&dt(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(vn),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let e in this._props)t[e]=this._props[e];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){let n=this.state,r=!1,o=!1;e.storedMarks&&this.composing&&(Mt(this),o=!0),this.state=e;let i=n.plugins!=e.plugins||this._props.plugins!=t.plugins;if(i||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=gn(this);(function(e,t){let n=0,r=0;for(let r in e){if(e[r]!=t[r])return!0;n++}for(let e in t)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,r=!0)}(i||t.handleDOMEvents!=this._props.handleDOMEvents)&&dt(this),this.editable=mn(this),pn(this);let s=Qt(this),l=fn(this),a=n.plugins==e.plugins||n.doc.eq(e.doc)?e.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",c=r||!this.docView.matchesNode(e.doc,l,s);!c&&e.selection.eq(n.selection)||(o=!0);let h="preserve"==a&&o&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top);for(let i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){let r=e.root.elementFromPoint(i,s);if(!r||r==e.dom||!e.dom.contains(r))continue;let l=r.getBoundingClientRect();if(l.top>=o-20){t=r,n=l.top;break}}return{refDOM:t,refTop:n,stack:$(e.dom)}}(this);if(o){this.domObserver.stop();let t=c&&(k||M)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(n.selection,e.selection);if(c){let n=M?this.trackWrites=this.domSelectionRange().focusNode:null;!r&&this.docView.update(e.doc,l,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=ce(e.doc,l,s,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return u(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?Ce(this,t):(Ae(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),"reset"==a?this.dom.scrollTop=0:"to selection"==a?this.scrollToSelection():h&&function({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;V(n,0==r?0:r-t)}(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof r.NodeSelection){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&F(this,t.getBoundingClientRect(),e)}else F(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let r=0;r<this.directPlugins.length;r++){let o=this.directPlugins[r].props[e];if(null!=o&&(n=t?t(o):o))return n}let o=this.state.plugins;if(o)for(let r=0;r<o.length;r++){let i=o[r].props[e];if(null!=i&&(n=t?t(i):i))return n}}hasFocus(){if(k){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(L)return e.focus(L);let t=$(e);e.focus(null==L?{get preventScroll(){return L={preventScroll:!0},!0}}:void 0),L||(L=!1,V(t,0))}(this.dom),Ce(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e;return e||document}posAtCoords(e){return W(this,e)}coordsAtPos(e,t=1){return G(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return re(this,t||this.state,e)}pasteHTML(e,t){return Tt(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Tt(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(!function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Qt(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){ft(e,t)||!lt[t.type]||!e.editable&&t.type in at||lt[t.type](e,t)}(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return N&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom?function(e){let t;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0);let r=t.startContainer,o=t.startOffset,i=t.endContainer,s=t.endOffset,l=e.domAtPos(e.state.selection.anchor);return u(l.node,l.offset,i,s)&&([r,o,i,s]=[i,s,r,o]),{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:s}}(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function fn(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),t.translate||(t.translate="no"),[jt.node(0,e.state.doc.content.size,t)]}function pn(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:jt.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function mn(e){return!e.someProp("editable",t=>!1===t(e.state))}function gn(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function vn(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(0),i=n(9),s=function(e,t){return function(n){Array.isArray(e)||(e=[e]);for(var r=0,o=e.length;r<o;r++){var i=x(e[r])(n.selection);if(i){var s=d(i.pos,t)(n);if(s!==n)return s}}return n}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var o=r.Selection.findFrom(n.doc.resolve(e),t,!0);return o?n.setSelection(o):n}},a=function(e,t){return function(n){var r="number"==typeof t,o=n.selection.$from,i=r?n.doc.resolve(t):c(n.selection)?n.doc.resolve(o.pos+1):o,a=i.parent;i.depth;if(v(a)&&n!==(n=s(a.type,e)(n)))return l(i.pos)(n);if(g(i,e))return n.insert(i.pos,e),h(l(r?i.pos:n.selection.$anchor.pos)(n));for(var u=i.depth;u>0;u--){var d=i.after(u),f=n.doc.resolve(d);if(g(f,e))return n.insert(d,e),h(l(d)(n))}return n}},c=function(e){return e instanceof r.NodeSelection},u=function(e,t){return Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e},h=function(e){return Object.assign(Object.create(e),e).setTime(Date.now())},d=function(e,t){return function(n){var r=n.doc.nodeAt(e),o=n.doc.resolve(e);if(f(o,t)){var i=(n=n.replaceWith(e,e+r.nodeSize,t)).selection.$from.pos-1;return n=l(Math.max(i,0),-1)(n),n=l(n.selection.$from.start())(n),h(n)}return n}},f=function(e,t){var n=e.node(e.depth);return n&&n.type.validContent(t instanceof o.Fragment?t:o.Fragment.from(t))},p=function(e){return function(t){var n=t.doc.nodeAt(e);return h(t.delete(e,e+n.nodeSize))}},m=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;var t={};return Object.keys(e.nodes).forEach((function(n){var r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)})),e.cached.tableNodeTypes=t,t},g=function(e,t){var n=e.index();return t instanceof o.Fragment?e.parent.canReplace(n,n,t):t instanceof o.Node&&e.parent.canReplaceWith(n,n,t.type)},v=function(e){return!e||"paragraph"===e.type.name&&2===e.nodeSize},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?e.createChecked(null,t):e.createAndFill()},b=function(e){return function(t){for(var n=i.TableMap.get(t.$anchorCell.node(-1)),r=t.$anchorCell.start(-1),o=n.cellsInRect(e),s=n.cellsInRect(n.rectBetween(t.$anchorCell.pos-r,t.$headCell.pos-r)),l=0,a=o.length;l<a;l++)if(-1===s.indexOf(o[l]))return!1;return!0}},w=function(e){return function(t){var n=t.$from;return _(n,e)}},_=function(e,t){for(var n=e.depth;n>0;n--){var r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}},S=function(e,t){return function(n){var r=w(e)(n);if(r)return C(r.pos,t)}},k=function(e){return function(t){return!!w(e)(t)}},x=function(e){return function(t){return w((function(t){return u(e,t)}))(t)}},O=function(e){var t=e.$from.nodeBefore,n=r.Selection.findFrom(e.$from,-1);if(n&&t){var o=x(t.type)(n);return o?o.pos:n.$from.pos}},C=function(e,t){var n=t(e),r=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:r&&r.nodeType!==Node.TEXT_NODE?r:n.node},M=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)throw new Error('Invalid "node" parameter');var n=[];return e.descendants((function(e,r){if(n.push({node:e,pos:r}),!t)return!1})),n},E=function(e,t,n){if(!e)throw new Error('Invalid "node" parameter');if(!t)throw new Error('Invalid "predicate" parameter');return M(e,n).filter((function(e){return t(e.node)}))},N=function(e,t,n){return E(e,(function(e){return e.type===t}),n)};var T=function(e){return w((function(e){return e.type.spec.tableRole&&"table"===e.type.spec.tableRole}))(e)},A=function(e){return e instanceof i.CellSelection},D=function(e){if(A(e)){var t=i.TableMap.get(e.$anchorCell.node(-1));return b({left:0,right:t.width,top:0,bottom:t.height})(e)}return!1},P=function(e){return function(t){var n=T(t);if(n){var r=i.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((function(e,t){if(t>=0&&t<=r.width-1){var o=r.cellsInRect({left:t,right:t+1,top:0,bottom:r.height});return e.concat(o.map((function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}})))}}),[])}}},R=function(e){return function(t){var n=T(t);if(n){var r=i.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce((function(e,t){if(t>=0&&t<=r.height-1){var o=r.cellsInRect({left:0,right:r.width,top:t,bottom:t+1});return e.concat(o.map((function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}})))}}),[])}}},I=function(e){var t=T(e);if(t){var n=i.TableMap.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map((function(e){var n=t.node.nodeAt(e),r=e+t.start;return{pos:r,start:r+1,node:n}}))}},z=function(e){return function(t){var n=T(t.selection);if(n){var r=i.TableMap.get(n.node);if(e>=0&&e<=r.height){for(var o=n.node,s=m(o.type.schema),l=n.start,c=0;c<e+1;c++)l+=o.child(c).nodeSize;var u=o.child(e),h=[],d=0;if(u.forEach((function(e){1===e.attrs.rowspan&&(d+=e.attrs.colspan,h.push(s[e.type.spec.tableRole].createAndFill(e.attrs,e.marks)))})),d<r.width){for(var f=[],p=function(n){var r=H(n,(function(t,r){var o=t.node.attrs.rowspan;return o>1&&n+o>e}))(t);f.push.apply(f,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r))},g=e;g>=0;g--)p(g);f.length&&f.forEach((function(e){t=$(e,{rowspan:e.node.attrs.rowspan+1})(t)}))}return a(s.row.create(u.attrs,h),l)(t)}}return t}},j=function(e){return function(t){var n=T(t.selection);if(n){var r=i.TableMap.get(n.node);if(0===e&&1===r.width)return F(t);if(e>=0&&e<=r.width)return i.removeColumn(t,{map:r,tableStart:n.start,table:n.node},e),h(t)}return t}},B=function(e){return function(t){var n=T(t.selection);if(n){var r=i.TableMap.get(n.node);if(0===e&&1===r.height)return F(t);if(e>=0&&e<=r.height)return i.removeRow(t,{map:r,tableStart:n.start,table:n.node},e),h(t)}return t}},F=function(e){for(var t=e.selection.$from,n=t.depth;n>0;n--){if("table"===t.node(n).type.spec.tableRole)return h(e.delete(t.before(n),t.after(n)))}return e},$=function(e,t){return function(n){return e?(n.setNodeMarkup(e.pos,null,Object.assign({},e.node.attrs,t)),h(n)):n}},V=function(e){return _(e,(function(e){return e.type.spec.tableRole&&/cell/i.test(e.type.spec.tableRole)}))},L=function(e){var t=V(e);if(t){var n=function(e){return _(e,(function(e){return e.type.spec.tableRole&&/table/i.test(e.type.spec.tableRole)}))}(e),r=i.TableMap.get(n.node),o=t.pos-n.start;return r.rectBetween(o,o)}},H=function(e,t){return function(n){var r=[],o=R(e)(n.selection);if(o)for(var i=o.length-1;i>=0;i--)t(o[i],n)&&r.push(o[i]);return r}};t.isNodeSelection=c,t.canInsert=g,t.findParentNode=w,t.findParentNodeClosestToPos=_,t.findParentDomRef=S,t.hasParentNode=k,t.findParentNodeOfType=x,t.findParentNodeOfTypeClosestToPos=function(e,t){return _(e,(function(e){return u(t,e)}))},t.hasParentNodeOfType=function(e){return function(t){return k((function(t){return u(e,t)}))(t)}},t.findParentDomRefOfType=function(e,t){return function(n){return S((function(t){return u(e,t)}),t)(n)}},t.findSelectedNodeOfType=function(e){return function(t){if(c(t)){var n=t.node,r=t.$from;if(u(e,n))return{node:n,pos:r.pos,depth:r.depth}}}},t.findPositionOfNodeBefore=O,t.findDomRefAtPos=C,t.flatten=M,t.findChildren=E,t.findTextNodes=function(e,t){return E(e,(function(e){return e.isText}),t)},t.findInlineNodes=function(e,t){return E(e,(function(e){return e.isInline}),t)},t.findBlockNodes=function(e,t){return E(e,(function(e){return e.isBlock}),t)},t.findChildrenByAttr=function(e,t,n){return E(e,(function(e){return!!t(e.attrs)}),n)},t.findChildrenByType=N,t.findChildrenByMark=function(e,t,n){return E(e,(function(e){return t.isInSet(e.marks)}),n)},t.contains=function(e,t){return!!N(e,t).length},t.findTable=T,t.isCellSelection=A,t.getSelectionRect=function(e){if(A(e)){var t=e.$anchorCell.start(-1);return i.TableMap.get(e.$anchorCell.node(-1)).rectBetween(e.$anchorCell.pos-t,e.$headCell.pos-t)}},t.isColumnSelected=function(e){return function(t){if(A(t)){var n=i.TableMap.get(t.$anchorCell.node(-1));return b({left:e,right:e+1,top:0,bottom:n.height})(t)}return!1}},t.isRowSelected=function(e){return function(t){if(A(t)){var n=i.TableMap.get(t.$anchorCell.node(-1));return b({left:0,right:n.width,top:e,bottom:e+1})(t)}return!1}},t.isTableSelected=D,t.getCellsInColumn=P,t.getCellsInRow=R,t.getCellsInTable=I,t.selectColumn=function(e){return function(t){var n=P(e)(t.selection);if(n){var r=t.doc.resolve(n[0].pos),o=t.doc.resolve(n[n.length-1].pos);return h(t.setSelection(new i.CellSelection(r,o)))}return t}},t.selectRow=function(e){return function(t){var n=R(e)(t.selection);if(n){var r=t.doc.resolve(n[0].pos),o=t.doc.resolve(n[n.length-1].pos);return h(t.setSelection(new i.CellSelection(r,o)))}return t}},t.selectTable=function(e){var t=I(e.selection);if(t){var n=e.doc.resolve(t[0].pos),r=e.doc.resolve(t[t.length-1].pos);return h(e.setSelection(new i.CellSelection(n,r)))}return e},t.emptyCell=function(e,t){return function(n){if(e){var r=m(t).cell.createAndFill().content;if(!e.node.content.eq(r))return n.replaceWith(e.pos,e.pos+e.node.nodeSize-1,new o.Slice(r,0,0)),h(n)}return n}},t.addColumnAt=function(e){return function(t){var n=T(t.selection);if(n){var r=i.TableMap.get(n.node);if(e>=0&&e<=r.width)return h(i.addColumn(t,{map:r,tableStart:n.start,table:n.node},e))}return t}},t.addRowAt=function(e,t){return function(n){var r=T(n.selection);if(r){var o=i.TableMap.get(r.node),s=e-1;if(t&&s>=0)return h(z(s)(n));if(e>=0&&e<=o.height)return h(i.addRow(n,{map:o,tableStart:r.start,table:r.node},e))}return n}},t.cloneRowAt=z,t.removeColumnAt=j,t.removeRowAt=B,t.removeTable=F,t.removeSelectedColumns=function(e){var t=e.selection;if(D(t))return F(e);if(A(t)){var n=T(t);if(n){var r=i.TableMap.get(n.node),o=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==o.left&&o.right==r.width)return!1;for(var s=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),l=s.right-1;i.removeColumn(e,s,l),l!==s.left;l--)s.table=s.tableStart?e.doc.nodeAt(s.tableStart-1):e.doc,s.map=i.TableMap.get(s.table);return h(e)}}return e},t.removeSelectedRows=function(e){var t=e.selection;if(D(t))return F(e);if(A(t)){var n=T(t);if(n){var r=i.TableMap.get(n.node),o=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==o.top&&o.bottom==r.height)return!1;for(var s=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),l=s.bottom-1;i.removeRow(e,s,l),l!==s.top;l--)s.table=s.tableStart?e.doc.nodeAt(s.tableStart-1):e.doc,s.map=i.TableMap.get(s.table);return h(e)}}return e},t.removeColumnClosestToPos=function(e){return function(t){var n=L(e);return n?j(n.left)(l(e.pos)(t)):t}},t.removeRowClosestToPos=function(e){return function(t){var n=L(e);return n?B(n.top)(l(e.pos)(t)):t}},t.forEachCellInColumn=function(e,t,n){return function(o){var i=P(e)(o.selection);if(i){for(var s=i.length-1;s>=0;s--)o=t(i[s],o);if(n){var l=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(r.Selection.near(l))}return h(o)}return o}},t.forEachCellInRow=function(e,t,n){return function(o){var i=R(e)(o.selection);if(i){for(var s=i.length-1;s>=0;s--)o=t(i[s],o);if(n){var l=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(r.Selection.near(l))}}return o}},t.setCellAttrs=$,t.createTable=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=m(e),s=i.cell,l=i.header_cell,a=i.row,c=i.table,u=[],h=[],d=0;d<n;d++)u.push(y(s,o)),r&&h.push(y(l,o));for(var f=[],p=0;p<t;p++)f.push(a.createChecked(null,r&&0===p?h:u));return c.createChecked(null,f)},t.findCellClosestToPos=V,t.findCellRectClosestToPos=L,t.getSelectionRangeInColumn=function(e){return function(t){for(var n=e,r=e,o=function(e){P(e)(t.selection).forEach((function(t){var o=t.node.attrs.colspan+e-1;o>=n&&(n=e),o>r&&(r=o)}))},i=e;i>=0;i--)o(i);var s=function(e){P(e)(t.selection).forEach((function(t){var n=t.node.attrs.colspan+e-1;t.node.attrs.colspan>1&&n>r&&(r=n)}))};for(i=e;i<=r;i++)s(i);var l=[];for(i=n;i<=r;i++){var a=P(i)(t.selection);a&&a.length&&l.push(i)}n=l[0],r=l[l.length-1];for(var c=P(n)(t.selection),u=R(0)(t.selection),h=t.doc.resolve(c[c.length-1].pos),d=void 0,f=r;f>=n;f--){var p=P(f)(t.selection);if(p&&p.length){for(var m=u.length-1;m>=0;m--)if(u[m].pos===p[0].pos){d=p[0];break}if(d)break}}return{$anchor:h,$head:t.doc.resolve(d.pos),indexes:l}}},t.getSelectionRangeInRow=function(e){return function(t){for(var n=e,r=e,o=function(e){R(e)(t.selection).forEach((function(t){var o=t.node.attrs.rowspan+e-1;o>=n&&(n=e),o>r&&(r=o)}))},i=e;i>=0;i--)o(i);var s=function(e){R(e)(t.selection).forEach((function(t){var n=t.node.attrs.rowspan+e-1;t.node.attrs.rowspan>1&&n>r&&(r=n)}))};for(i=e;i<=r;i++)s(i);var l=[];for(i=n;i<=r;i++){var a=R(i)(t.selection);a&&a.length&&l.push(i)}n=l[0],r=l[l.length-1];for(var c=R(n)(t.selection),u=P(0)(t.selection),h=t.doc.resolve(c[c.length-1].pos),d=void 0,f=r;f>=n;f--){var p=R(f)(t.selection);if(p&&p.length){for(var m=u.length-1;m>=0;m--)if(u[m].pos===p[0].pos){d=p[0];break}if(d)break}}return{$anchor:h,$head:t.doc.resolve(d.pos),indexes:l}}},t.removeParentNodeOfType=function(e){return function(t){var n=x(e)(t.selection);return n?p(n.pos)(t):t}},t.replaceParentNodeOfType=s,t.removeSelectedNode=function(e){if(c(e.selection)){var t=e.selection.$from.pos,n=e.selection.$to.pos;return h(e.delete(t,n))}return e},t.replaceSelectedNode=function(e){return function(t){if(c(t.selection)){var n=t.selection,r=n.$from,o=n.$to;if(r.parent.canReplaceWith(r.index(),r.indexAfter(),e.type))return h(t.replaceWith(r.pos,o.pos,e))}return t}},t.setTextSelection=l,t.safeInsert=a,t.setParentNodeMarkup=function(e,t,n,r){return function(o){var i=x(e)(o.selection);return i?h(o.setNodeMarkup(i.pos,t,Object.assign({},i.node.attrs,n),r)):o}},t.selectParentNodeOfType=function(e){return function(t){if(!c(t.selection)){var n=x(e)(t.selection);if(n)return h(t.setSelection(r.NodeSelection.create(t.doc,n.pos)))}return t}},t.removeNodeBefore=function(e){var t=O(e.selection);return"number"==typeof t?p(t)(e):e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=n(1),s=n(7),l=n(0),a=n(2),c=n(10);if("undefined"!=typeof WeakMap){var u=new WeakMap;r=function(e){return u.get(e)},o=function(e,t){return u.set(e,t),t}}else{var h=[],d=0;r=function(e){for(var t=0;t<h.length;t+=2)if(h[t]==e)return h[t+1]},o=function(e,t){return 10==d&&(d=0),h[d++]=e,h[d++]=t}}var f=function(e,t,n,r){this.left=e,this.top=t,this.right=n,this.bottom=r},p=function(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r};function m(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],n=0;n<e.colspan;n++)t.push(0);return t}p.prototype.findCell=function(e){for(var t=0;t<this.map.length;t++){var n=this.map[t];if(n==e){for(var r=t%this.width,o=t/this.width|0,i=r+1,s=o+1,l=1;i<this.width&&this.map[t+l]==n;l++)i++;for(var a=1;s<this.height&&this.map[t+this.width*a]==n;a++)s++;return new f(r,o,i,s)}}throw new RangeError("No cell with offset "+e+" found")},p.prototype.colCount=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")},p.prototype.nextCell=function(e,t,n){var r=this.findCell(e),o=r.left,i=r.right,s=r.top,l=r.bottom;return"horiz"==t?(n<0?0==o:i==this.width)?null:this.map[s*this.width+(n<0?o-1:i)]:(n<0?0==s:l==this.height)?null:this.map[o+this.width*(n<0?s-1:l)]},p.prototype.rectBetween=function(e,t){var n=this.findCell(e),r=n.left,o=n.right,i=n.top,s=n.bottom,l=this.findCell(t),a=l.left,c=l.right,u=l.top,h=l.bottom;return new f(Math.min(r,a),Math.min(i,u),Math.max(o,c),Math.max(s,h))},p.prototype.cellsInRect=function(e){for(var t=[],n={},r=e.top;r<e.bottom;r++)for(var o=e.left;o<e.right;o++){var i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,o==e.left&&o&&this.map[i-1]==s||r==e.top&&r&&this.map[i-this.width]==s||t.push(s))}return t},p.prototype.positionAt=function(e,t,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==e){for(var s=t+e*this.width,l=(e+1)*this.width;s<l&&this.map[s]<o;)s++;return s==l?i-1:this.map[s]}o=i}},p.get=function(e){return r(e)||o(e,function(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=function(e){for(var t=-1,n=!1,r=0;r<e.childCount;r++){var o=e.child(r),i=0;if(n)for(var s=0;s<r;s++)for(var l=e.child(s),a=0;a<l.childCount;a++){var c=l.child(a);s+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}for(var u=0;u<o.childCount;u++){var h=o.child(u);i+=h.attrs.colspan,h.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}(e),n=e.childCount,r=[],o=0,i=null,s=[],l=0,a=t*n;l<a;l++)r[l]=0;for(var c=0,u=0;c<n;c++){var h=e.child(c);u++;for(var d=0;;d++){for(;o<r.length&&0!=r[o];)o++;if(d==h.childCount)break;for(var f=h.child(d),g=f.attrs,v=g.colspan,y=g.rowspan,b=g.colwidth,w=0;w<y;w++){if(w+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:y-w});break}for(var _=o+w*t,S=0;S<v;S++){0==r[_+S]?r[_+S]=u:(i||(i=[])).push({type:"collision",row:c,pos:u,n:v-S});var k=b&&b[S];if(k){var x=(_+S)%t*2,O=s[x];null==O||O!=k&&1==s[x+1]?(s[x]=k,s[x+1]=1):O==k&&s[x+1]++}}}o+=v,u+=f.nodeSize}for(var C=(c+1)*t,M=0;o<C;)0==r[o++]&&M++;M&&(i||(i=[])).push({type:"missing",row:c,n:M}),u++}for(var E=new p(t,n,r,i),N=!1,T=0;!N&&T<s.length;T+=2)null!=s[T]&&s[T+1]<n&&(N=!0);N&&function(e,t,n){e.problems||(e.problems=[]);for(var r=0,o={};r<e.map.length;r++){var i=e.map[r];if(!o[i]){o[i]=!0;for(var s=n.nodeAt(i),l=null,a=0;a<s.attrs.colspan;a++){var c=(r+a)%e.width,u=t[2*c];null==u||s.attrs.colwidth&&s.attrs.colwidth[a]==u||((l||(l=m(s.attrs)))[a]=u)}l&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:l})}}}(E,s,e);return E}(e))};var g=new i.PluginKey("selectingCells");function v(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function y(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function b(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&"cell"==t.node.type.spec.tableRole?t.$anchor:v(t.$head)||function(e){for(var t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){var r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(var o=e.nodeBefore,i=e.pos;o;o=o.lastChild,i--){var s=o.type.spec.tableRole;if("cell"==s||"header_cell"==s)return e.doc.resolve(i-o.nodeSize)}}(t.$head)}function w(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function _(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function S(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function k(e,t,n){var r=e.start(-1),o=p.get(e.node(-1)).nextCell(e.pos-r,t,n);return null==o?null:e.node(0).resolve(r+o)}function x(e,t,n){var r={};for(var o in e)r[o]=e[o];return r[t]=n,r}function O(e,t,n){void 0===n&&(n=1);var r=x(e,"colspan",e.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some((function(e){return e>0}))||(r.colwidth=null)),r}function C(e,t,n){void 0===n&&(n=1);var r=x(e,"colspan",e.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(t,0,0)}return r}var M=function(e){function t(t,n){void 0===n&&(n=t);var r=t.node(-1),o=p.get(r),s=t.start(-1),l=o.rectBetween(t.pos-s,n.pos-s),a=t.node(0),c=o.cellsInRect(l).filter((function(e){return e!=n.pos-s}));c.unshift(n.pos-s);var u=c.map((function(e){var t=r.nodeAt(e),n=e+s+1;return new i.SelectionRange(a.resolve(n),a.resolve(n+t.content.size))}));e.call(this,u[0].$from,u[0].$to,u),this.$anchorCell=t,this.$headCell=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(e,n){var r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(w(r)&&w(o)&&S(r,o)){var s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?t.rowSelection(r,o):s&&this.isColSelection()?t.colSelection(r,o):new t(r,o)}return i.TextSelection.between(r,o)},t.prototype.content=function(){for(var e=this.$anchorCell.node(-1),t=p.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[],s=r.top;s<r.bottom;s++){for(var a=[],c=s*t.width+r.left,u=r.left;u<r.right;u++,c++){var h=t.map[c];if(!o[h]){o[h]=!0;var d=t.findCell(h),f=e.nodeAt(h),m=r.left-d.left,g=d.right-r.right;if(m>0||g>0){var v=f.attrs;m>0&&(v=O(v,0,m)),g>0&&(v=O(v,v.colspan-g,g)),f=d.left<r.left?f.type.createAndFill(v):f.type.create(v,f.content)}if(d.top<r.top||d.bottom>r.bottom){var y=x(f.attrs,"rowspan",Math.min(d.bottom,r.bottom)-Math.max(d.top,r.top));f=d.top<r.top?f.type.createAndFill(y):f.type.create(y,f.content)}a.push(f)}}i.push(e.child(s).copy(l.Fragment.from(a)))}var b=this.isColSelection()&&this.isRowSelection()?e:i;return new l.Slice(l.Fragment.from(b),1,1)},t.prototype.replace=function(t,n){void 0===n&&(n=l.Slice.empty);for(var r=t.steps.length,o=this.ranges,i=0;i<o.length;i++){var s=o[i],a=s.$from,c=s.$to,u=t.mapping.slice(r);t.replace(u.map(a.pos),u.map(c.pos),i?l.Slice.empty:n)}var h=e.findFrom(t.doc.resolve(t.mapping.slice(r).map(this.to)),-1);h&&t.setSelection(h)},t.prototype.replaceWith=function(e,t){this.replace(e,new l.Slice(l.Fragment.from(t),0,0))},t.prototype.forEachCell=function(e){for(var t=this.$anchorCell.node(-1),n=p.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])},t.prototype.isColSelection=function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},t.colSelection=function(e,n){void 0===n&&(n=e);var r=p.get(e.node(-1)),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(n.pos-o),l=e.node(0);return i.top<=s.top?(i.top>0&&(e=l.resolve(o+r.map[i.left])),s.bottom<r.height&&(n=l.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=l.resolve(o+r.map[s.left])),i.bottom<r.height&&(e=l.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new t(e,n)},t.prototype.isRowSelection=function(){var e=p.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),n=e.colCount(this.$anchorCell.pos-t),r=e.colCount(this.$headCell.pos-t);if(Math.min(n,r)>0)return!1;var o=n+this.$anchorCell.nodeAfter.attrs.colspan,i=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,i)==e.width},t.prototype.eq=function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos},t.rowSelection=function(e,n){void 0===n&&(n=e);var r=p.get(e.node(-1)),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(n.pos-o),l=e.node(0);return i.left<=s.left?(i.left>0&&(e=l.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(n=l.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=l.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(e=l.resolve(o+r.map[r.width*(i.top+1)-1]))),new t(e,n)},t.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},t.fromJSON=function(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))},t.create=function(e,n,r){return void 0===r&&(r=n),new t(e.resolve(n),e.resolve(r))},t.prototype.getBookmark=function(){return new E(this.$anchorCell.pos,this.$headCell.pos)},t}(i.Selection);M.prototype.visible=!1,i.Selection.jsonID("cell",M);var E=function(e,t){this.anchor=e,this.head=t};function N(e){if(!(e.selection instanceof M))return null;var t=[];return e.selection.forEachCell((function(e,n){t.push(s.Decoration.node(n,n+e.nodeSize,{class:"selectedCell"}))})),s.DecorationSet.create(e.doc,t)}function T(e,t){var n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((function(e){return Number(e)})):null,o=Number(e.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(var s in t){var l=t[s].getFromDOM,a=l&&l(e);null!=a&&(i[s]=a)}return i}function A(e,t){var n={};for(var r in 1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(",")),t){var o=t[r].setDOMAttr;o&&o(e.attrs[r],n)}return n}function D(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}return t}function P(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,r=e.openEnd;1==t.childCount&&(n>0&&r>0||"table"==t.firstChild.type.spec.tableRole);)n--,r--,t=t.firstChild.content;var o=t.firstChild,i=o.type.spec.tableRole,s=o.type.schema,a=[];if("row"==i)for(var c=0;c<t.childCount;c++){var u=t.child(c).content,h=c?0:Math.max(0,n-1),d=c<t.childCount-1?0:Math.max(0,r-1);(h||d)&&(u=R(D(s).row,new l.Slice(u,h,d)).content),a.push(u)}else{if("cell"!=i&&"header_cell"!=i)return null;a.push(n||r?R(D(s).row,new l.Slice(t,n,r)).content:t)}return function(e,t){for(var n=[],r=0;r<t.length;r++)for(var o=t[r],i=o.childCount-1;i>=0;i--)for(var s=o.child(i).attrs,a=s.rowspan,c=s.colspan,u=r;u<r+a;u++)n[u]=(n[u]||0)+c;for(var h=0,d=0;d<n.length;d++)h=Math.max(h,n[d]);for(var f=0;f<n.length;f++)if(f>=t.length&&t.push(l.Fragment.empty),n[f]<h){for(var p=D(e).cell.createAndFill(),m=[],g=n[f];g<h;g++)m.push(p);t[f]=t[f].append(l.Fragment.from(m))}return{height:t.length,width:h,rows:t}}(s,a)}function R(e,t){var n=e.createAndFill();return new a.Transform(n).replace(0,n.content.size,t).doc}function I(e,t,n){var r=e.width,o=e.height,i=e.rows;if(r!=t){for(var s=[],a=[],c=0;c<i.length;c++){for(var u=i[c],h=[],d=s[c]||0,f=0;d<t;f++){var p=u.child(f%u.childCount);d+p.attrs.colspan>t&&(p=p.type.create(O(p.attrs,p.attrs.colspan,d+p.attrs.colspan-t),p.content)),h.push(p),d+=p.attrs.colspan;for(var m=1;m<p.attrs.rowspan;m++)s[c+m]=(s[c+m]||0)+p.attrs.colspan}a.push(l.Fragment.from(h))}i=a,r=t}if(o!=n){for(var g=[],v=0,y=0;v<n;v++,y++){for(var b=[],w=i[y%o],_=0;_<w.childCount;_++){var S=w.child(_);v+S.attrs.rowspan>n&&(S=S.type.create(x(S.attrs,"rowspan",n-S.attrs.rowspan),S.content)),b.push(S)}g.push(l.Fragment.from(b))}i=g,o=n}return{width:r,height:o,rows:i}}function z(e,t,n,r,o,i,s,l){if(0==s||s==t.height)return!1;for(var a=!1,c=o;c<i;c++){var u=s*t.width+c,h=t.map[u];if(t.map[u-t.width]==h){a=!0;var d=n.nodeAt(h),f=t.findCell(h),p=f.top,m=f.left;e.setNodeMarkup(e.mapping.slice(l).map(h+r),null,x(d.attrs,"rowspan",s-p)),e.insert(e.mapping.slice(l).map(t.positionAt(s,m,n)),d.type.createAndFill(x(d.attrs,"rowspan",p+d.attrs.rowspan-s))),c+=d.attrs.colspan-1}}return a}function j(e,t,n,r,o,i,s,l){if(0==s||s==t.width)return!1;for(var a=!1,c=o;c<i;c++){var u=c*t.width+s,h=t.map[u];if(t.map[u-1]==h){a=!0;var d=n.nodeAt(h),f=t.colCount(h),p=e.mapping.slice(l).map(h+r);e.setNodeMarkup(p,null,O(d.attrs,s-f,d.attrs.colspan-(s-f))),e.insert(p+d.nodeSize,d.type.createAndFill(O(d.attrs,0,s-f))),c+=d.attrs.rowspan-1}}return a}function B(e,t,n,r,o){var i=n?e.doc.nodeAt(n-1):e.doc,s=p.get(i),a=r.top,c=r.left,u=c+o.width,h=a+o.height,d=e.tr,f=0;function m(){i=n?d.doc.nodeAt(n-1):d.doc,s=p.get(i),f=d.mapping.maps.length}(function(e,t,n,r,o,i,s){var a,c,u=D(e.doc.type.schema);if(o>t.width)for(var h=0,d=0;h<t.height;h++){var f=n.child(h);d+=f.nodeSize;var p=[],m=void 0;m=null==f.lastChild||f.lastChild.type==u.cell?a||(a=u.cell.createAndFill()):c||(c=u.header_cell.createAndFill());for(var g=t.width;g<o;g++)p.push(m);e.insert(e.mapping.slice(s).map(d-1+r),p)}if(i>t.height){for(var v=[],y=0,b=(t.height-1)*t.width;y<Math.max(t.width,o);y++){var w=!(y>=t.width)&&n.nodeAt(t.map[b+y]).type==u.header_cell;v.push(w?c||(c=u.header_cell.createAndFill()):a||(a=u.cell.createAndFill()))}for(var _=u.row.create(null,l.Fragment.from(v)),S=[],k=t.height;k<i;k++)S.push(_);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),S)}return!(!a&&!c)})(d,s,i,n,u,h,f)&&m(),z(d,s,i,n,c,u,a,f)&&m(),z(d,s,i,n,c,u,h,f)&&m(),j(d,s,i,n,a,h,c,f)&&m(),j(d,s,i,n,a,h,u,f)&&m();for(var g=a;g<h;g++){var v=s.positionAt(g,c,i),y=s.positionAt(g,u,i);d.replace(d.mapping.slice(f).map(v+n),d.mapping.slice(f).map(y+n),new l.Slice(o.rows[g-a],0,0))}m(),d.setSelection(new M(d.doc.resolve(n+s.positionAt(a,c,i)),d.doc.resolve(n+s.positionAt(h-1,u-1,i)))),t(d)}E.prototype.map=function(e){return new E(e.map(this.anchor),e.map(this.head))},E.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&S(t,n)?new M(t,n):i.Selection.near(n,1)};var F=c.keydownHandler({ArrowLeft:V("horiz",-1),ArrowRight:V("horiz",1),ArrowUp:V("vert",-1),ArrowDown:V("vert",1),"Shift-ArrowLeft":L("horiz",-1),"Shift-ArrowRight":L("horiz",1),"Shift-ArrowUp":L("vert",-1),"Shift-ArrowDown":L("vert",1),Backspace:H,"Mod-Backspace":H,Delete:H,"Mod-Delete":H});function $(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function V(e,t){return function(n,r,o){var s=n.selection;if(s instanceof M)return $(n,r,i.Selection.near(s.$headCell,t));if("horiz"!=e&&!s.empty)return!1;var l=K(o,e,t);if(null==l)return!1;if("horiz"==e)return $(n,r,i.Selection.near(n.doc.resolve(s.head+t),t));var a,c=n.doc.resolve(l),u=k(c,e,t);return a=u?i.Selection.near(u,1):t<0?i.Selection.near(n.doc.resolve(c.before(-1)),-1):i.Selection.near(n.doc.resolve(c.after(-1)),1),$(n,r,a)}}function L(e,t){return function(n,r,o){var i=n.selection;if(!(i instanceof M)){var s=K(o,e,t);if(null==s)return!1;i=new M(n.doc.resolve(s))}var l=k(i.$headCell,e,t);return!!l&&$(n,r,new M(i.$anchorCell,l))}}function H(e,t){var n=e.selection;if(!(n instanceof M))return!1;if(t){var r=e.tr,o=D(e.schema).cell.createAndFill().content;n.forEachCell((function(e,t){e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new l.Slice(o,0,0))})),r.docChanged&&t(r)}return!0}function q(e,t){var n=v(e.state.doc.resolve(t));return!!n&&(e.dispatch(e.state.tr.setSelection(new M(n))),!0)}function W(e,t,n){if(!y(e.state))return!1;var r=P(n),o=e.state.selection;if(o instanceof M){r||(r={width:1,height:1,rows:[l.Fragment.from(R(D(e.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),a=p.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=I(r,a.right-a.left,a.bottom-a.top),B(e.state,e.dispatch,s,a,r),!0}if(r){var c=b(e.state),u=c.start(-1);return B(e.state,e.dispatch,u,p.get(c.node(-1)).findCell(c.pos-u),r),!0}return!1}function J(e,t){if(!t.ctrlKey&&!t.metaKey){var n,r=U(e,t.target);if(t.shiftKey&&e.state.selection instanceof M)o(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(n=v(e.state.selection.$anchor))&&G(e,t).pos!=n.pos)o(n,t),t.preventDefault();else if(!r)return;e.root.addEventListener("mouseup",i),e.root.addEventListener("dragstart",i),e.root.addEventListener("mousemove",s)}function o(t,n){var r=G(e,n),o=null==g.getState(e.state);if(!r||!S(t,r)){if(!o)return;r=t}var i=new M(t,r);if(o||!e.state.selection.eq(i)){var s=e.state.tr.setSelection(i);o&&s.setMeta(g,t.pos),e.dispatch(s)}}function i(){e.root.removeEventListener("mouseup",i),e.root.removeEventListener("dragstart",i),e.root.removeEventListener("mousemove",s),null!=g.getState(e.state)&&e.dispatch(e.state.tr.setMeta(g,-1))}function s(n){var s,l=g.getState(e.state);if(null!=l)s=e.state.doc.resolve(l);else if(U(e,n.target)!=r&&!(s=G(e,t)))return i();s&&o(s,n)}}function K(e,t,n){if(!(e.state.selection instanceof i.TextSelection))return null;for(var r=e.state.selection.$head,o=r.depth-1;o>=0;o--){var s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){var l=r.before(o),a="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(a)?l:null}}return null}function U(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t}function G(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?v(e.state.doc.resolve(n.pos)):null}function Q(e,t){var n,r=function(t,r){"table"==t.type.spec.tableRole&&(n=function(e,t,n,r){var o=p.get(t);if(!o.problems)return r;r||(r=e.tr);for(var i,s,l=[],a=0;a<o.height;a++)l.push(0);for(var c=0;c<o.problems.length;c++){var u=o.problems[c];if("collision"==u.type){for(var h=t.nodeAt(u.pos),d=0;d<h.attrs.rowspan;d++)l[u.row+d]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,O(h.attrs,h.attrs.colspan-u.n,u.n))}else if("missing"==u.type)l[u.row]+=u.n;else if("overlong_rowspan"==u.type){var f=t.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,x(f.attrs,"rowspan",f.attrs.rowspan-u.n))}else if("colwidth mismatch"==u.type){var m=t.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,x(m.attrs,"colwidth",u.colwidth))}}for(var g=0;g<l.length;g++)l[g]&&(null==i&&(i=g),s=g);for(var v=0,y=n+1;v<o.height;v++){var b=t.child(v),w=y+b.nodeSize,_=l[v];if(_>0){var S="cell";b.firstChild&&(S=b.firstChild.type.spec.tableRole);for(var k=[],C=0;C<_;C++)k.push(D(e.schema)[S].createAndFill());var M=0!=v&&i!=v-1||s!=v?w-1:y+1;r.insert(r.mapping.map(M),k)}y=w}return r}(e,t,r,n))};return t?t.doc!=e.doc&&function e(t,n,r,o){var i=t.childCount,s=n.childCount;e:for(var l=0,a=0;l<s;l++){for(var c=n.child(l),u=a,h=Math.min(i,l+3);u<h;u++)if(t.child(u)==c){a=u+1,r+=c.nodeSize;continue e}o(c,r),a<i&&t.child(a).sameMarkup(c)?e(t.child(a),c,r+1,o):c.nodesBetween(0,c.content.size,o,r+1),r+=c.nodeSize}}(t.doc,e.doc,0,r):e.doc.descendants(r),n}function Y(e){var t,n=e.selection,r=b(e),o=r.node(-1),i=r.start(-1),s=p.get(o);return(t=n instanceof M?s.rectBetween(n.$anchorCell.pos-i,n.$headCell.pos-i):s.findCell(r.pos-i)).tableStart=i,t.map=s,t.table=o,t}function Z(e,t,n){var r=t.map,o=t.tableStart,i=t.table,s=n>0?-1:0;(function(e,t,n){for(var r=D(t.type.schema).header_cell,o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0})(r,i,n+s)&&(s=0==n||n==r.width?null:0);for(var l=0;l<r.height;l++){var a=l*r.width+n;if(n>0&&n<r.width&&r.map[a-1]==r.map[a]){var c=r.map[a],u=i.nodeAt(c);e.setNodeMarkup(e.mapping.map(o+c),null,C(u.attrs,n-r.colCount(c))),l+=u.attrs.rowspan-1}else{var h=null==s?D(i.type.schema).cell:i.nodeAt(r.map[a+s]).type,d=r.positionAt(l,n,i);e.insert(e.mapping.map(o+d),h.createAndFill())}}return e}function X(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,s=e.mapping.maps.length,l=0;l<r.height;){var a=l*r.width+n,c=r.map[a],u=o.nodeAt(c);if(n>0&&r.map[a-1]==c||n<r.width-1&&r.map[a+1]==c)e.setNodeMarkup(e.mapping.slice(s).map(i+c),null,O(u.attrs,n-r.colCount(c)));else{var h=e.mapping.slice(s).map(i+c);e.delete(h,h+u.nodeSize)}l+=u.attrs.rowspan}}function ee(e,t,n){for(var r=t.map,o=t.tableStart,i=t.table,s=o,l=0;l<n;l++)s+=i.child(l).nodeSize;var a=[],c=n>0?-1:0;(function(e,t,n){for(var r=D(t.type.schema).header_cell,o=0;o<e.width;o++)if(t.nodeAt(e.map[o+n*e.width]).type!=r)return!1;return!0})(r,i,n+c)&&(c=0==n||n==r.height?null:0);for(var u=0,h=r.width*n;u<r.width;u++,h++)if(n>0&&n<r.height&&r.map[h]==r.map[h-r.width]){var d=r.map[h],f=i.nodeAt(d).attrs;e.setNodeMarkup(o+d,null,x(f,"rowspan",f.rowspan+1)),u+=f.colspan-1}else{var p=null==c?D(i.type.schema).cell:i.nodeAt(r.map[h+c*r.width]).type;a.push(p.createAndFill())}return e.insert(s,D(i.type.schema).row.create(null,a)),e}function te(e,t,n){for(var r=t.map,o=t.table,i=t.tableStart,s=0,l=0;l<n;l++)s+=o.child(l).nodeSize;var a=s+o.child(n).nodeSize,c=e.mapping.maps.length;e.delete(s+i,a+i);for(var u=0,h=n*r.width;u<r.width;u++,h++){var d=r.map[h];if(n>0&&d==r.map[h-r.width]){var f=o.nodeAt(d).attrs;e.setNodeMarkup(e.mapping.slice(c).map(d+i),null,x(f,"rowspan",f.rowspan-1)),u+=f.colspan-1}else if(n<r.width&&d==r.map[h+r.width]){var p=o.nodeAt(d),m=p.type.create(x(p.attrs,"rowspan",p.attrs.rowspan-1),p.content),g=r.positionAt(n+1,u,o);e.insert(e.mapping.slice(c).map(i+g),m),u+=p.attrs.colspan-1}}}function ne(e){var t=e.content;return 1==t.childCount&&t.firstChild.isTextblock&&0==t.firstChild.childCount}function re(e,t,n){for(var r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1}),o=0;o<r.length;o++){var i=t.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function oe(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(e){return function(t,n){if(!y(t))return!1;if(n){for(var r=D(t.schema),o=Y(t),i=t.tr,s=o.map.cellsInRect("column"==e?new f(o.left,0,o.right,o.map.height):"row"==e?new f(0,o.top,o.map.width,o.bottom):o),l=s.map((function(e){return o.table.nodeAt(e)})),a=0;a<s.length;a++)l[a].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[a],r.cell,l[a].attrs);if(0==i.steps.length)for(var c=0;c<s.length;c++)i.setNodeMarkup(o.tableStart+s[c],r.header_cell,l[c].attrs);n(i)}return!0}}(e):function(t,n){if(!y(t))return!1;if(n){var r=D(t.schema),o=Y(t),i=t.tr,s=re("row",o,r),l=re("column",o,r),a=("column"===e?s:"row"===e&&l)?1:0,c="column"==e?new f(0,a,1,o.map.height):"row"==e?new f(a,0,o.map.width,1):o,u="column"==e?l?r.cell:r.header_cell:"row"==e?s?r.cell:r.header_cell:r.cell;o.map.cellsInRect(c).forEach((function(e){var t=e+o.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,u,n.attrs)})),n(i)}return!0}}var ie=oe("row",{useDeprecatedLogic:!0}),se=oe("column",{useDeprecatedLogic:!0}),le=oe("cell",{useDeprecatedLogic:!0});var ae=function(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),ce(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function ce(e,t,n,r,o,i){for(var s=0,l=!0,a=t.firstChild,c=e.firstChild,u=0,h=0;u<c.childCount;u++)for(var d=c.child(u).attrs,f=d.colspan,p=d.colwidth,m=0;m<f;m++,h++){var g=o==h?i:p&&p[m],v=g?g+"px":"";s+=g||r,g||(l=!1),a?(a.style.width!=v&&(a.style.width=v),a=a.nextSibling):t.appendChild(document.createElement("col")).style.width=v}for(;a;){var y=a.nextSibling;a.parentNode.removeChild(a),a=y}l?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}ae.prototype.update=function(e){return e.type==this.node.type&&(this.node=e,ce(e,this.colgroup,this.table,this.cellMinWidth),!0)},ae.prototype.ignoreMutation=function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))};var ue=new i.PluginKey("tableColumnResizing");var he=function(e,t){this.activeHandle=e,this.dragging=t};function de(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY}).pos,o=v(e.state.doc.resolve(r));if(!o)return-1;if("right"==n)return o.pos;var i=p.get(o.node(-1)),s=o.start(-1),l=i.map.indexOf(o.pos-s);return l%i.width==0?-1:s+i.map[l-1]}function fe(e,t,n){var r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function pe(e,t){e.dispatch(e.state.tr.setMeta(ue,{setHandle:t}))}function me(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}he.prototype.apply=function(e){var t=this,n=e.getMeta(ue);if(n&&null!=n.setHandle)return new he(n.setHandle,null);if(n&&void 0!==n.setDragging)return new he(t.activeHandle,n.setDragging);if(t.activeHandle>-1&&e.docChanged){var r=e.mapping.map(t.activeHandle,-1);w(e.doc.resolve(r))||(r=null),t=new he(r,t.dragging)}return t},t.tableEditing=function(e){void 0===e&&(e={});var t=e.allowTableNodeSelection;return void 0===t&&(t=!1),new i.Plugin({key:g,state:{init:function(){return null},apply:function(e,t){var n=e.getMeta(g);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;var r=e.mapping.mapResult(t),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:N,handleDOMEvents:{mousedown:J},createSelectionBetween:function(e){if(null!=g.getState(e.state))return e.state.selection},handleTripleClick:q,handleKeyDown:F,handlePaste:W},appendTransaction:function(e,n,r){return function(e,t,n){var r,o,s=(t||e).selection,l=(t||e).doc;if(s instanceof i.NodeSelection&&(o=s.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)r=M.create(l,s.from);else if("row"==o){var a=l.resolve(s.from+1);r=M.rowSelection(a,a)}else if(!n){var c=p.get(s.node),u=s.from+1,h=u+c.map[c.width*c.height-1];r=M.create(l,u+1,h)}}else s instanceof i.TextSelection&&function(e){var t=e.$from,n=e.$to;if(t.pos==n.pos||t.pos<t.pos-6)return!1;for(var r=t.pos,o=n.pos,i=t.depth;i>=0&&!(t.after(i+1)<t.end(i));i--,r++);for(var s=n.depth;s>=0&&!(n.before(s+1)>n.start(s));s--,o--);return r==o&&/row|table/.test(t.node(i).type.spec.tableRole)}(s)?r=i.TextSelection.create(l,s.from):s instanceof i.TextSelection&&function(e){for(var t,n,r=e.$from,o=e.$to,i=r.depth;i>0;i--){var s=r.node(i);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){t=s;break}}for(var l=o.depth;l>0;l--){var a=o.node(l);if("cell"===a.type.spec.tableRole||"header_cell"===a.type.spec.tableRole){n=a;break}}return t!==n&&0===o.parentOffset}(s)&&(r=i.TextSelection.create(l,s.$from.start(),s.$from.end()));return r&&(t||(t=e.tr)).setSelection(r),t}(r,Q(r,n),t)}})},t.fixTables=Q,t.handlePaste=W,t.cellAround=v,t.isInTable=y,t.selectionCell=b,t.moveCellForward=_,t.inSameTable=S,t.findCell=function(e){return p.get(e.node(-1)).findCell(e.pos-e.start(-1))},t.colCount=function(e){return p.get(e.node(-1)).colCount(e.pos-e.start(-1))},t.nextCell=k,t.tableNodes=function(e){var t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in t)n[r]={default:t[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(e){return T(e,t)}}],toDOM:function(e){return["td",A(e,t),0]}},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(e){return T(e,t)}}],toDOM:function(e){return["th",A(e,t),0]}}}},t.CellSelection=M,t.TableMap=p,t.columnResizing=function(e){void 0===e&&(e={});var t=e.handleWidth;void 0===t&&(t=5);var n=e.cellMinWidth;void 0===n&&(n=25);var r=e.View;void 0===r&&(r=ae);var o=e.lastColumnResizable;return void 0===o&&(o=!0),new i.Plugin({key:ue,state:{init:function(e,t){return this.spec.props.nodeViews[D(t.schema).table.name]=function(e,t){return new r(e,n,t)},new he(-1,!1)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){return ue.getState(e).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(e,n){!function(e,t,n,r,o){var i=ue.getState(e.state);if(!i.dragging){var s=function(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}(t.target),l=-1;if(s){var a=s.getBoundingClientRect(),c=a.left,u=a.right;t.clientX-c<=n?l=de(e,t,"left"):u-t.clientX<=n&&(l=de(e,t,"right"))}if(l!=i.activeHandle){if(!o&&-1!==l){var h=e.state.doc.resolve(l),d=h.node(-1),f=p.get(d),m=h.start(-1);if(f.colCount(h.pos-m)+h.nodeAfter.attrs.colspan-1==f.width-1)return}pe(e,l)}}}(e,n,t,0,o)},mouseleave:function(e){!function(e){var t=ue.getState(e.state);t.activeHandle>-1&&!t.dragging&&pe(e,-1)}(e)},mousedown:function(e,t){!function(e,t,n){var r=ue.getState(e.state);if(-1==r.activeHandle||r.dragging)return!1;var o=e.state.doc.nodeAt(r.activeHandle),i=function(e,t,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var s=e.domAtPos(t),l=s.node.childNodes[s.offset].offsetWidth,a=r;if(o)for(var c=0;c<r;c++)o[c]&&(l-=o[c],a--);return l/a}(e,r.activeHandle,o.attrs);function s(t){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",l);var r=ue.getState(e.state);r.dragging&&(!function(e,t,n){for(var r=e.state.doc.resolve(t),o=r.node(-1),i=p.get(o),s=r.start(-1),l=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,a=e.state.tr,c=0;c<i.height;c++){var u=c*i.width+l;if(!c||i.map[u]!=i.map[u-i.width]){var h=i.map[u],d=o.nodeAt(h).attrs,f=1==d.colspan?0:l-i.colCount(h);if(!d.colwidth||d.colwidth[f]!=n){var m=d.colwidth?d.colwidth.slice():me(d.colspan);m[f]=n,a.setNodeMarkup(s+h,null,x(d,"colwidth",m))}}}a.docChanged&&e.dispatch(a)}(e,r.activeHandle,fe(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(ue,{setDragging:null})))}function l(t){if(!t.which)return s(t);var r=ue.getState(e.state),o=fe(r.dragging,t,n);!function(e,t,n,r){var o=e.state.doc.resolve(t),i=o.node(-1),s=o.start(-1),l=p.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,a=e.domAtPos(o.start(-1)).node;for(;"TABLE"!=a.nodeName;)a=a.parentNode;ce(i,a.firstChild,a,r,l,n)}(e,r.activeHandle,o,n)}e.dispatch(e.state.tr.setMeta(ue,{setDragging:{startX:t.clientX,startWidth:i}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",l),t.preventDefault()}(e,t,n)}},decorations:function(e){var t=ue.getState(e);if(t.activeHandle>-1)return function(e,t){for(var n=[],r=e.doc.resolve(t),o=r.node(-1),i=p.get(o),l=r.start(-1),a=i.colCount(r.pos-l)+r.nodeAfter.attrs.colspan,c=0;c<i.height;c++){var u=a+c*i.width-1;if(!(a!=i.width&&i.map[u]==i.map[u+1]||0!=c&&i.map[u-1]==i.map[u-1-i.width])){var h=i.map[u],d=l+h+o.nodeAt(h).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",n.push(s.Decoration.widget(d,f))}}return s.DecorationSet.create(e.doc,n)}(e,t.activeHandle)},nodeViews:{}}})},t.columnResizingPluginKey=ue,t.updateColumnsOnResize=ce,t.__pastedCells=P,t.__insertCells=B,t.__clipCells=I,t.addColumn=Z,t.addColumnBefore=function(e,t){if(!y(e))return!1;if(t){var n=Y(e);t(Z(e.tr,n,n.left))}return!0},t.addColumnAfter=function(e,t){if(!y(e))return!1;if(t){var n=Y(e);t(Z(e.tr,n,n.right))}return!0},t.removeColumn=X,t.deleteColumn=function(e,t){if(!y(e))return!1;if(t){var n=Y(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var o=n.right-1;X(r,n,o),o!=n.left;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=p.get(n.table);t(r)}return!0},t.addRow=ee,t.addRowBefore=function(e,t){if(!y(e))return!1;if(t){var n=Y(e);t(ee(e.tr,n,n.top))}return!0},t.addRowAfter=function(e,t){if(!y(e))return!1;if(t){var n=Y(e);t(ee(e.tr,n,n.bottom))}return!0},t.removeRow=te,t.deleteRow=function(e,t){if(!y(e))return!1;if(t){var n=Y(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;te(r,n,o),o!=n.top;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=p.get(n.table);t(r)}return!0},t.mergeCells=function(e,t){var n=e.selection;if(!(n instanceof M)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=Y(e),o=r.map;if(function(e,t){for(var n=e.width,r=e.height,o=e.map,i=t.top*n+t.left,s=i,l=(t.bottom-1)*n+t.left,a=i+(t.right-t.left-1),c=t.top;c<t.bottom;c++){if(t.left>0&&o[s]==o[s-1]||t.right<n&&o[a]==o[a+1])return!0;s+=n,a+=n}for(var u=t.left;u<t.right;u++){if(t.top>0&&o[i]==o[i-n]||t.bottom<r&&o[l]==o[l+n])return!0;i++,l++}return!1}(o,r))return!1;if(t){for(var i,s,a=e.tr,c={},u=l.Fragment.empty,h=r.top;h<r.bottom;h++)for(var d=r.left;d<r.right;d++){var f=o.map[h*o.width+d],p=r.table.nodeAt(f);if(!c[f])if(c[f]=!0,null==i)i=f,s=p;else{ne(p)||(u=u.append(p.content));var m=a.mapping.map(f+r.tableStart);a.delete(m,m+p.nodeSize)}}if(a.setNodeMarkup(i+r.tableStart,null,x(C(s.attrs,s.attrs.colspan,r.right-r.left-s.attrs.colspan),"rowspan",r.bottom-r.top)),u.size){var g=i+1+s.content.size,v=ne(s)?i+1:g;a.replaceWith(v+r.tableStart,g+r.tableStart,u)}a.setSelection(new M(a.doc.resolve(i+r.tableStart))),t(a)}return!0},t.splitCell=function(e,t){var n,r,o=e.selection;if(o instanceof M){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;n=o.$anchorCell.nodeAfter,r=o.$anchorCell.pos}else{if(!(n=function(e){for(var t=e.depth-1;t>0;t--){var n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}(o.$from)))return!1;r=v(o.$from).pos}if(1==n.attrs.colspan&&1==n.attrs.rowspan)return!1;if(t){var i=n.attrs,s=[],l=i.colwidth;i.rowspan>1&&(i=x(i,"rowspan",1)),i.colspan>1&&(i=x(i,"colspan",1));for(var a=Y(e),c=e.tr,u=0;u<a.right-a.left;u++)s.push(l?x(i,"colwidth",l&&l[u]?[l[u]]:null):i);for(var h,d=D(e.schema)[n.type.spec.tableRole],f=0;f<a.bottom;f++)if(f>=a.top){var p=a.map.positionAt(f,a.left,a.table);f==a.top&&(p+=n.nodeSize);for(var m=a.left,g=0;m<a.right;m++,g++)m==a.left&&f==a.top||c.insert(h=c.mapping.map(p+a.tableStart,1),d.createAndFill(s[g]))}c.setNodeMarkup(r,null,s[0]),o instanceof M&&c.setSelection(new M(c.doc.resolve(o.$anchorCell.pos),h&&c.doc.resolve(h))),t(c)}return!0},t.setCellAttr=function(e,t){return function(n,r){if(!y(n))return!1;var o=b(n);if(o.nodeAfter.attrs[e]===t)return!1;if(r){var i=n.tr;n.selection instanceof M?n.selection.forEachCell((function(n,r){n.attrs[e]!==t&&i.setNodeMarkup(r,null,x(n.attrs,e,t))})):i.setNodeMarkup(o.pos,null,x(o.nodeAfter.attrs,e,t)),r(i)}return!0}},t.toggleHeader=oe,t.toggleHeaderRow=ie,t.toggleHeaderColumn=se,t.toggleHeaderCell=le,t.goToNextCell=function(e){return function(t,n){if(!y(t))return!1;var r=function(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,o=e.before();r>=0;r--){var i=e.node(-1).child(r);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var s=e.node(-1),l=e.indexAfter(-1),a=e.after();l<s.childCount;l++){var c=s.child(l);if(c.childCount)return a+1;a+=c.nodeSize}}}(b(t),e);if(null!=r){if(n){var o=t.doc.resolve(r);n(t.tr.setSelection(i.TextSelection.between(o,_(o))).scrollIntoView())}return!0}}},t.deleteTable=function(e,t){for(var n=e.selection.$anchor,r=n.depth;r>0;r--){if("table"==n.node(r).type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}},function(e,t,n){"use strict";n.r(t),n.d(t,"keydownHandler",(function(){return p})),n.d(t,"keymap",(function(){return f}));for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},i="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),s="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),l=0;l<10;l++)r[48+l]=r[96+l]=String(l);for(l=1;l<=24;l++)r[l+111]="F"+l;for(l=65;l<=90;l++)r[l]=String.fromCharCode(l+32),o[l]=String.fromCharCode(l);for(var a in r)o.hasOwnProperty(a)||(o[a]=r[a]);var c=n(1);const u="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function h(e){let t,n,r,o,i=e.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(let e=0;e<i.length-1;e++){let s=i[e];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))r=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: "+s);u?o=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function d(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function f(e){return new c.Plugin({props:{handleKeyDown:p(e)}})}function p(e){let t=function(e){let t=Object.create(null);for(let n in e)t[h(n)]=e[n];return t}(e);return function(e,n){let l,a=function(e){var t=!(i&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||s&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?o:r)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),c=t[d(a,n)];if(c&&c(e.state,e.dispatch,e))return!0;if(1==a.length&&" "!=a){if(n.shiftKey){let r=t[d(a,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||a.charCodeAt(0)>127)&&(l=r[n.keyCode])&&l!=a){let r=t[d(l,n)];if(r&&r(e.state,e.dispatch,e))return!0}}return!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_PRIORITY=t.CUSTOM_BLOCK_PRIORITY=t.CUSTOM_MARK_PRIORITY=void 0,t.CUSTOM_MARK_PRIORITY="51",t.CUSTOM_BLOCK_PRIORITY="51",t.BASE_PRIORITY="50"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(14);t.default=function(e){return"label"===e.tag?r.createElement("label",{style:e.style,className:o.default(e.className,"smartblock-btn",{"is-active":e.active,"is-black":"black"===e.color,"is-disabled":e.disabled})},e.children):r.createElement("button",{type:e.type,style:e.style,onClick:e.onClick,className:o.default(e.className,"smartblock-btn",{"is-active":e.active,"is-black":"black"===e.color,"is-disabled":e.disabled})},e.children)}},function(e,t,n){var r=n(15),o=n(16);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var l=0;l<16;++l)t[i+l]=s[l];return t||o(s)}},function(e,t,n){var r;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var s=o.apply(null,r);s&&e.push(s)}}else if("object"===i){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var l in r)n.call(r,l)&&r[l]&&e.push(l)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"left"),o.createElement("g",{id:"a8ace68f-5ddd-4a81-982f-c99649c8d782","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("rect",{width:1792,height:256}),o.createElement("rect",{y:512,width:1152,height:256}),o.createElement("rect",{y:1536,width:1152,height:256}),o.createElement("rect",{y:1024,width:1792,height:256})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"center"),o.createElement("g",{id:"bfe5ce98-ed3f-4197-9845-64f060ce92c6","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("rect",{width:1792,height:256}),o.createElement("rect",{x:320,y:512,width:1152,height:256}),o.createElement("rect",{x:320,y:1536,width:1152,height:256}),o.createElement("rect",{y:1024,width:1792,height:256})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"right"),o.createElement("g",{id:"b944651b-fd76-4b8a-8459-b94e3d6fe7d4","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("rect",{width:1792,height:256}),o.createElement("rect",{x:640,y:512,width:1152,height:256}),o.createElement("rect",{x:640,y:1536,width:1152,height:256}),o.createElement("rect",{y:1024,width:1792,height:256})))}},function(e,t,n){"use strict";n.r(t),n.d(t,"addListNodes",(function(){return f})),n.d(t,"bulletList",(function(){return u})),n.d(t,"liftListItem",(function(){return g})),n.d(t,"listItem",(function(){return h})),n.d(t,"orderedList",(function(){return c})),n.d(t,"sinkListItem",(function(){return v})),n.d(t,"splitListItem",(function(){return m})),n.d(t,"wrapInList",(function(){return p}));var r=n(2),o=n(0),i=n(1);const s=["ol",0],l=["ul",0],a=["li",0],c={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:e=>({order:e.hasAttribute("start")?+e.getAttribute("start"):1})}],toDOM:e=>1==e.attrs.order?s:["ol",{start:e.attrs.order},0]},u={parseDOM:[{tag:"ul"}],toDOM:()=>l},h={parseDOM:[{tag:"li"}],toDOM:()=>a,defining:!0};function d(e,t){let n={};for(let t in e)n[t]=e[t];for(let e in t)n[e]=t[e];return n}function f(e,t,n){return e.append({ordered_list:d(c,{content:"list_item+",group:n}),bullet_list:d(u,{content:"list_item+",group:n}),list_item:d(h,{content:t})})}function p(e,t=null){return function(n,i){let{$from:s,$to:l}=n.selection,a=s.blockRange(l),c=!1,u=a;if(!a)return!1;if(a.depth>=2&&s.node(a.depth-1).type.compatibleContent(e)&&0==a.startIndex){if(0==s.index(a.depth-1))return!1;let e=n.doc.resolve(a.start-2);u=new o.NodeRange(e,e,a.depth),a.endIndex<a.parent.childCount&&(a=new o.NodeRange(s,n.doc.resolve(l.end(a.depth)),a.depth)),c=!0}let h=Object(r.findWrapping)(u,e,t,a);return!!h&&(i&&i(function(e,t,n,i,s){let l=o.Fragment.empty;for(let e=n.length-1;e>=0;e--)l=o.Fragment.from(n[e].type.create(n[e].attrs,l));e.step(new r.ReplaceAroundStep(t.start-(i?2:0),t.end,t.start,t.end,new o.Slice(l,0,0),n.length,!0));let a=0;for(let e=0;e<n.length;e++)n[e].type==s&&(a=e+1);let c=n.length-a,u=t.start+n.length-(i?2:0),h=t.parent;for(let n=t.startIndex,o=t.endIndex,i=!0;n<o;n++,i=!1)!i&&Object(r.canSplit)(e.doc,u,c)&&(e.split(u,c),u+=2*c),u+=h.child(n).nodeSize;return e}(n.tr,a,h,c,e).scrollIntoView()),!0)}}function m(e,t){return function(n,s){let{$from:l,$to:a,node:c}=n.selection;if(c&&c.isBlock||l.depth<2||!l.sameParent(a))return!1;let u=l.node(-1);if(u.type!=e)return!1;if(0==l.parent.content.size&&l.node(-1).childCount==l.indexAfter(-1)){if(3==l.depth||l.node(-3).type!=e||l.index(-2)!=l.node(-2).childCount-1)return!1;if(s){let t=o.Fragment.empty,r=l.index(-1)?1:l.index(-2)?2:3;for(let e=l.depth-r;e>=l.depth-3;e--)t=o.Fragment.from(l.node(e).copy(t));let a=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3;t=t.append(o.Fragment.from(e.createAndFill()));let c=l.before(l.depth-(r-1)),u=n.tr.replace(c,l.after(-a),new o.Slice(t,4-r,0)),h=-1;u.doc.nodesBetween(c,u.doc.content.size,(e,t)=>{if(h>-1)return!1;e.isTextblock&&0==e.content.size&&(h=t+1)}),h>-1&&u.setSelection(i.Selection.near(u.doc.resolve(h))),s(u.scrollIntoView())}return!0}let h=a.pos==l.end()?u.contentMatchAt(0).defaultType:null,d=n.tr.delete(l.pos,a.pos),f=h?[t?{type:e,attrs:t}:null,{type:h}]:void 0;return!!Object(r.canSplit)(d.doc,l.pos,2,f)&&(s&&s(d.split(l.pos,2,f).scrollIntoView()),!0)}}function g(e){return function(t,n){let{$from:i,$to:s}=t.selection,l=i.blockRange(s,t=>t.childCount>0&&t.firstChild.type==e);return!!l&&(!n||(i.node(l.depth-1).type==e?function(e,t,n,i){let s=e.tr,l=i.end,a=i.$to.end(i.depth);l<a&&(s.step(new r.ReplaceAroundStep(l-1,a,l,a,new o.Slice(o.Fragment.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new o.NodeRange(s.doc.resolve(i.$from.pos),s.doc.resolve(a),i.depth));const c=Object(r.liftTarget)(i);if(null==c)return!1;s.lift(i,c);let u=s.mapping.map(l,-1)-1;Object(r.canJoin)(s.doc,u)&&s.join(u);return t(s.scrollIntoView()),!0}(t,n,e,l):function(e,t,n){let i=e.tr,s=n.parent;for(let e=n.end,t=n.endIndex-1,r=n.startIndex;t>r;t--)e-=s.child(t).nodeSize,i.delete(e-1,e+1);let l=i.doc.resolve(n.start),a=l.nodeAfter;if(i.mapping.map(n.end)!=n.start+l.nodeAfter.nodeSize)return!1;let c=0==n.startIndex,u=n.endIndex==s.childCount,h=l.node(-1),d=l.index(-1);if(!h.canReplace(d+(c?0:1),d+1,a.content.append(u?o.Fragment.empty:o.Fragment.from(s))))return!1;let f=l.pos,p=f+a.nodeSize;return i.step(new r.ReplaceAroundStep(f-(c?1:0),p+(u?1:0),f+1,p-1,new o.Slice((c?o.Fragment.empty:o.Fragment.from(s.copy(o.Fragment.empty))).append(u?o.Fragment.empty:o.Fragment.from(s.copy(o.Fragment.empty))),c?0:1,u?0:1),c?0:1)),t(i.scrollIntoView()),!0}(t,n,l)))}}function v(e){return function(t,n){let{$from:i,$to:s}=t.selection,l=i.blockRange(s,t=>t.childCount>0&&t.firstChild.type==e);if(!l)return!1;let a=l.startIndex;if(0==a)return!1;let c=l.parent,u=c.child(a-1);if(u.type!=e)return!1;if(n){let i=u.lastChild&&u.lastChild.type==c.type,s=o.Fragment.from(i?e.create():null),a=new o.Slice(o.Fragment.from(e.create(null,o.Fragment.from(c.type.create(null,s)))),i?3:1,0),h=l.start,d=l.end;n(t.tr.step(new r.ReplaceAroundStep(h-(i?3:1),d,h,d,a,1,!0)).scrollIntoView())}return!0}}},function(e,t,n){"use strict";n.r(t),n.d(t,"closeHistory",(function(){return b})),n.d(t,"history",(function(){return S})),n.d(t,"redo",(function(){return x})),n.d(t,"redoDepth",(function(){return C})),n.d(t,"undo",(function(){return k})),n.d(t,"undoDepth",(function(){return O}));var r=function(){};r.prototype.append=function(e){return e.length?(e=r.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},r.prototype.prepend=function(e){return e.length?r.from(e).append(this):this},r.prototype.appendInner=function(e){return new i(this,e)},r.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?r.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},r.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},r.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},r.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},r.from=function(e){return e instanceof r?e:e&&e.length?new o(e):r.empty};var o=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(r);r.empty=new o([]);var i=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(r),s=r,l=n(2),a=n(1);class c{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,o=this.items.length;for(;;o--){if(this.items.get(o-1).selection){--o;break}}t&&(n=this.remapping(o,this.items.length),r=n.maps.length);let i,s,l=e.tr,a=[],h=[];return this.items.forEach((e,t)=>{if(!e.step)return n||(n=this.remapping(o,t+1),r=n.maps.length),r--,void h.push(e);if(n){h.push(new u(e.map));let t,o=e.step.map(n.slice(r));o&&l.maybeStep(o).doc&&(t=l.mapping.maps[l.mapping.maps.length-1],a.push(new u(t,void 0,void 0,a.length+h.length))),r--,t&&n.appendMap(t,r)}else l.maybeStep(e.step);return e.selection?(i=n?e.selection.map(n.slice(r)):e.selection,s=new c(this.items.slice(0,o).append(h.reverse().concat(a)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:s,transform:l,selection:i}}addTransform(e,t,n,r){let o=[],i=this.eventCount,s=this.items,l=!r&&s.length?s.get(s.length-1):null;for(let n=0;n<e.steps.length;n++){let a,c=e.steps[n].invert(e.docs[n]),h=new u(e.mapping.maps[n],c,t);(a=l&&l.merge(h))&&(h=a,n?o.pop():s=s.slice(0,s.length-1)),o.push(h),t&&(i++,t=void 0),r||(l=h)}let a=i-n.depth;return a>d&&(s=function(e,t){let n;return e.forEach((e,r)=>{if(e.selection&&0==t--)return n=r,!1}),e.slice(n)}(s,a),i-=a),new c(s.append(o),i)}remapping(e,t){let n=new l.Mapping;return this.items.forEach((t,r)=>{let o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,o)},e,t),n}addMaps(e){return 0==this.eventCount?this:new c(this.items.append(e.map(e=>new u(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,s=this.eventCount;this.items.forEach(e=>{e.selection&&s--},r);let l=t;this.items.forEach(t=>{let r=o.getMirror(--l);if(null==r)return;i=Math.min(i,r);let a=o.maps[r];if(t.step){let i=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(o.slice(l+1,r));c&&s++,n.push(new u(a,i,c))}else n.push(new u(a))},r);let a=[];for(let e=t;e<i;e++)a.push(new u(o.maps[e]));let h=this.items.slice(0,r).append(a).append(n),d=new c(h,s);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-n.length)),d}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach((i,s)=>{if(s>=e)r.push(i),i.selection&&o++;else if(i.step){let e=i.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let l=i.selection&&i.selection.map(t.slice(n));l&&o++;let a,c=new u(s.invert(),e,l),h=r.length-1;(a=r.length&&r[h].merge(c))?r[h]=a:r.push(c)}}else i.map&&n--},this.items.length,0),new c(s.from(r.reverse()),o)}}c.empty=new c(s.empty,0);class u{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new u(t.getMap().invert(),t,this.selection)}}}class h{constructor(e,t,n,r,o){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=o}}const d=20;function f(e){let t=[];return e.forEach((e,n,r,o)=>t.push(r,o)),t}function p(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function m(e,t,n,r){let o=y(t),i=w.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,o);if(!s)return;let l=s.selection.resolve(s.transform.doc),a=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,o),c=new h(r?a:s.remaining,r?s.remaining:a,null,0,-1);n(s.transform.setSelection(l).setMeta(w,{redo:r,historyState:c}).scrollIntoView())}let g=!1,v=null;function y(e){let t=e.plugins;if(v!=t){g=!1,v=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){g=!0;break}}return g}function b(e){return e.setMeta(_,!0)}const w=new a.PluginKey("history"),_=new a.PluginKey("closeHistory");function S(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new a.Plugin({key:w,state:{init:()=>new h(c.empty,c.empty,null,0,-1),apply:(t,n,r)=>function(e,t,n,r){let o,i=n.getMeta(w);if(i)return i.historyState;n.getMeta(_)&&(e=new h(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(w))return s.getMeta(w).redo?new h(e.done.addTransform(n,void 0,r,y(t)),e.undone,f(n.mapping.maps[n.steps.length-1]),e.prevTime,e.prevComposition):new h(e.done,e.undone.addTransform(n,void 0,r,y(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new h(e.done.rebased(n,o),e.undone.rebased(n,o),p(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new h(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),p(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let o=n.getMeta("composition"),i=0==e.prevTime||!s&&e.prevComposition!=o&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,r)=>{for(let o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)}),n}(n,e.prevRanges)),l=s?p(e.prevRanges,n.mapping):f(n.mapping.maps[n.steps.length-1]);return new h(e.done.addTransform(n,i?t.selection.getBookmark():void 0,r,y(t)),c.empty,l,n.time,null==o?e.prevComposition:o)}}(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?k:"historyRedo"==n?x:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}const k=(e,t)=>{let n=w.getState(e);return!(!n||0==n.done.eventCount)&&(t&&m(n,e,t,!1),!0)},x=(e,t)=>{let n=w.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&m(n,e,t,!0),!0)};function O(e){let t=w.getState(e);return t?t.done.eventCount:0}function C(e){let t=w.getState(e);return t?t.undone.eventCount:0}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"undent"),o.createElement("g",{id:"a764fb61-3cf8-4b9f-a74f-23b3c42c41ce","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("rect",{width:1792,height:256}),o.createElement("rect",{x:768.29,y:512,width:1023.71,height:256}),o.createElement("rect",{x:768.29,y:1024.39,width:1023.71,height:256}),o.createElement("rect",{y:1536,width:1792,height:256}),o.createElement("polygon",{points:"512 901.03 512 1331.01 256 1116.02 0 901.03 256 686.04 512 471.05 512 901.03"})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"indent"),o.createElement("g",{id:"ac1ed596-8266-4a57-ae73-f333649eaa23","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("rect",{width:1792,height:256}),o.createElement("rect",{x:768,y:512,width:1024,height:256}),o.createElement("rect",{x:768,y:1024.39,width:1024,height:256}),o.createElement("rect",{y:1536,width:1792,height:256}),o.createElement("polygon",{points:"0.14 897.51 0.14 467.54 256.13 682.52 512.13 897.51 256.13 1112.5 0.14 1327.49 0.14 897.51"})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({x:"0px",y:"0px",width:"1792px",height:"1792px",viewBox:"0 0 1792 1792",enableBackground:"new 0 0 1792 1792",xmlSpace:"preserve"},e),o.createElement("g",{id:"Guide"}),o.createElement("g",{id:"Font",display:"none"}),o.createElement("g",{id:"\\u5185\\u5BB9"},o.createElement("g",null,o.createElement("path",{d:"M1543.609,519.916c0.051-0.052,0.104-0.101,0.156-0.152c74.98-74.98,74.98-196.547,0-271.527 c-74.981-74.981-196.548-74.982-271.53-0.001v0.001l-0.001-0.002L765.536,754.932C731.335,626.83,764.446,484.496,864.942,384 l271.529-271.529c149.96-149.961,393.096-149.961,543.058,0c149.961,149.961,149.961,393.098,0,543.059L1408,927.059 c-100.497,100.498-242.834,133.608-370.938,99.404L1543.609,519.916z"}),o.createElement("path",{d:"M112.47,1136.471L384,864.941c100.496-100.497,242.83-133.607,370.933-99.405l-330.226,330.226l0.001,0.001 l-176.473,176.473c-74.98,74.981-74.98,196.548,0,271.528c74.981,74.981,196.548,74.981,271.529,0l271.528-271.529v-0.001 l235.17-235.17c34.203,128.103,1.091,270.439-99.405,370.937l-271.53,271.529c-149.96,149.961-393.095,149.961-543.056,0 C-37.49,1529.567-37.49,1286.432,112.47,1136.471z"}),o.createElement("path",{d:"M1061.49,549.49c23.164-23.163,55.164-37.49,90.51-37.49c70.692,0,128,57.308,128,128c0,35.346-14.327,67.346-37.49,90.51 l-511.779,511.779l-0.004-0.003C707.547,1265.58,675.459,1280,640,1280c-70.693,0-128-57.308-128-128 c0-36.001,14.868-68.525,38.793-91.782l-0.015-0.016L1061.49,549.49z"}))),o.createElement("g",{id:"\\u30E9\\u30D9\\u30EB"}),o.createElement("g",{id:"Unicode",display:"none"},o.createElement("text",{transform:"matrix(1 0 0 1 437.0635 964.2812)",display:"inline",fill:"#ED1E79",fontFamily:"'ArialMT'",fontSize:256},"U+F724")))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:21.722,height:21.722,viewBox:"0 0 21.722 21.722"},e),o.createElement("path",{id:"\\u30D1\\u30B9_52","data-name":"\\u30D1\\u30B9 52",d:"M0,0V9.2H17.521",transform:"translate(1.414 13.803) rotate(-45)",fill:"none",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2}))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(5),l=n(13),a=n(32),c=n(17),u=n(18),h=n(19),d=n(6),f=n(4),p=n(12),m=n(11),g=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"paragraph"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return"block"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=this;return this.customSchema?this.customSchema:{type:this.name,content:"inline*",group:"block",attrs:{align:{default:""},id:{default:""}},parseDOM:[{tag:"p",priority:m.BASE_PRIORITY,getAttrs:function(e){return{id:e.getAttribute("id")||l(),align:e.style.textAlign}}}],toDOM:function(t){return["p",t.attrs.align?{style:"text-align: "+t.attrs.align,id:t.attrs.id||l(),class:e.className}:{id:t.attrs.id||l(),class:e.className},0]}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return i.createElement(a.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),t.prototype.active=function(e){return f.blockActive(e.schema.nodes.paragraph)(e)},t.prototype.enable=function(e){return s.setBlockType(e.schema.nodes.paragraph)(e)},t.prototype.customMenu=function(e){var t=e.state,n=e.dispatch,r=f.getParentNodeFromState(t);return i.createElement(i.Fragment,null,i.createElement(p.default,{type:"button",active:r&&"left"===r.attrs.align,onClick:function(){s.setBlockType(t.schema.nodes.paragraph,{align:"left"})(t,n)}},i.createElement(c.default,{style:{width:"24px",height:"24px"}})),i.createElement(p.default,{type:"button",active:r&&"center"===r.attrs.align,onClick:function(){s.setBlockType(t.schema.nodes.paragraph,{align:"center"})(t,n)}},i.createElement(u.default,{style:{width:"24px",height:"24px"}})),i.createElement(p.default,{type:"button",active:r&&"right"===r.attrs.align,onClick:function(){s.setBlockType(t.schema.nodes.paragraph,{align:"right"})(t,n)}},i.createElement(h.default,{style:{width:"24px",height:"24px"}})))},t.prototype.onClick=function(e,t){s.setBlockType(e.schema.nodes.paragraph)(e,t)},t}(d.Extension);t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(8),i=n(33),s=n(34),l=function(){function e(e){void 0===e&&(e={}),this.i18n={remove_block:"Are you sure you want to remove the block?"},e&&e.i18n&&(this.i18n=e.i18n)}return Object.defineProperty(e.prototype,"name",{get:function(){return"trash"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return"edit"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return r.createElement(i.default,{style:{width:"18px",height:"18px"}})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"btnColor",{get:function(){return"black"},enumerable:!1,configurable:!0}),e.prototype.onClick=function(e,t){var n=e.selection.$anchor,r=e.doc.resolve(n.pos).path[1],i=0,l=o.findChildren(e.doc,(function(e){return r===i?(i++,!0):(i++,!1)}),!1)[0],a=l.pos,c=e.tr.delete(a,a+l.node.content.size+2);s.default()?confirm(this.i18n.remove_block)&&t(c):t(c)},e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(8),i=n(35),s=n(4),l=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"move-up"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return"edit"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return r.createElement(i.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),e.prototype.enable=function(e){return s.getParentNodeIndexFromState(e)>=1},e.prototype.onClick=function(e,t,n){var r=n.state,i=s.getParentNodeIndexFromState(r),l=s.getRootNodeWithPosByIndex(r,i-1),a=s.getRootNodeWithPosByIndex(r,i);if(l){var c=l.pos,u=a.pos,h=r.tr.delete(c,u);n.dispatch(h);var d=h.doc.content.child(i-1),f=s.findNodePosition(h.doc,d),p=n.state.tr.insert(f+d.nodeSize,l.node);n.dispatch(p),n.dispatch(o.setTextSelection(f)(n.state.tr).scrollIntoView())}},e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(8),i=n(36),s=n(4),l=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"move-down"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return"edit"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return r.createElement(i.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),e.prototype.enable=function(e){var t=s.getRootNodeCountFromState(e);return s.getParentNodeIndexFromState(e)<t-1},e.prototype.onClick=function(e,t,n){var r=n.state,i=s.getParentNodeIndexFromState(r),l=s.getRootNodeWithPosByIndex(r,i),a=s.getRootNodeWithPosByIndex(r,i+1);if(a){var c=l.pos,u=a.pos,h=r.tr.delete(c,u);n.dispatch(h);var d=h.doc.content.child(i),f=s.findNodePosition(h.doc,d),p=n.state.tr.insert(f+d.nodeSize,l.node);n.dispatch(p),n.dispatch(o.setTextSelection(f+d.nodeSize)(n.state.tr).scrollIntoView())}},e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(37),o=n(21),i=n(9),s=n(1),l=n(5),a=n(4),c=function(e,t){var n=e.schema.nodes.hard_break.create();return t(e.tr.replaceSelectionWith(n).scrollIntoView()),!0},u={Enter:function(e,t,n){var r=e.selection.$anchor.nodeBefore,o=a.getParentNodeFromState(e);if("table"!==o.type.name)return"paragraph"!==o.type.name&&"blockquote"!==o.type.name&&"code"!==o.type.name||!r?(l.baseKeymap.Enter(e,t,n),!0):r&&r.type&&"hard_break"===r.type.name?!!function(e,t){var n=e.selection,r=n.$from,o=n.$to,i=r.parent.contentMatchAt(o.indexAfter()).defaultType;if(t){var l=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=e.tr.delete(n.from-1,n.from);t((a=(a=(a=a.insert(l,i.createAndFill())).setSelection(s.TextSelection.create(a.doc,l+1))).delete(l+1,l+2)).scrollIntoView())}return!0}(e,t):(c(e,t),!0);c(e,t)},"Mod-z":o.undo,"Shift-Mod-z":o.redo,Backspace:r.undoInputRule,"Mod-y":o.redo,"Alt-ArrowUp":l.joinUp,"Alt-ArrowDown":l.joinDown,"Mod-BracketLeft":l.lift,Escape:l.selectParentNode,"Mod-Enter":l.chainCommands(l.exitCode,c),"Shift-Enter":l.chainCommands(l.exitCode,c),"Ctrl-Enter":l.chainCommands(l.exitCode,c),"Mod-_":function(e,t){var n=e.schema.nodes.horizontal_rule.create();return t(e.tr.replaceSelectionWith(n).scrollIntoView()),!0},Tab:i.goToNextCell(1),"Shift-Tab":i.goToNextCell(-1)};Object.keys(l.baseKeymap).forEach((function(e){u[e]?"Enter"!==e&&(u[e]=l.chainCommands(u[e],l.baseKeymap[e])):u[e]=l.baseKeymap[e]}));var h=function(){function e(){}return Object.defineProperty(e.prototype,"name",{get:function(){return"default-keys"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showMenu",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.keys=function(){return u},e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),o=n(38),i=n(1),s=n(7),l=function(){function e(e){this.placeholder=e.placeholder}return Object.defineProperty(e.prototype,"name",{get:function(){return"default-plugins"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showMenu",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"plugins",{get:function(){return[new i.Plugin({props:{decorations:function(e){var t=e.selection,n=[];return e.doc.nodesBetween(t.from,t.to,(function(e,t){e.isBlock&&n.push(s.Decoration.node(t,t+e.nodeSize,{class:"selected"}))})),s.DecorationSet.create(e.doc,n)}}}),new i.Plugin({props:{decorations:function(e){var t=[],n=e.doc;return e.doc.descendants((function(e,r){1==n.childCount&&n.firstChild.isTextblock&&0==n.firstChild.content.size&&t.push(s.Decoration.node(r,r+e.nodeSize,{class:"empty-node"}))})),s.DecorationSet.create(e.doc,t)}}}),o.gapCursor(),r.history()]},enumerable:!1,configurable:!0}),e}();t.default=l},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"paragraph"),o.createElement("g",{id:"a4130921-6bd7-457e-b4c5-91ddb25bdaa4","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("path",{d:"M1558.45.27H778.13a544.68,544.68,0,0,0-212,1046.3,541.36,541.36,0,0,0,212,42.85h.75l87.12-1v703.34h256V256.27h100.87V1791.73h256V256.27h79.58Z"})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({x:"0px",y:"0px",width:"1792px",height:"1792px",viewBox:"0 0 1792 1792",enableBackground:"new 0 0 1792 1792",xmlSpace:"preserve"},e),o.createElement("g",{id:"Guide"}),o.createElement("g",{id:"Font",display:"none"}),o.createElement("g",{id:"\\u5185\\u5BB9"},o.createElement("g",null,o.createElement("path",{d:"M268.117,512c10.808,27.987,28.523,54.127,51.883,77.551V1664c0,70.692,57.308,128,128,128h896 c70.692,0,128-57.308,128-128V589.551c23.36-23.424,41.075-49.563,51.883-77.551H268.117z M768,1536c0,35.347-28.654,64-64,64 c-35.347,0-64-28.653-64-64V832c0-35.347,28.653-64,64-64c35.346,0,64,28.653,64,64V1536z M1152,1536c0,35.347-28.654,64-64,64 c-35.347,0-64-28.653-64-64V832c0-35.347,28.653-64,64-64c35.346,0,64,28.653,64,64V1536z"}),o.createElement("path",{d:"M1152,192h3V64c0-35.347-28.654-64-64-64c-2.024,0-4.023,0.105-6,0.289V0H704c-35.347,0-64,28.653-64,64v128 c-212.077,0-384,114.615-384,256h1280C1536,306.615,1364.077,192,1152,192z M1027,192H768v-64h259V192z"}))),o.createElement("g",{id:"\\u30EC\\u30A4\\u30E4\\u30FC_5",display:"none"}),o.createElement("g",{id:"Unicode",display:"none"},o.createElement("text",{transform:"matrix(1 0 0 1 437.063 964.2812)",display:"inline",fill:"#ED1E79",fontFamily:"'ArialMT'",fontSize:256},"U+F722")))}},function(e,t,n){"use strict";e.exports=i,e.exports.isMobile=i,e.exports.default=i;var r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(e){e||(e={});var t=e.ua;if(t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!=typeof t)return!1;var n=e.tablet?o.test(t):r.test(t);return!n&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(n=!0),n}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"switch (bottom)"),o.createElement("g",{id:"ab70919b-6878-4a79-bb69-55678e0e3bbe","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("polygon",{points:"448.1 763.79 784.68 427.21 784.68 1082.06 1007.89 1082.06 1007.89 427.21 1344.48 763.79 1502.31 605.96 896.35 0 896.29 0.06 896.23 0 290.27 605.96 448.1 763.79"}),o.createElement("rect",{y:1352,width:1792,height:440})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"switch (top)"),o.createElement("g",{id:"a03b19b5-be1e-427a-b872-29e082246f7b","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("polygon",{points:"1344.19 1028.21 1007.61 1364.79 1007.61 709.94 784.4 709.94 784.4 1364.79 447.81 1028.21 289.98 1186.04 895.94 1792 896 1791.94 896.06 1792 1502.02 1186.04 1344.19 1028.21"}),o.createElement("rect",{width:1792,height:440})))}},function(e,t,n){"use strict";n.r(t),n.d(t,"InputRule",(function(){return i})),n.d(t,"closeDoubleQuote",(function(){return d})),n.d(t,"closeSingleQuote",(function(){return p})),n.d(t,"ellipsis",(function(){return u})),n.d(t,"emDash",(function(){return c})),n.d(t,"inputRules",(function(){return s})),n.d(t,"openDoubleQuote",(function(){return h})),n.d(t,"openSingleQuote",(function(){return f})),n.d(t,"smartQuotes",(function(){return m})),n.d(t,"textblockTypeInputRule",(function(){return v})),n.d(t,"undoInputRule",(function(){return a})),n.d(t,"wrappingInputRule",(function(){return g}));var r=n(1),o=n(2);class i{constructor(e,t){var n;this.match=e,this.match=e,this.handler="string"==typeof t?(n=t,function(e,t,r,o){let i=n;if(t[1]){let e=t[0].lastIndexOf(t[1]);i+=t[0].slice(e+t[1].length);let n=(r+=e)-o;n>0&&(i=t[0].slice(e-n,e)+i,r=o)}return e.tr.insertText(i,r,o)}):t}}function s({rules:e}){let t=new r.Plugin({state:{init:()=>null,apply(e,t){let n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:(n,r,o,i)=>l(n,r,o,i,e,t),handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:r}=n.state.selection;r&&l(n,r.pos,r.pos,"",e,t)})}}},isInputRules:!0});return t}function l(e,t,n,r,o,i){if(e.composing)return!1;let s=e.state,l=s.doc.resolve(t);if(l.parent.type.spec.code)return!1;let a=l.parent.textBetween(Math.max(0,l.parentOffset-500),l.parentOffset,null,"")+r;for(let l=0;l<o.length;l++){let c=o[l].match.exec(a),u=c&&o[l].handler(s,c,t-(c[0].length-r.length),n);if(u)return e.dispatch(u.setMeta(i,{transform:u,from:t,to:n,text:r})),!0}return!1}const a=(e,t)=>{let n=e.plugins;for(let r=0;r<n.length;r++){let o,i=n[r];if(i.spec.isInputRules&&(o=i.getState(e))){if(t){let n=e.tr,r=o.transform;for(let e=r.steps.length-1;e>=0;e--)n.step(r.steps[e].invert(r.docs[e]));if(o.text){let t=n.doc.resolve(o.from).marks();n.replaceWith(o.from,o.to,e.schema.text(o.text,t))}else n.delete(o.from,o.to);t(n)}return!0}}return!1},c=new i(/--$/,""),u=new i(/\.\.\.$/,""),h=new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),d=new i(/"$/,""),f=new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),p=new i(/'$/,""),m=[h,d,f,p];function g(e,t,n=null,r){return new i(e,(e,i,s,l)=>{let a=n instanceof Function?n(i):n,c=e.tr.delete(s,l),u=c.doc.resolve(s).blockRange(),h=u&&Object(o.findWrapping)(u,t,a);if(!h)return null;c.wrap(u,h);let d=c.doc.resolve(s-1).nodeBefore;return d&&d.type==t&&Object(o.canJoin)(c.doc,s-1)&&(!r||r(i,d))&&c.join(s-1),c})}function v(e,t,n=null){return new i(e,(e,r,o,i)=>{let s=e.doc.resolve(o),l=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?e.tr.delete(o,i).setBlockType(o,o,t,l):null})}},function(e,t,n){"use strict";n.r(t),n.d(t,"GapCursor",(function(){return l})),n.d(t,"gapCursor",(function(){return c}));var r=n(10),o=n(1),i=n(0),s=n(7);class l extends o.Selection{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return l.valid(n)?new l(n):o.Selection.near(n)}content(){return i.Slice.empty}eq(e){return e instanceof l&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new l(e.resolve(t.pos))}getBookmark(){return new a(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0!=n)for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&l.valid(e))return e;let r=e.pos,i=null;for(let n=e.depth;;n--){let o=e.node(n);if(t>0?e.indexAfter(n)<o.childCount:e.index(n)>0){i=o.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let s=e.doc.resolve(r);if(l.valid(s))return s}for(;;){let s=t>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!o.NodeSelection.isSelectable(i)){e=e.doc.resolve(r+i.nodeSize*t),n=!1;continue e}break}i=s,r+=t;let a=e.doc.resolve(r);if(l.valid(a))return a}return null}}}l.prototype.visible=!1,l.findFrom=l.findGapCursorFrom,o.Selection.jsonID("gapcursor",l);class a{constructor(e){this.pos=e}map(e){return new a(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return l.valid(t)?new l(t):o.Selection.near(t)}}function c(){return new o.Plugin({props:{decorations:p,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&l.valid(n)?new l(n):null,handleClick:d,handleKeyDown:u,handleDOMEvents:{beforeinput:f}}})}const u=Object(r.keydownHandler)({ArrowLeft:h("horiz",-1),ArrowRight:h("horiz",1),ArrowUp:h("vert",-1),ArrowDown:h("vert",1)});function h(e,t){const n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,i){let s=e.selection,a=t>0?s.$to:s.$from,c=s.empty;if(s instanceof o.TextSelection){if(!i.endOfTextblock(n)||0==a.depth)return!1;c=!1,a=e.doc.resolve(t>0?a.after():a.before())}let u=l.findGapCursorFrom(a,t,c);return!!u&&(r&&r(e.tr.setSelection(new l(u))),!0)}}function d(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!l.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return!(i&&i.inside>-1&&o.NodeSelection.isSelectable(e.state.doc.nodeAt(i.inside)))&&(e.dispatch(e.state.tr.setSelection(new l(r))),!0)}function f(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof l))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let s=i.Fragment.empty;for(let e=r.length-1;e>=0;e--)s=i.Fragment.from(r[e].createAndFill(null,s));let a=e.state.tr.replace(n.pos,n.pos,new i.Slice(s,0,0));return a.setSelection(o.TextSelection.near(a.doc.resolve(n.pos+1))),e.dispatch(a),!1}function p(e){if(!(e.selection instanceof l))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",s.DecorationSet.create(e.doc,[s.Decoration.widget(e.selection.head,t,{key:"gapcursor"})])}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(5),l=n(13),a=n(40),c=n(17),u=n(18),h=n(19),d=n(6),f=n(4),p=n(12),m=n(11),g=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"heading2"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return"block"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=this;return this.customSchema?this.customSchema:{content:"inline*",group:"block",defining:!0,attrs:{align:{default:""},id:{default:""}},parseDOM:[{tag:"h2",priority:m.BASE_PRIORITY,getAttrs:function(e){return{id:e.getAttribute("id")||l()}}}],toDOM:function(t){return["h2",t.attrs.align?{style:"text-align: "+t.attrs.align,id:t.attrs.id||l(),class:e.className}:{id:t.attrs.id||l(),class:e.className},0]}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return i.createElement(a.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),t.prototype.active=function(e){return f.blockActive(e.schema.nodes.heading2)(e)},t.prototype.enable=function(e){return s.setBlockType(e.schema.nodes.heading2)(e)},t.prototype.customMenu=function(e){var t=e.state,n=e.dispatch,r=f.getParentNodeFromState(t);return i.createElement(i.Fragment,null,i.createElement(p.default,{active:r&&"left"===r.attrs.align,type:"button",onClick:function(){s.setBlockType(t.schema.nodes.heading2,{align:"left"})(t,n)}},i.createElement(c.default,{style:{width:"24px",height:"24px"}})),i.createElement(p.default,{type:"button",active:r&&"center"===r.attrs.align,onClick:function(){s.setBlockType(t.schema.nodes.heading2,{align:"center"})(t,n)}},i.createElement(u.default,{style:{width:"24px",height:"24px"}})),i.createElement(p.default,{type:"button",active:r&&"right"===r.attrs.align,onClick:function(){s.setBlockType(t.schema.nodes.heading2,{align:"right"})(t,n)}},i.createElement(h.default,{style:{width:"24px",height:"24px"}})))},t.prototype.onClick=function(e,t){s.setBlockType(e.schema.nodes.heading2)(e,t)},t}(d.Extension);t.default=g},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"heading"),o.createElement("g",{id:"aa20b165-3acd-433f-82f0-1d83abd1dec9","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("path",{d:"M818.8,1013H285.45v610.9H0V164.5H285.45V758.43H818.8V164.5h285.45V1623.87H818.8Z"}),o.createElement("path",{d:"M1270.81,1456.45q134-101,201.08-162.57t88-98.54a157.52,157.52,0,0,0,21-79q0-75-85-75-75,0-195.08,75l-50-160.07q51-34,129-57t146.06-23q125,0,192.58,58.52T1786,1096.3q0,82-52,156.06t-203.08,202.09v2H1791v160.06H1270.81Z"})))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(5),l=n(13),a=n(42),c=n(17),u=n(18),h=n(19),d=n(6),f=n(4),p=n(12),m=n(11),g=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"heading3"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return"block"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return this.customSchema?this.customSchema:{content:"inline*",group:"block",defining:!0,attrs:{align:{default:""},id:{default:""}},parseDOM:[{tag:"h3",priority:m.BASE_PRIORITY,getAttrs:function(e){return{id:e.getAttribute("id")||l()}}}],toDOM:function(e){return["h3",e.attrs.align?{style:"text-align: "+e.attrs.align,id:e.attrs.id||l(),class:this.className}:{id:e.attrs.id||l(),class:this.className},0]}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return i.createElement(a.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),t.prototype.active=function(e){return f.blockActive(e.schema.nodes.heading3)(e)},t.prototype.enable=function(e){return s.setBlockType(e.schema.nodes.heading3)(e)},t.prototype.customMenu=function(e){var t=e.state,n=e.dispatch,r=f.getParentNodeFromState(t);return i.createElement(i.Fragment,null,i.createElement(p.default,{active:r&&"left"===r.attrs.align,type:"button",onClick:function(){s.setBlockType(t.schema.nodes.heading3,{align:"left"})(t,n)}},i.createElement(c.default,{style:{width:"24px",height:"24px"}})),i.createElement(p.default,{type:"button",active:r&&"center"===r.attrs.align,onClick:function(){s.setBlockType(t.schema.nodes.heading3,{align:"center"})(t,n)}},i.createElement(u.default,{style:{width:"24px",height:"24px"}})),i.createElement(p.default,{type:"button",active:r&&"right"===r.attrs.align,onClick:function(){s.setBlockType(t.schema.nodes.heading3,{align:"right"})(t,n)}},i.createElement(h.default,{style:{width:"24px",height:"24px"}})))},t.prototype.onClick=function(e,t){s.setBlockType(e.schema.nodes.heading3)(e,t)},t}(d.Extension);t.default=g},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"heading"),o.createElement("g",{id:"b5ff5b4d-a20b-455f-8138-4c7eb6020abc","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("path",{d:"M818.8,1013H285.45v610.9H0V164.5H285.45V758.43H818.8V164.5h285.45V1623.87H818.8Z"}),o.createElement("path",{d:"M1594,1188h10q81.9,0,133.36,54.45t51.45,145.35q0,116.9-71.93,178.33T1509,1627.54q-133.87,0-249.75-59.94l49-149.85q104.89,52,180.82,52,51,0,77.92-20.48t27-56.44q0-30-14-45t-52.45-22.47q-38.46-7.5-113.38-7.5h-40V1188L1544,1050.12v-2H1274.27V888.28h504.49v159.84L1594,1186Z"})))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),s=n(5),l=n(6),a=n(4),c=n(11),u=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"list_item"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return this.customSchema?this.customSchema:{content:"paragraph block*",group:"block",attrs:{id:{default:""}},parseDOM:[{tag:"li",priority:c.BASE_PRIORITY,getAttrs:function(e){return{id:e.getAttribute("id")}}}],toDOM:function(e){return["li",0]},defining:!0}},enumerable:!1,configurable:!0}),t.prototype.keys=function(e){return{Enter:i.splitListItem(e.nodes.list_item),Tab:i.sinkListItem(e.nodes.list_item),"Shift-Tab":s.chainCommands(a.liftListItem(e.nodes.list_item))}},t}(l.Extension);t.default=u},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(20),l=n(13),a=n(22),c=n(23),u=n(45),h=n(4),d=n(6),f=n(12),p=n(11),m=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"bullet_list"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return"block"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){if(!this.customSchema)return{content:"list_item+",group:"block",attrs:{id:{default:""}},parseDOM:[{tag:"ul",priority:p.BASE_PRIORITY,getAttrs:function(e){return{id:e.getAttribute("id")||l()}}}],toDOM:function(e){return["ul",{id:e.attrs.id||l(),class:this.className},0]}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return i.createElement(u.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideBlockMenuOnFocus",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.active=function(e){return h.blockActive(e.schema.nodes.bullet_list)(e)},t.prototype.enable=function(e){return"paragraph"===h.getParentNodeFromState(e).type.name&&s.wrapInList(e.schema.nodes.bullet_list)(e)},t.prototype.onClick=function(e,t){if("paragraph"!==h.getParentNodeFromState(e).type.name)return!1;s.wrapInList(e.schema.nodes.bullet_list)(e,t)},t.prototype.customMenu=function(e){var t=e.state,n=e.dispatch;return i.createElement(i.Fragment,null,i.createElement(f.default,{type:"button",disabled:!h.liftListItem(t.schema.nodes.list_item)(t),onClick:function(){h.liftListItem(t.schema.nodes.list_item)(t,n)}},i.createElement(a.default,{style:{width:"24px",height:"24px"}})),i.createElement(f.default,{type:"button",disabled:!s.sinkListItem(t.schema.nodes.list_item)(t),onClick:function(){s.sinkListItem(t.schema.nodes.list_item)(t,n)}},i.createElement(c.default,{style:{width:"24px",height:"24px"}})))},t}(d.Extension);t.default=m},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"list"),o.createElement("g",{id:"ed077df1-2ad6-4b84-9b12-8279e9916ad9","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("rect",{x:552,y:220,width:1240,height:256}),o.createElement("rect",{x:552,y:758,width:1240,height:256}),o.createElement("rect",{x:552,y:1298,width:1240,height:256}),o.createElement("rect",{y:216.49,width:256,height:256}),o.createElement("rect",{y:757.62,width:256,height:256}),o.createElement("rect",{y:1298.76,width:256,height:256})))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(20),l=n(47),a=n(23),c=n(22),u=n(4),h=n(6),d=n(12),f=n(11),p=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"ordered_list"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return"block"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return this.customSchema?this.customSchema:{content:"list_item+",group:"block",parseDOM:[{tag:"ol",priority:f.BASE_PRIORITY,getAttrs:function(e){return{id:e.getAttribute("id")}}}],attrs:{id:{default:""}},toDOM:function(e){return["ol",{class:this.className},0]}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return i.createElement(l.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideBlockMenuOnFocus",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.active=function(e){return u.blockActive(e.schema.nodes.ordered_list)(e)},t.prototype.enable=function(e){return"paragraph"===u.getParentNodeFromState(e).type.name&&s.wrapInList(e.schema.nodes.ordered_list)(e)},t.prototype.onClick=function(e,t){if("paragraph"!==u.getParentNodeFromState(e).type.name)return!1;s.wrapInList(e.schema.nodes.ordered_list)(e,t)},t.prototype.customMenu=function(e){var t=e.state,n=e.dispatch;return i.createElement(i.Fragment,null,i.createElement(d.default,{type:"button",onClick:function(){u.liftListItem(t.schema.nodes.list_item)(t,n)}},i.createElement(c.default,{style:{width:"24px",height:"24px"}})),i.createElement(d.default,{type:"button",onClick:function(){s.sinkListItem(t.schema.nodes.list_item)(t,n)}},i.createElement(a.default,{style:{width:"24px",height:"24px"}})))},t}(h.Extension);t.default=p},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"orderedlist"),o.createElement("g",{id:"b3b81f28-1e36-4bd8-9f72-6ca2ae0e4ff1","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("rect",{x:552,y:216.49,width:1240,height:256}),o.createElement("rect",{x:552,y:757.63,width:1240,height:256}),o.createElement("rect",{x:552,y:1298.76,width:1240,height:256}),o.createElement("path",{d:"M115.3,279.37h-.55L32.94,356.24,0,262.9,115.3,153.09H230.6V553.9H115.3Z"}),o.createElement("path",{d:"M23.51,1009.93q73.57-55.45,110.36-89.22t48.32-54.08a86.57,86.57,0,0,0,11.53-43.38q0-41.18-46.67-41.18-41.19,0-107.07,41.18L12.53,735.4q28-18.66,70.83-31.3t80.16-12.62q68.63,0,105.69,32.12t37.06,88.67q0,45-28.55,85.65T166.26,1008.83v1.1H309v87.85H23.51Z"}),o.createElement("path",{d:"M199.21,1397.33h5.49q45,0,73.3,29.92t28.27,79.89q0,64.24-39.53,98t-114.2,33.76Q79,1638.91,15.27,1606l26.91-82.36q57.64,28.56,99.38,28.55,28,0,42.82-11.25t14.83-31q0-16.47-7.69-24.7t-28.83-12.36q-21.13-4.11-62.31-4.11h-22v-71.38l93.33-75.77v-1.1H23.51v-87.85H300.78v87.85l-101.57,75.77Z"})))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(3),l=n(5),a=n(6),c=n(4),u=n(24),h=n(49),d=n(50),f=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"embed"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return"block"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideInlineMenuOnFocus",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return this.customSchema?this.customSchema:{group:"block",content:"text*",selectable:!0,isolating:!0,attrs:{type:{default:"youtube"},src:{default:""}},parseDOM:[{tag:"iframe",getAttrs:function(e){return{src:e.getAttribute("src")}}},{tag:"div.embed-wrap",getAttrs:function(e){return{src:e.querySelector("a").getAttribute("href")}}}],toDOM:function(e){if(-1!==e.attrs.src.indexOf("youtube")){var t=e.attrs.src,n="",r=/www\.youtube\.com\/watch\?v=(.*?)$/.exec(t);if(r&&r[1]&&(n=r[1]),!n){var o=/www\.youtube\.com\/embed\/(.*?)$/.exec(t);o&&o[1]&&(n=o[1])}if(n)return["div",{contenteditable:!0,class:"youtube-frame-wrap"},["div",{class:"youtube-frame"},["iframe",{src:"https://www.youtube.com/embed/"+n}]]]}return["div",{class:"embed-wrap"},["a",{class:"embed",href:e.attrs.src},["div",{class:"embed-inner"},0]]]}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return i.createElement(u.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),t.prototype.active=function(e){return c.blockActive(e.schema.nodes.embed)(e)},t.prototype.enable=function(e){return l.setBlockType(e.schema.nodes.embed)(e)},t.prototype.onClick=function(e,t){var n=document.createElement("div");document.body.appendChild(n),s.render(i.createElement(h.default,{onClose:function(){s.unmountComponentAtNode(n)},onDone:function(r){var o=e.selection.$anchor.pos,i=e.schema.text(r),l=e.schema.nodes.embed.createAndFill({src:r},i);t(e.tr.insert(o,l)),s.unmountComponentAtNode(n)}}),n)},Object.defineProperty(t.prototype,"plugins",{get:function(){return[d.default()]},enumerable:!1,configurable:!0}),t}(a.Extension);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(3),i=n(25),s=r.useState,l=r.useEffect,a=r.useRef;var c=function(e){var t,n=(t=r.useRef(document.createElement("div")),l((function(){var e=document.createElement("div");return document.body.appendChild(e),e.appendChild(t.current),function(){e.removeChild(t.current)}}),[]),t.current);return o.createPortal(e.children,n)};t.default=function(e){var t=s(e.url),n=t[0],o=t[1],u=a();return l((function(){u.current.focus()})),r.createElement(c,null,r.createElement("div",{className:"smartblock-popup",id:"smartblock-popup",onClick:function(t){"smartblock-popup"===t.target.id&&e.onClose&&e.onClose()}},r.createElement("div",{className:"smartblock-popup-inner"},r.createElement("div",{className:"smartblock-popup-text"},"Enter URL here..."),r.createElement("div",{className:"smartblock-popup-field"},r.createElement("input",{ref:u,type:"text",value:n,placeholder:"https://",onKeyDown:function(t){13===t.keyCode&&e.onDone&&e.onDone(n)},onChange:function(e){o(e.target.value)}}),r.createElement("button",{className:"smartblock-popup-btn",onClick:function(t){e.onDone&&e.onDone(n)}},r.createElement(i.default,{style:{width:"24px",height:"24px",overflow:"hidden"}}))))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(5),i=n(4);t.default=function(){return new r.Plugin({props:{handleTextInput:function(e,t,n,r){var s=e.state,l=i.getParentNodeFromState(s);return"embed"===l.type.name&&(o.setBlockType(s.schema.nodes.embed,{src:l.textContent+r})(s,e.dispatch),!1)}}})}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=n(3),l=n(9),a=n(5),c=n(13),u=n(52),h=n(53),d=n(54),f=n(55),p=n(56),m=n(57),g=n(58),v=n(59),y=n(60),b=n(61),w=n(4),_=n(6),S=n(12),k=l.tableNodes({group:"block",tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:function(e){return e.style.backgroundColor||null},setDOMAttr:function(e,t){e&&(t.style=(t.style||"")+"background-color: "+e+";")}}}}),x=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"table"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return"block"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=this;return this.customSchema?this.customSchema:(k.table.parseDOM=[{tag:"table",getAttrs:function(e){return{id:e.getAttribute("id")||c()}}}],k.table.toDOM=function(t){return["table",{class:e.className},["tbody",0]]},k.table.attrs={id:{default:""}},k.table)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schemaDependencies",{get:function(){k.table;return i(k,["table"])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return s.createElement(h.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideBlockMenuOnFocus",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plugins",{get:function(){return[l.tableEditing()]},enumerable:!1,configurable:!0}),t.prototype.active=function(e){return w.blockActive(e.schema.nodes.table)(e)},t.prototype.enable=function(e){return a.setBlockType(e.schema.nodes.table)(e)},t.prototype.onClick=function(e,t){var n=w.createTable(e.schema,{id:c()});t(e.tr.replaceSelectionWith(n))},t.prototype.customInlineMenu=function(e){var t=e.state,n=e.dispatch;return s.createElement(s.Fragment,null,s.createElement(S.default,{type:"button",className:"smartblock-cell-btn",onClick:function(){l.mergeCells(t,n)}},s.createElement(v.default,{style:{width:"24px",height:"24px"}})),s.createElement(S.default,{type:"button",className:"smartblock-cell-btn",onClick:function(){l.splitCell(t,n)}},s.createElement(g.default,{style:{width:"24px",height:"24px"}})),s.createElement(S.default,{type:"button",className:"smartblock-cell-btn",onClick:function(){u.toggleCell("th")(t,n)}},s.createElement("span",{style:{display:"inline-block",verticalAlign:"text-bottom"}},"th")),s.createElement(S.default,{type:"button",className:"smartblock-cell-btn",onClick:function(){u.toggleCell("td")(t,n)}},s.createElement("span",{style:{display:"inline-block",verticalAlign:"text-bottom"}},"td")))},t.prototype.customMenu=function(e){var t=e.state,n=e.dispatch;return s.createElement(s.Fragment,null,s.createElement(S.default,{type:"button",onClick:function(){l.addColumnAfter(t,n)}},s.createElement(f.default,{style:{width:"24px",height:"24px"}})),s.createElement(S.default,{type:"button",onClick:function(){l.addColumnBefore(t,n)}},s.createElement(d.default,{style:{width:"24px",height:"24px"}})),s.createElement(S.default,{type:"button",onClick:function(){l.addRowBefore(t,n)}},s.createElement(p.default,{style:{width:"24px",height:"24px"}})),s.createElement(S.default,{type:"button",onClick:function(){l.addRowAfter(t,n)}},s.createElement(m.default,{style:{width:"24px",height:"24px"}})),s.createElement(S.default,{type:"button",onClick:function(){l.deleteColumn(t,n)}},s.createElement(b.default,{style:{width:"24px",height:"24px"}})),s.createElement(S.default,{type:"button",onClick:function(){l.deleteRow(t,n)}},s.createElement(y.default,{style:{width:"24px",height:"24px"}})))},t.prototype.keys=function(){return{Tab:l.goToNextCell(1),"Shift-Tab":l.goToNextCell(-1)}},t}(_.Extension);t.default=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleCell=void 0;var r=n(9);t.toggleCell=function(e){return function(t,n){if(!function(e){for(var t=e.selection.$head,n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}(t))return!1;if(n){var o=function(e){var t=e.cached.tableNodeTypes;if(!t)for(var n in t=e.cached.tableNodeTypes={},e.nodes){var r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}return t}(t.schema),i=function(e){var t,n=e.selection,o=r.selectionCell(e),i=o.node(-1),s=o.start(-1),l=r.TableMap.get(i);return(t=n instanceof r.CellSelection?l.rectBetween(n.$anchorCell.pos-s,n.$headCell.pos-s):l.findCell(o.pos-s)).tableStart=s,t.map=l,t.table=i,t}(t),s=t.tr,l=i,a=o.cell;"th"===e&&(a=o.header_cell),i.map.cellsInRect(l).forEach((function(e){var t=e+i.tableStart,n=s.doc.nodeAt(t);n&&s.setNodeMarkup(t,a,n.attrs)})),n(s)}return!0}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({x:"0px",y:"0px",width:"1792px",height:"1792px",viewBox:"0 0 1792 1792",enableBackground:"new 0 0 1792 1792",xmlSpace:"preserve"},e),o.createElement("g",{id:"Guide"}),o.createElement("g",{id:"Font",display:"none"},o.createElement("path",{display:"inline",d:"M746.667,224v149.333h298.667V224H746.667z M746.667,1120H0V522.667 c0-82.133,67.2-149.333,149.333-149.333h448V224c0-82.133,67.2-149.333,149.333-149.333h298.667 c82.134,0,149.333,67.2,149.333,149.333v149.333h448c82.133,0,149.333,67.2,149.333,149.333V1120h-746.667V970.667H746.667V1120z  M0,1568v-298.667h1792V1568c0,82.133-67.2,149.333-149.333,149.333H149.333C67.2,1717.333,0,1650.133,0,1568z"})),o.createElement("g",{id:"\\u5185\\u5BB9"},o.createElement("g",null,o.createElement("path",{d:"M960,0v832h832V0H960z M1664,704h-576V128h576V704z"}),o.createElement("path",{d:"M0,832h832V0H0V832z M128,128h576v576H128V128z"}),o.createElement("path",{d:"M960,1792h832V960H960V1792z M1088,1088h576v576h-576V1088z"}),o.createElement("path",{d:"M0,1792h832V960H0V1792z M128,1088h576v576H128V1088z"}))),o.createElement("g",{id:"\\u30E9\\u30D9\\u30EB"}),o.createElement("g",{id:"Unicode",display:"none"},o.createElement("text",{transform:"matrix(1 0 0 1 437.0627 964.2812)",display:"inline",fill:"#ED1E79",fontFamily:"'ArialMT'",fontSize:256},"U+F709")))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("g",{"data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("path",{d:"M1652.13 142.2v1512h-550v-1512h550m140-140h-830v1792h830V2.2zM.13 1633.2h160v160H.13zM160.13 1555.78H.13v-154.84h160zm0-232.26H.13v-154.84h160zm0-232.26H.13V936.42h160zm0-232.27H.13V704.15h160zm0-232.26H.13V471.89h160zm0-232.26H.13V239.63h160zM.13 2.2h160v160H.13zM627.28 162.2H471.56V2.2h155.72zm-233.57 0H238V2.2h155.71zM705.13 2.2h160v160h-160zM865.13 1555.78h-160v-154.84h160zm0-232.26h-160v-154.84h160zm0-232.26h-160V936.42h160zm0-232.27h-160V704.15h160zm0-232.26h-160V471.89h160zm0-232.26h-160V239.63h160zM705.13 1633.2h160v160h-160zM627.28 1793.2H471.56v-160h155.72zm-233.57 0H238v-160h155.71zM677.13 834.21h-165v-165h-150v165h-165v150h165v164.99h150V984.21h165v-150z"})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("g",{"data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("path",{d:"M690 141.73v1512H140v-1512h550m140-140H0v1792h830V1.73zM1632 2.73h160v160h-160zM1792 1556.3h-160v-154.84h160zm0-232.26h-160V1169.2h160zm0-232.26h-160V936.94h160zm0-232.26h-160V704.67h160zm0-232.27h-160V472.41h160zm0-232.25h-160V240.15h160zM1632 1633.73h160v160h-160zM1554.14 1793.73h-155.71v-160h155.71zm-233.57 0h-155.71v-160h155.71zM927 1633.73h160v160H927zM1087 1556.3H927v-154.84h160zm0-232.26H927V1169.2h160zm0-232.26H927V936.94h160zm0-232.26H927V704.67h160zm0-232.27H927V472.41h160zm0-232.25H927V240.15h160zM927 2.73h160v160H927zM1554.14 162.73h-155.71v-160h155.71zm-233.57 0h-155.71v-160h155.71zM1595 811.73h-165v-165h-150v165h-165v150h165v165h150v-165h165v-150z"})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("g",{"data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("path",{d:"M1638.26 1103.73v550h-1512v-550h1512m140-140h-1792v830h1792v-830zM-12.74 1.73h160v160h-160zM1540.84 161.73H1386v-160h154.84zm-232.26 0h-154.84v-160h154.84zm-232.27 0H921.47v-160h154.84zm-232.26 0H689.21v-160h154.84zm-232.26 0H457v-160h154.79zm-232.26 0H224.68v-160h154.85zM1618.26 1.73h160v160h-160zM1778.26 628.87h-160V473.15h160zm0-233.57h-160V239.58h160zM1618.26 706.73h160v160h-160zM1540.84 866.73H1386v-160h154.84zm-232.26 0h-154.84v-160h154.84zm-232.27 0H921.47v-160h154.84zm-232.26 0H689.21v-160h154.84zm-232.26 0H457v-160h154.79zm-232.27 0H224.68v-160h154.84zM-12.74 706.73h160v160h-160zM147.26 628.87h-160V473.15h160zm0-233.57h-160V239.58h160zM1111.26 363.73h-165v-165h-150v165h-165v150h165v165h150v-165h165v-150z"})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("g",{"data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("path",{d:"M1662.55 141.73v550h-1512v-550h1512m140-140h-1792v830h1792v-830zM1641.55 1633.73h160v160h-160zM1564.13 1793.73h-154.84v-160h154.84zm-232.26 0H1177v-160h154.85zm-232.27 0H944.76v-160h154.84zm-232.26 0H712.5v-160h154.84zm-232.26 0H480.23v-160h154.85zm-232.27 0H248v-160h154.81zM10.55 1633.73h160v160h-160zM170.55 1555.87h-160v-155.72h160zm0-233.57h-160v-155.72h160zM10.55 928.73h160v160h-160zM1564.13 1088.73h-154.84v-160h154.84zm-232.26 0H1177v-160h154.85zm-232.27 0H944.76v-160h154.84zm-232.26 0H712.5v-160h154.84zm-232.26 0H480.23v-160h154.85zm-232.27 0H248v-160h154.81zM1641.55 928.73h160v160h-160zM1801.55 1555.87h-160v-155.72h160zm0-233.57h-160v-155.72h160zM1157.55 1281.73h-165v-165h-150v165h-165v150h165v165h150v-165h165v-150z"})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"split"),o.createElement("g",{id:"b1d8cdf3-334a-4ea0-8201-7742f35526ee","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("path",{d:"M1692,100V1692H100V100H1692M1792,0H0V1792H1792V0Z"}),o.createElement("polygon",{points:"1536 896 1176 1196 1176 596 1536 896"}),o.createElement("polygon",{points:"256 896 616 1196 616 596 256 896"}),o.createElement("rect",{x:846,width:100,height:1792})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"merge"),o.createElement("g",{id:"a6e86b8f-02bd-4744-89fd-00d642cba97e","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("polygon",{points:"896 0 896 633.99 960 576 960 100 1692 100 1692 1692 960 1692 960 1216 896 1158.01 896 1792 1792 1792 1792 0 896 0"}),o.createElement("polygon",{points:"896 0 896 633.99 832 576 832 100 100 100 100 1692 832 1692 832 1216 896 1158.01 896 1792 0 1792 0 0 896 0"}),o.createElement("polygon",{points:"1024 896 1384 1196 1384 596 1024 896"}),o.createElement("polygon",{points:"768 896 408 1196 408 596 768 896"})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("g",{"data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("path",{d:"M-18.45 415.79h160v160h-160zM1536.08 575.79h-154.95v-160h154.95zm-232.42 0h-155v-160h155zm-232.43 0H916.29v-160h154.94zm-232.42 0H683.87v-160h154.94zm-232.42 0H451.44v-160h155zm-232.42 0H219v-160h155zM1613.55 415.79h160v160h-160zM1773.55 1124.36h-160V941.5h160zm0-274.29h-160V667.22h160zM1613.55 1215.79h160v160h-160zM1536.08 1375.79h-154.95v-160h154.95zm-232.42 0h-155v-160h155zm-232.43 0H916.29v-160h154.94zm-232.42 0H683.87v-160h154.94zm-232.42 0H451.44v-160h155zm-232.42 0H219v-160h155zM-18.45 1215.79h160v160h-160zM141.55 1124.36h-160V941.5h160zm0-274.29h-160V667.22h160zM632.21 820.31h490v150h-490z"})))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("g",{"data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("path",{d:"M1199.55-.21h160v160h-160zM1359.55 1554.32h-160v-155h160zm0-232.43h-160V1167h160zm0-232.42h-160V934.53h160zm0-232.42h-160V702.11h160zm0-232.42h-160V469.68h160zm0-232.42h-160V237.26h160zM1199.55 1631.79h160v160h-160zM1108.12 1791.79H925.26v-160h182.86zm-274.28 0H651v-160h182.84zM399.55 1631.79h160v160h-160zM559.55 1554.32h-160v-155h160zm0-232.43h-160V1167h160zm0-232.42h-160V934.53h160zm0-232.42h-160V702.11h160zm0-232.42h-160V469.68h160zm0-232.42h-160V237.26h160zM399.55-.21h160v160h-160zM1108.12 159.79H925.27v-160h182.85zm-274.28 0H651v-160h182.84zM644.8 822.73h460v150h-460z"})))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(5),l=n(13),a=n(63),c=n(6),u=n(4),h=n(11),d=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"blockquote"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return"block"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=this;return this.customSchema?this.customSchema:{content:"inline*",group:"block",parseDOM:[{tag:"blockquote",priority:h.BASE_PRIORITY,getAttrs:function(e){return{id:e.getAttribute("id")||l()}}}],attrs:{align:{default:"left"},id:{default:""}},toDOM:function(t){return["blockquote",{class:e.className},0]}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return i.createElement(a.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),t.prototype.active=function(e){return u.blockActive(e.schema.nodes.blockquote)(e)},t.prototype.enable=function(e){return s.setBlockType(e.schema.nodes.blockquote)(e)},t.prototype.onClick=function(e,t){s.setBlockType(e.schema.nodes.blockquote)(e,t)},t}(c.Extension);t.default=d},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({id:"\\u30B0\\u30EB\\u30FC\\u30D7\\u5316_174","data-name":"\\u30B0\\u30EB\\u30FC\\u30D7\\u5316 174",width:24,height:16.446,viewBox:"0 0 24 16.446"},e),o.createElement("path",{id:"\\u30D1\\u30B9_1329","data-name":"\\u30D1\\u30B9 1329",d:"M130.834,465.741l2.981-7.053h-4.265s-5.644,8.544-5.756,8.72a4.954,4.954,0,0,0-.778,2.669,5.17,5.17,0,0,0,10.337,0A5.029,5.029,0,0,0,130.834,465.741Z",transform:"translate(-123.017 -458.688)"}),o.createElement("path",{id:"\\u30D1\\u30B9_1330","data-name":"\\u30D1\\u30B9 1330",d:"M165.515,465.741l2.981-7.053h-4.265s-5.644,8.544-5.756,8.72a4.951,4.951,0,0,0-.778,2.669,5.17,5.17,0,0,0,10.337,0A5.029,5.029,0,0,0,165.515,465.741Z",transform:"translate(-144.497 -458.688)"}))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(5),l=n(65),a=n(6),c=n(4),u=n(11),h=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"strong"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return"mark"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){return this.customSchema?this.customSchema:{group:"mark",parseDOM:[{tag:"strong",priority:u.BASE_PRIORITY,style:"font-weight=bold"}],toDOM:function(){return["strong",{style:"font-weight:bold"}]}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return i.createElement(l.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),t.prototype.active=function(e){return c.markActive(e.schema.marks.strong)(e)},t.prototype.onClick=function(e,t){s.toggleMark(e.schema.marks.strong)(e,t)},t}(a.Extension);t.default=h},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"bold"),o.createElement("g",{id:"a5473643-9da8-4ded-814a-fc4f596f9c7a","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("path",{d:"M1455.78,430.37A532.41,532.41,0,0,1,1439.6,559.8,355.56,355.56,0,0,1,1386.09,678q-37.33,53.55-97.07,94.58t-144.35,61v14.94a585.31,585.31,0,0,1,141.86,42.31,364.25,364.25,0,0,1,117,82.13q49.76,52.27,78.4,126.93t28.62,176.72q0,134.4-57.24,232.71t-153.07,160.53q-95.84,62.23-217.78,92.09T831.07,1791.8H722.8q-66,0-141.87-3.74t-154.31-11.2q-78.39-7.47-143.11-22.4V37.13q47.25-7.47,108.27-14.94T522.45,9.75q69.64-5,143.11-7.47T811.16-.2a1491.47,1491.47,0,0,1,237.69,18.66q115.73,18.67,206.57,66T1401,216.33Q1455.74,301,1455.78,430.37Zm-734.22,326q34.82,0,80.89-2.45t75.91-7.39q94.56-29.52,163-88.67t68.44-155.17q0-64-24.89-105.89a188.49,188.49,0,0,0-66-66.5q-41.07-24.62-93.34-34.46A590.21,590.21,0,0,0,816.13,286q-64.74,0-119.46,2.49t-84.62,7.35V756.42Zm112,749.15a490.28,490.28,0,0,0,120.71-14.77q58.44-14.76,103.29-45.58a240.54,240.54,0,0,0,72.17-77.62q27.36-46.78,27.38-110.88,0-81.32-32.35-128.1t-84.63-72.68q-52.26-25.9-117-33.29a1146.62,1146.62,0,0,0-129.43-7.39H612.05V1490.8q12.42,5,39.82,7.38t58.49,3.7q31.08,1.27,64.71,2.49T833.56,1505.57Z"})))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(5),l=n(67),a=n(6),c=n(4),u=n(11),h=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"em"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return"mark"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=this;return this.customSchema?this.customSchema:{group:"mark",parseDOM:[{tag:"em",priority:u.BASE_PRIORITY,style:"font-style=italic"}],toDOM:function(){return["span",{class:e.className,style:"font-style:italic"}]}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return i.createElement(l.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),t.prototype.active=function(e){return c.markActive(e.schema.marks.em)(e)},t.prototype.onClick=function(e,t){s.toggleMark(e.schema.marks.em)(e,t)},t}(a.Extension);t.default=h},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"emphasis"),o.createElement("g",{id:"aac5153c-aa10-4b5d-a4a4-c366cc71b33f","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("rect",{y:1531.8,width:1250,height:260.2}),o.createElement("path",{d:"M1792,249.69C1768.56,88.74,1619.07-22.74,1458.12.7L857.65,805.87l333.88,249L1792,249.69"}),o.createElement("polygon",{points:"937.11 1396.16 413.09 1402.06 774.55 917.32 1108.49 1166.33 937.11 1396.16"})))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(5),l=n(69),a=n(6),c=n(4),u=n(11),h=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"underline"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return"mark"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=this;return this.customSchema?this.customSchema:{group:"mark",parseDOM:[{tag:"u",priority:u.BASE_PRIORITY,style:"text-decoration=underline"}],toDOM:function(){return["span",{style:"text-decoration:underline",class:e.className}]}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return i.createElement(l.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),t.prototype.active=function(e){return c.markActive(e.schema.marks.underline)(e)},t.prototype.onClick=function(e,t){s.toggleMark(e.schema.marks.underline)(e,t)},t}(a.Extension);t.default=h},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"underline"),o.createElement("g",{id:"b9648317-2b4a-4fc1-b757-c99f167223ab","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("path",{d:"M1208,0h320.75V744.07q0,167.82-44.41,288.67T1361,1232.59q-79,79-192.44,116t-249.2,37Q263,1385.56,263,786V0h338V719.4q0,101.19,18.5,171.47t58,113.5q39.45,43.19,98.69,61.68t138.17,18.5q155.43,0,224.52-86.35T1208,719.4Z"}),o.createElement("rect",{x:265.39,y:1581.26,width:1265.7,height:210.95})))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(5),l=n(71),a=n(6),c=n(4),u=n(11),h=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"strike"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return"mark"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){var e=this;return this.customSchema?this.customSchema:{group:"mark",parseDOM:[{tag:"strike",priority:u.BASE_PRIORITY,style:"text-decoration=line-through"}],toDOM:function(){return["span",{style:"text-decoration-line:line-through",class:e.className}]}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return i.createElement(l.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),t.prototype.active=function(e){return c.markActive(e.schema.marks.strike)(e)},t.prototype.onClick=function(e,t){s.toggleMark(e.schema.marks.strike)(e,t)},t}(a.Extension);t.default=h},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"strikethrough"),o.createElement("g",{id:"b9bc1bbe-05e0-4535-8a25-40617985e9ea","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("polygon",{points:"1422.66 992 1422.66 992 1600 992 1600 800 1600 800 1600 992 1422.66 992",fill:"none"}),o.createElement("path",{d:"M964.35,1076.72q87.35,40.62,145.23,89.84t57.85,128q0,103.39-80,153.85t-230.15,50.46A769.32,769.32,0,0,1,733,1489a1111.74,1111.74,0,0,1-114.46-24.62q-54.18-14.78-97.23-32t-70.16-32l-108.31,288q66.46,34.5,206.77,68.92t324.93,34.47q140.31,0,257.23-32t199.38-98.46q82.44-66.45,128-166.15t45.54-237.54q0-109.53-36.55-190.32H944Q954.27,1072,964.35,1076.72Z"}),o.createElement("path",{d:"M922.51,679.18q-87.4-41.83-145.23-91.08T719.43,465q0-78.75,62.77-125.54t180.92-46.77q125.53,0,233.85,28.31t162.46,62.77l105.85-283.08q-86.21-49.21-219.08-75.08T963.12-.2q-130.5,0-236.31,29.53T543.43,120.41Q465.9,182,424,274.26T382.2,492.1q0,140.51,54.11,232.58h583.94Q969.25,701.58,922.51,679.18Z"}),o.createElement("polygon",{points:"1184.35 800 490.37 800 192 800 192 992 772.42 992 1422.66 992 1600 992 1600 800 1184.35 800"}),o.createElement("polygon",{points:"490.37 800 490.37 800 192 800 192 992 192 992 192 800 490.37 800",fill:"#fff"})))}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(5),l=n(24),a=n(6),c=n(4),u=n(73),h=function(e){function t(t){return e.call(this,t)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"link"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return"mark"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showMenu",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schema",{get:function(){if(this.customSchema)return this.customSchema;var e=this.className;return{group:"mark",attrs:{href:{},editing:{default:!0},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]:not(.embed)",getAttrs:function(e){return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:function(t){var n=t.attrs;return["a",{href:n.href,title:n.title,class:e},0]}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return i.createElement(l.default,{style:{width:"24px",height:"24px"}})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plugins",{get:function(){return[u.default()]},enumerable:!1,configurable:!0}),t.prototype.active=function(e){return c.markActive(e.schema.marks.link)(e)},t.prototype.onClick=function(e,t){if(c.markActive(e.schema.marks.link)(e)){var n=c.getMarkInSelection("link",e),r=e.selection,o=r.$anchor,i=o.nodeBefore,l=o.nodeAfter,a=o.pos,u=r.from,h=r.to;u===h&&i&&l&&(u=a-i.nodeSize,h=a+l.nodeSize);var d=e.tr;return d.removeMark(u,h,e.schema.marks.link),d.addMark(u,h,e.schema.marks.link.create({href:n.attrs.href,editing:!0})),t(d.scrollIntoView()),!0}s.toggleMark(e.schema.marks.link,{href:"",editing:!0})(e,t)},t}(a.Extension);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(1),i=n(3),s=n(74),l=n(4),a=r.useRef,c=function(e){var t=e.view,n=a(null),o=function(e){var t=e.state.selection,n=e.dom,r=e.state.selection.$anchor.nodeAfter,o=null;if(r&&(o=r.marks.find((function(e){if("link"===e.type.name)return!0}))),!t||t.empty||!n||!o)return{left:-1e3,top:0};var i=e.coordsAtPos(t.$head.pos),s=i.top+l.getScrollTop()+30,a=i.left-50;return a+320>window.innerWidth?{top:s,left:window.innerWidth-320}:{left:a,top:s}}(t),i=t.state.selection,c=i.$anchor,u=c.nodeBefore,h=c.nodeAfter,d=c.pos,f=null,p=!1;h&&(f=h.marks.find((function(e){if("link"===e.type.name)return!0})));var m="";f&&(m=f.attrs.href),f&&(p=f.attrs.editing);var g=i.from,v=i.to;g===v&&u&&h&&(g=d-u.nodeSize,v=d+h.nodeSize);var y=function(e){var t=e.state.selection,n=e.dom,r=e.state.selection.$anchor.nodeAfter,o=null;if(r&&(o=r.marks.find((function(e){return"link"===e.type.name}))),!t||t.empty||!n||!o)return 20;var i=e.coordsAtPos(t.$head.pos).left-50;return i+320>window.innerWidth?i-window.innerWidth+320:20}(t);return r.createElement("div",{className:"smartblock-tooltip-wrap",ref:n,style:o},r.createElement("div",{className:"smartblock-tooltip-arrow",style:{left:y+"px"}}),r.createElement(s.default,{url:m,editing:p,onClick:function(e){var n=t.state.tr;n.removeMark(g,v,t.state.schema.marks.link),e?(n.addMark(g,v,t.state.schema.marks.link.create({href:e,editing:!1})),t.dispatch(n)):t.dispatch(n)}}))},u=function(){function e(e){this.tooltip=document.createElement("div"),document.body.appendChild(this.tooltip),this.update(e)}return e.prototype.render=function(e){i.render(r.createElement(c,{view:e}),this.tooltip)},e.prototype.update=function(e){this.render(e)},e.prototype.destroy=function(){i.unmountComponentAtNode(this.tooltip),document.body.removeChild(this.tooltip)},e}();t.default=function(){return new o.Plugin({view:function(e){return new u(e)}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(25);t.default=function(e){var t=r.useState(""),n=t[0],i=t[1],s=e.editing;return r.useEffect((function(){i(e.url)}),[e.url]),s?r.createElement("div",{className:"smartblock-tooltip"},r.createElement("div",{className:"smartblock-tooltip-inner"},r.createElement("input",{className:"smartblock-tooltip-input",type:"text",value:n,placeholder:"https://~",onKeyDown:function(t){"Enter"===t.key&&e.onClick(n)},onChange:function(e){i(e.target.value)}}),r.createElement("button",{className:"smartblock-tooltip-btn",onClick:function(){e.onClick(n)},style:{paddingLeft:"7px"}},r.createElement(o.default,{style:{width:"24px",height:"24px",overflow:"hidden"}})))):null}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){switch(n.call(e)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===e?"null":void 0===e?"undefined":e!=e?"nan":e&&1===e.nodeType?"element":typeof(e=e.valueOf?e.valueOf():Object.prototype.valueOf.apply(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26),o=n(27),i=n(28),s=n(29),l=n(39),a=n(41),c=n(43),u=n(44),h=n(46),d=n(48),f=n(51),p=n(62),m=n(64),g=n(66),v=n(68),y=n(70),b=n(72),w=n(30),_=n(31);t.default=[new r.default,new l.default,new a.default,new c.default,new u.default,new h.default,new d.default,new f.default,new p.default,new m.default,new g.default,new v.default,new y.default,new b.default,new s.default,new i.default,new o.default,new w.default,new _.default({placeholder:"Content here..."})]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useScrolling=t.useScroll=t.useView=t.useForceUpdate=void 0;var r=n(3),o=n(1),i=n(7),s=n(4);t.useForceUpdate=function(){var e=r.useState(0)[1];return function(){e((function(e){return e+1}))}},t.useView=function(e){var n=t.useForceUpdate();return r.useMemo((function(){var t=new i.EditorView(null,{state:o.EditorState.create(e.options),dispatchTransaction:function(r){var o=t.state.applyTransaction(r),i=o.state,s=o.transactions;t.updateState(i),s.some((function(e){return e.docChanged}))&&e.onChange(i,t.dispatch),n()},attributes:e.attributes,nodeViews:e.nodeViews});return e.onChange(t.state,t.dispatch),t}),[])},t.useScroll=function(){var e=r.useState(s.getScrollTop()),t=e[0],n=e[1];return r.useEffect((function(){var e=function(){n(s.getScrollTop())};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[t]),t},t.useScrolling=function(e,t){var n=r.useState(!1),o=n[0],i=n[1];return r.useEffect((function(){var n=null,r=0;if(e.current){var s=e.current.getBoundingClientRect().top,l=setInterval((function(){var l=e.current.getBoundingClientRect().top;l!==s&&(s=l,3===++r&&!1===o&&(r=0,i(!0)),clearTimeout(n),n=setTimeout((function(){i(!1),r=0}),t))}),100);return function(){clearInterval(l)}}}),[]),o}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n(3),s=n(79),l=n(76);t.default=function(e,t){var n="string"==typeof e?document.querySelector(e):e;t.extensions||(t.extensions=l.default),i.render(o.createElement(o.Fragment,null,o.createElement(s.default,r({},t))),n)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,l=i.length;s<l;s++,o++)r[o]=i[s];return r};Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(0),l=n(10),a=n(5),c=n(80),u=n(14),h=n(13),d=n(86),f=n(87),p=n(88),m=n(89),g=n(90),v=n(92),y=n(95),b=n(4),w=n(96),_=i.useState,S=i.useEffect,k=i.useRef,x=function(e){return e.filter((function(e){return"mark"===e.group}))},O=function(e){var t=function(e){return e.filter((function(e){return!(!e.schema||"block"!==e.schema.group)})).reduce((function(e,t,n){var o,i=((o={})[t.name]=r({},t.schema),o);return r(r({},e),i)}),{})}(e),n=function(e){return e.reduce((function(e,t){return t.schemaDependencies?Object.assign({},e,t.schemaDependencies):e}),{})}(e);t=r(r(r({},t),{doc:{content:"block+"},text:{group:"inline"},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}}),n);var o=function(e){return x(e).reduce((function(e,t,n){var o,i=((o={})[t.name]=r({},t.schema),o);return r(r({},e),i)}),{})}(e);return new s.Schema({nodes:t,marks:o})},C=function(e){return e.filter((function(e){return e.showMenu}))},M=function(e,t){var n=[];e.forEach((function(e){e.plugins&&(n=o(n,e.plugins))}));var r=function(e,t){var n={};e.forEach((function(e){if(e.keys){var r=e.keys(t);Object.keys(r).forEach((function(e){n[e]||(n[e]=[]),n[e].push(r[e])}))}}));var r={};return Object.keys(n).forEach((function(e){r[e]=a.chainCommands.apply(void 0,n[e])})),l.keymap(r)}(e,t);return o(n,[r])};t.default=function(e){var t={extensions:w.default,offsetTop:0,showBackBtn:!1,autoSave:!1,showTitle:!1,titleText:"",full:!1},n=(e=Object.assign({},t,e)).html,r=e.json,o=e.extensions,l=e.showBackBtn,a=e.showTitle,E=e.markdown,N=e.showdown,T=e.titleText,A=O(e.extensions),D=n;if(r){var P=s.Node.fromJSON(A,r);D=b.getHtmlFromNode(P,A)}if(E&&N){var R=new N.Converter;R.setFlavor("github"),D=R.makeHtml(E)}if(e.autoSave){var I=location.pathname,z=localStorage.getItem("smartblock:"+I);z&&(D=z),a&&(T=localStorage.getItem("smartblock-title:"+I))}var j=_(null),B=j[0],F=j[1],$=k(null);S((function(){var t=document.createElement("div");t.innerHTML=D;var n=s.DOMParser.fromSchema(A).parse(t,{preserveWhitespace:!0});e.onInit&&e.onInit({schema:A}),e.getEditorRef&&e.getEditorRef($);var r={schema:A,plugins:M(o,A),doc:n};F(r)}),[]);var V=_(!0),L=V[0],H=V[1],q=i.useMemo((function(){return h()}),[]),W=k(null),J=function(e){return e.filter((function(e){return"block"===e.group}))}(o),K=x(o),U=function(e){return e.filter((function(e){return"edit"===e.group}))}(o),G=function(e){var t={};return e.forEach((function(e){e.view&&(t[e.name]=function(t,n,r){return e.view(t,n,r)})})),t}(o);return i.createElement("div",{id:q,onClick:function(e){e.target.getAttribute("id")===q?H(!1):H(!0)},ref:$},i.createElement("div",{className:u.default("smartblock-container",{"is-full":e.full})},e.showTitle&&i.createElement(y.default,{onChange:function(t){!function(e,t){var n=location.pathname;localStorage.setItem("smartblock-title:"+n,e),t.onTitleChange&&t.onTitleChange(e)}(t,e)},defaultValue:T,placeholder:e.titlePlaceholder}),i.createElement("div",{className:"smartblock-inner"},i.createElement("div",{className:L?"":"ProseMirrorHideSelection",ref:W},i.createElement("div",{className:"smartblock-input-area"},B&&i.createElement(d.default,{options:B,nodeViews:G,onChange:function(t,n){(function(e,t,n,r,o,i){var s=e.doc;if(o&&o.current){var l=o.current.querySelector(".selected");if(l){var a=b.getViewport(),u=b.getScrollTop()+a.height,h=b.getOffset(l).top;if(h+80>=u){if(!/iPod|iPhone|iPad/.test(navigator.platform)||!document.activeElement)return c.default(0,h-80,{duration:300}),!0;if(document.activeElement.isContentEditable)return c.default(0,h-80,{duration:300}),!0}}}if(n.onChange){var d=b.getHtmlFromNode(s,r),f={json:s.toJSON(),html:d,schema:r};if(n.outputMarkdown&&i){var p=new i.Converter;p.setFlavor("github"),f.markdown=p.makeMd(d)}n.onChange(f)}if(n.autoSave){var m=location.pathname;d=b.getHtmlFromNode(s,r);localStorage.setItem("smartblock:"+m,d)}var g=s.content.childCount,v=s.content.child(g-1);if("paragraph"!==v.type.name){var y=e.schema.nodes.paragraph;t(e.tr.insert(e.doc.content.size,y.createAndFill()))}else if(0!==v.textContent.length){y=e.schema.nodes.paragraph;t(e.tr.insert(e.doc.content.size,y.createAndFill()))}return!1})(t,n,e,A,W,N)&&setTimeout((function(){H(!0)}),700)},render:function(e){var t=e.editor,n=e.view;return e.scrolling&&H(!1),i.createElement(i.Fragment,null,L&&i.createElement(i.Fragment,null,i.createElement(m.default,{view:n,menu:C(J)}),i.createElement(p.default,{view:n,menu:C(U)}),function(e,t){var n=b.getParentNodeFromState(e.state),r=t.find((function(e){return e.name===n.type.name}));return!r||!r.hideInlineMenuOnFocus}(n,J)&&i.createElement(f.default,{menu:C(K),blockMenu:C(J),view:n}),i.createElement(v.default,{view:n,menu:C(J)}),l&&i.createElement(g.default,{view:n})),t)}}))))))}},function(e,t,n){var r=n(81),o=n(85);e.exports=function(e,t,n){n=n||{};var i=function(){var e=window.pageYOffset||document.documentElement.scrollTop,t=window.pageXOffset||document.documentElement.scrollLeft;return{top:e,left:t}}(),s=r(i).ease(n.ease||"out-circ").to({top:t,left:e}).duration(n.duration||1e3);function l(){o(l),s.update()}return s.update((function(e){window.scrollTo(0|e.left,0|e.top)})),s.on("end",(function(){l=function(){}})),l(),s}},function(e,t,n){var r=n(82),o=n(83),i=n(75),s=n(84);function l(e){if(!(this instanceof l))return new l(e);this._from=e,this.ease("linear"),this.duration(500)}e.exports=l,r(l.prototype),l.prototype.reset=function(){return this.isArray="array"===i(this._from),this._curr=o(this._from),this._done=!1,this._start=Date.now(),this},l.prototype.to=function(e){return this.reset(),this._to=e,this},l.prototype.duration=function(e){return this._duration=e,this},l.prototype.ease=function(e){if(!(e="function"==typeof e?e:s[e]))throw new TypeError("invalid easing function");return this._ease=e,this},l.prototype.stop=function(){return this.stopped=!0,this._done=!0,this.emit("stop"),this.emit("end"),this},l.prototype.step=function(){if(!this._done){var e=this._duration,t=Date.now();if(t-this._start>=e)return this._from=this._to,this._update(this._to),this._done=!0,this.emit("end"),this;var n=this._from,r=this._to,o=this._curr,i=(0,this._ease)((t-this._start)/e);if(this.isArray){for(var s=0;s<n.length;++s)o[s]=n[s]+(r[s]-n[s])*i;return this._update(o),this}for(var l in n)o[l]=n[l]+(r[l]-n[l])*i;return this._update(o),this}},l.prototype.update=function(e){return 0==arguments.length?this.step():(this._update=e,this)}},function(e,t){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r;try{r=n(75)}catch(e){r=n(75)}e.exports=function e(t){switch(r(t)){case"object":var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=e(t[o]));return n;case"array":n=new Array(t.length);for(var i=0,s=t.length;i<s;i++)n[i]=e(t[i]);return n;case"regexp":var l="";return l+=t.multiline?"m":"",l+=t.global?"g":"",l+=t.ignoreCase?"i":"",new RegExp(t.source,l);case"date":return new Date(t.getTime());default:return t}}},function(e,t){t.linear=function(e){return e},t.inQuad=function(e){return e*e},t.outQuad=function(e){return e*(2-e)},t.inOutQuad=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},t.inCube=function(e){return e*e*e},t.outCube=function(e){return--e*e*e+1},t.inOutCube=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},t.inQuart=function(e){return e*e*e*e},t.outQuart=function(e){return 1- --e*e*e*e},t.inOutQuart=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},t.inQuint=function(e){return e*e*e*e*e},t.outQuint=function(e){return--e*e*e*e*e+1},t.inOutQuint=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},t.inSine=function(e){return 1-Math.cos(e*Math.PI/2)},t.outSine=function(e){return Math.sin(e*Math.PI/2)},t.inOutSine=function(e){return.5*(1-Math.cos(Math.PI*e))},t.inExpo=function(e){return 0==e?0:Math.pow(1024,e-1)},t.outExpo=function(e){return 1==e?e:1-Math.pow(2,-10*e)},t.inOutExpo=function(e){return 0==e?0:1==e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},t.inCirc=function(e){return 1-Math.sqrt(1-e*e)},t.outCirc=function(e){return Math.sqrt(1- --e*e)},t.inOutCirc=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},t.inBack=function(e){var t=1.70158;return e*e*((t+1)*e-t)},t.outBack=function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},t.inOutBack=function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},t.inBounce=function(e){return 1-t.outBounce(1-e)},t.outBounce=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},t.inOutBounce=function(e){return e<.5?.5*t.inBounce(2*e):.5*t.outBounce(2*e-1)+.5},t["in-quad"]=t.inQuad,t["out-quad"]=t.outQuad,t["in-out-quad"]=t.inOutQuad,t["in-cube"]=t.inCube,t["out-cube"]=t.outCube,t["in-out-cube"]=t.inOutCube,t["in-quart"]=t.inQuart,t["out-quart"]=t.outQuart,t["in-out-quart"]=t.inOutQuart,t["in-quint"]=t.inQuint,t["out-quint"]=t.outQuint,t["in-out-quint"]=t.inOutQuint,t["in-sine"]=t.inSine,t["out-sine"]=t.outSine,t["in-out-sine"]=t.inOutSine,t["in-expo"]=t.inExpo,t["out-expo"]=t.outExpo,t["in-out-expo"]=t.inOutExpo,t["in-circ"]=t.inCirc,t["out-circ"]=t.outCirc,t["in-out-circ"]=t.inOutCirc,t["in-back"]=t.inBack,t["out-back"]=t.outBack,t["in-out-back"]=t.inOutBack,t["in-bounce"]=t.inBounce,t["out-bounce"]=t.outBounce,t["in-out-bounce"]=t.inOutBounce},function(e,t){t=e.exports=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){var t=(new Date).getTime(),r=Math.max(0,16-(t-n)),o=setTimeout(e,r);return n=t,o};var n=(new Date).getTime();var r=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.clearTimeout;t.cancel=function(e){r.call(window,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(77),i=r.useRef,s=r.useEffect;t.default=function(e){var t=i(null),n=o.useView(e);s((function(){t.current&&t.current.appendChild(n.dom),e.autoFocus&&n.focus()}),[]);var l=o.useScrolling(t,300),a=r.createElement("div",{ref:t});return e.render({editor:a,view:n,scrolling:l})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(4),i=n(12),s=r.useRef;t.default=function(e){var t=e.menu,n=e.blockMenu,l=e.children,a=e.view,c=a.state,u=a.dispatch,h=a.state.selection,d=s(null),f=function(e,t){var n=e.state.selection,r=o.getOffset(e.dom).left,i=e.coordsAtPos(n.$head.pos),s=o.getOffset(e.dom).top,l=i.top+o.getScrollTop()+25-s,a=i.left-50-r;if(t&&t.current&&t.current.offsetWidth){var c=t.current.offsetWidth;if(a+c>window.innerWidth)return{top:l,left:window.innerWidth-c}}return{left:a,top:l}}(a,d),p=function(e,t){var n=e.state.selection,r=o.getOffset(e.dom).left,i=e.coordsAtPos(n.$head.pos).left-50-r,s=t.current?t.current.offsetWidth:0;return t&&t.current&&t.current.offsetWidth&&i+s>window.innerWidth?i-window.innerWidth+s:20}(a,d),m=function(e){var t=e.blockMenu,n=e.view,o=n.state,i=t.find((function(e){return!(!e.active||!e.active(o))}));return!(!i||!i.customInlineMenu)&&r.createElement(r.Fragment,null,i.customInlineMenu(n))}({blockMenu:n,view:a});return!h||h.empty||0===t.length?r.createElement(r.Fragment,null):r.createElement("div",{style:f,ref:d,className:"smartblock-inline-menu"},r.createElement("div",{className:"smartblock-inline-menu-arrow",style:{left:p+"px"}}),r.createElement("div",{className:"smartblock-inline-menu-inner"},l,t.map((function(e,t){return r.createElement(i.default,{key:"inline-"+t,type:"button",active:e.active&&e.active(c),disabled:e.enable&&!e.enable(c),onClick:function(t){t.preventDefault(),e.onClick(c,u)}},"string"!=typeof e.icon?e.icon:r.createElement("span",{dangerouslySetInnerHTML:{__html:e.icon}}))})),m&&m.props&&m.props.children&&r.createElement(r.Fragment,null,m)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(8),i=n(4),s=n(12),l=r.useState,a=r.useEffect,c=function(e){var t=e.view,n=t.state,r=n.selection;if(!r)return{top:-1e3};var s=r.$anchor,l=n.doc.resolve(s.pos).path[1],a=0;if(0===s.pos)return{top:-1e3};var c=o.findChildren(n.doc,(function(e){return l===a||l+1===a?(a++,!0):(a++,!1)}),!1)[0];if(!c)return{top:-1e3};var u,h=t.coordsAtPos(c.pos),d=t.nodeDOM(c.pos),f=i.getOffset(d).top,p=(u=t.dom,i.getOffset(u).top);return 0===h.top?{top:-1e3}:{right:20,top:f-p-40}};t.default=function(e){var t=l({right:20,top:0}),n=t[0],o=t[1],i=e.menu,u=e.view,h=u.state,d=u.dispatch;return a((function(){var t=c(e);o(t)}),[e]),r.createElement("div",{style:n,className:"smartblock-edit-menu"},i.map((function(e,t){return r.createElement(s.default,{className:"smartblock-edit-btn",key:"edit-"+t,type:"button",color:e.btnColor,active:e.active&&e.active(h),disabled:e.enable&&!e.enable(h),onClick:function(t){t.preventDefault(),e.onClick(h,d,u)}},e.icon)})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(8),i=n(4),s=n(12),l=r.useState,a=r.useEffect;t.default=function(e){var t=e.menu,n=e.view,c=n.state,u=n.dispatch,h=function(e){var t=e.menu,n=e.view,o=n.state,i=t.find((function(e){return!(!e.active||!e.active(o))}));return i&&i.customMenu?r.createElement(r.Fragment,null,i.customMenu(n)):r.createElement(r.Fragment,null)}(e),d=function(e){var t=e.menu,n=e.view,r=i.getParentNodeFromState(n.state);if(r&&t&&t.length){var o=r.type.name,s=t.find((function(e){return e.name===o}));return!s||!s.hideMenuOnFocus}}(e),f=l({left:0,top:0}),p=f[0],m=f[1];if(a((function(){var t=function(e){var t=e.view,n=t.state,r=n.selection;if(!r||!r.empty)return{top:-1e3,right:0};var s=r.$anchor;if(0===s.pos)return{top:-1e3,right:0};var l=n.doc.resolve(s.pos).path[1],a=0,c=o.findChildren(n.doc,(function(e){return l===a||l+1===a?(a++,!0):(a++,!1)}),!1)[0];if(!c)return{top:-1e3};var u=t.coordsAtPos(c.pos),h=t.nodeDOM(c.pos),d=i.getOffset(h).top,f=i.getOffset(t.dom).top;return 0===u.top?{top:-1e3}:h&&h.offsetHeight?{left:5,top:d+h.offsetHeight-f+20}:{left:5,top:d-f+20}}(e);m(t)}),[e]),!d)return null;var g=!1,v=t.find((function(e){return!(!e.active||!e.active(c))}));return v&&v.hideBlockMenuOnFocus&&(g=!0),r.createElement("div",{style:p,className:"smartblock-menu"},r.createElement("div",{className:"smartblock-menu-top"},t.map((function(e,t){return e.customButton?e.customButton({state:c,dispatch:u}):r.createElement(s.default,{key:t,type:"button",active:e.active&&e.active(c),disabled:e.enable&&!e.enable(c)||g,onClick:function(t){t.preventDefault(),e.onClick(c,u,n)}},"string"!=typeof e.icon?e.icon:r.createElement("span",{dangerouslySetInnerHTML:{__html:e.icon}}))}))),h&&h.props&&h.props.children&&r.createElement("div",{className:"smartblock-custom-menu"},h))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(21),i=n(91);t.default=function(e){var t=e.view,n=t.state,s=t.dispatch;return o.undoDepth(n)?r.createElement("button",{className:"smartblock-backbtn",onClick:function(){o.undo(n,s)}},r.createElement(i.default,{style:{width:"24px",height:"24px"}})):r.createElement(r.Fragment,null)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);t.default=function(e){return o.createElement("svg",r({width:1792,height:1792,viewBox:"0 0 1792 1792"},e),o.createElement("title",null,"undo"),o.createElement("g",{id:"bebf11ee-5e4c-414b-9c0e-9afbb64c0153","data-name":"\\u30E9\\u30D9\\u30EB"},o.createElement("path",{d:"M715.62,1146.77v412.47L0,843.62,715.62,128V510.8l356.57,39.61c395.14,43.91,676.64,243.79,716.86,492,31.48,194.23-94.21,351.37-190.3,420.9-106.64,77.16-245,118.33-401.49,76.89,119.27-39.75,212.14-134.61,207.69-214.79-7-125.53-148.89-178.63-452-178.63Z"})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=n(93),i=n(4),s=r.useState,l=r.useEffect;t.default=function(e){var t=function(e){var t=e.menu,n=e.view,r=i.getParentNodeFromState(n.state);if(r&&t&&t.length){var o=r.type.name,s=t.find((function(e){return e.name===o}));return s&&s.customLayout?s.customLayout:null}}(e);if(!t)return null;var n=e.view,a=i.calculateStyle(e.view),c=i.getParentNodeFromState(n.state),u=i.findNodePosition(n.state.doc,c),h=n.nodeDOM(u),d={position:"absolute",zIndex:10,top:a.top,left:0,right:0};return function(e){var t=s({top:0,left:0,width:0,height:0}),n=t[0],r=t[1];return l((function(){o.default(e,(function(){var t=e.getBoundingClientRect();n.height!==t.height&&r(t)}))})),n}(h).height?r.createElement("div",{style:d},t(e.view,h)):null}},function(e,t,n){var r,o;
/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */!function(i,s){"use strict";r=[n(94)],void 0===(o=function(e){return function(e,t){var n=e.jQuery,r=e.console;function o(e,t){for(var n in t)e[n]=t[n];return e}var i=Array.prototype.slice;function s(e,t,l){if(!(this instanceof s))return new s(e,t,l);var a,c=e;("string"==typeof e&&(c=document.querySelectorAll(e)),c)?(this.elements=(a=c,Array.isArray(a)?a:"object"==typeof a&&"number"==typeof a.length?i.call(a):[a]),this.options=o({},this.options),"function"==typeof t?l=t:o(this.options,t),l&&this.on("always",l),this.getImages(),n&&(this.jqDeferred=new n.Deferred),setTimeout(this.check.bind(this))):r.error("Bad element for imagesLoaded "+(c||e))}s.prototype=Object.create(t.prototype),s.prototype.options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&l[t]){for(var n=e.querySelectorAll("img"),r=0;r<n.length;r++){var o=n[r];this.addImage(o)}if("string"==typeof this.options.background){var i=e.querySelectorAll(this.options.background);for(r=0;r<i.length;r++){var s=i[r];this.addElementBackgroundImages(s)}}}};var l={1:!0,9:!0,11:!0};function a(e){this.img=e}function c(e,t){this.url=e,this.element=t,this.img=new Image}return s.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var n=/url\((['"])?(.*?)\1\)/gi,r=n.exec(t.backgroundImage);null!==r;){var o=r&&r[2];o&&this.addBackground(o,e),r=n.exec(t.backgroundImage)}},s.prototype.addImage=function(e){var t=new a(e);this.images.push(t)},s.prototype.addBackground=function(e,t){var n=new c(e,t);this.images.push(n)},s.prototype.check=function(){var e=this;function t(t,n,r){setTimeout((function(){e.progress(t,n,r)}))}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach((function(e){e.once("progress",t),e.check()})):this.complete()},s.prototype.progress=function(e,t,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&r&&r.log("progress: "+n,e,t)},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},a.prototype=Object.create(t.prototype),a.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},a.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},a.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},a.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},a.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},a.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},a.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},c.prototype=Object.create(a.prototype),c.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},c.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},c.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},s.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((n=t).fn.imagesLoaded=function(e,t){return new s(this,e,t).jqDeferred.promise(n(this))})},s.makeJQueryPlugin(),s}(i,e)}.apply(t,r))||(e.exports=o)}("undefined"!=typeof window?window:this)},function(e,t,n){var r,o;"undefined"!=typeof window&&window,void 0===(o="function"==typeof(r=function(){"use strict";function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var n=this._events=this._events||{},r=n[e]=n[e]||[];return-1==r.indexOf(t)&&r.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}},t.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var r=n.indexOf(t);return-1!=r&&n.splice(r,1),this}},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var r=this._onceEvents&&this._onceEvents[e],o=0;o<n.length;o++){var i=n[o];r&&r[i]&&(this.off(e,i),delete r[i]),i.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e})?r.call(t,n,t,e):r)||(e.exports=o)},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n(0),s=n(1),l=n(7),a=n(4),c=n(77),u=o.useRef,h=o.useEffect,d={nodes:{doc:{content:"block"},text:{group:"inline"},title:{group:"block",content:"text*",selectable:!1,parseDOM:[{tag:"h1"}],toDOM:function(){return["h1",0]}}}};t.default=function(e){e=Object.assign({},{placeholder:"Title here...",defaultValue:""},e);var t=u(null),n=new i.Schema(r({},d)),f=document.createElement("div");f.innerHTML=e.defaultValue;var p=i.DOMParser.fromSchema(n).parse(f),m={onChange:function(t){if(e.onChange){var r=a.getHtmlFromNode(t.doc,n);r=r.replace(/<h1>(.*)<\/h1>/,"$1"),e.onChange(r)}},options:{schema:n,doc:p,plugins:[new s.Plugin({props:{decorations:function(e){var t=[];return e.doc.descendants((function(e,n){e.type.isBlock&&0===e.childCount&&t.push(l.Decoration.node(n,n+e.nodeSize,{class:"empty-node"}))})),l.DecorationSet.create(e.doc,t)}}})]}},g=c.useView(m);return h((function(){t.current&&t.current.appendChild(g.dom)}),[]),o.createElement("div",{ref:t,className:"smartblock-title"})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26),o=n(27),i=n(28),s=n(29),l=n(30),a=n(31);t.default=[new r.default,new s.default,new i.default,new o.default,new l.default,new a.default({placeholder:"Content here..."})]}]).default}));